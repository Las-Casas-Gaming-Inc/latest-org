{"ast":null,"code":"import ArrayReader from '../../../readers/ArrayReader';\nimport ValueReader from '../../../readers/ValueReader';\nimport { NeighboursSelectionMode } from '../../../enums';\nexport default function FamCursorNeighboursTask(cursorItemTask, neighboursSelectionModeOptionTask, navigationFamilyTask, activeItemsTask) {\n  var _data = {\n      items: []\n    },\n    _hash = {};\n  var _dataTemplate = new ArrayReader(new ValueReader([\"string\", \"number\"], true), true);\n  function process() {\n    var context = {\n        isChanged: false,\n        hash: _hash\n      },\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\n      navigationFamily = navigationFamilyTask.getLogicalFamily(),\n      neighboursSelectionMode = neighboursSelectionModeOptionTask.getNeighboursSelectionMode(),\n      activeItems = activeItemsTask.getActiveItems();\n    _data.items = _dataTemplate.read(_data.items, getCursorNeighbours(cursorTreeItemId, neighboursSelectionMode, navigationFamily, activeItems), \"items\", context);\n    return context.isChanged;\n  }\n  function getCursorNeighbours(cursorTreeItemId, neighboursSelectionMode, navigationFamily, activeItems) {\n    var result = [],\n      processed = {};\n    if (cursorTreeItemId !== null) {\n      switch (neighboursSelectionMode) {\n        case NeighboursSelectionMode.ParentsAndChildren:\n          navigationFamily.loopParents(this, cursorTreeItemId, function (itemid, item) {\n            if (item.isVisible && !processed.hasOwnProperty(itemid)) {\n              processed[itemid] = true;\n              result.push(itemid);\n            }\n            if (activeItems.hasOwnProperty(itemid)) {\n              return navigationFamily.SKIP;\n            }\n          });\n          navigationFamily.loopChildren(this, cursorTreeItemId, function (itemid, item) {\n            if (item.isVisible && !processed.hasOwnProperty(itemid)) {\n              processed[itemid] = true;\n              result.push(itemid);\n            }\n            if (activeItems.hasOwnProperty(itemid)) {\n              return navigationFamily.SKIP;\n            }\n          });\n          break;\n        case NeighboursSelectionMode.ParentsChildrenSiblingsAndSpouses:\n          navigationFamily.loopNeighbours(this, cursorTreeItemId, function (itemid, item) {\n            if (item.isVisible && !processed.hasOwnProperty(itemid)) {\n              processed[itemid] = true;\n              result.push(itemid);\n            }\n            if (activeItems.hasOwnProperty(itemid)) {\n              return true;\n            }\n          });\n          break;\n      }\n    }\n    return result;\n  }\n  function getItems() {\n    return _data.items;\n  }\n  return {\n    process: process,\n    getItems: getItems\n  };\n}\n;","map":{"version":3,"names":["ArrayReader","ValueReader","NeighboursSelectionMode","FamCursorNeighboursTask","cursorItemTask","neighboursSelectionModeOptionTask","navigationFamilyTask","activeItemsTask","_data","items","_hash","_dataTemplate","process","context","isChanged","hash","cursorTreeItemId","getCursorTreeItem","navigationFamily","getLogicalFamily","neighboursSelectionMode","getNeighboursSelectionMode","activeItems","getActiveItems","read","getCursorNeighbours","result","processed","ParentsAndChildren","loopParents","itemid","item","isVisible","hasOwnProperty","push","SKIP","loopChildren","ParentsChildrenSiblingsAndSpouses","loopNeighbours","getItems"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/tasks/transformations/selection/FamCursorNeighboursTask.js"],"sourcesContent":["import ArrayReader from '../../../readers/ArrayReader';\r\nimport ValueReader from '../../../readers/ValueReader';\r\nimport { NeighboursSelectionMode } from '../../../enums';\r\n\r\nexport default function FamCursorNeighboursTask(cursorItemTask, neighboursSelectionModeOptionTask, navigationFamilyTask, activeItemsTask) {\r\n  var _data = {\r\n    items: []\r\n  },\r\n    _hash = {};\r\n\r\n  var _dataTemplate = new ArrayReader(\r\n    new ValueReader([\"string\", \"number\"], true),\r\n    true\r\n  );\r\n\r\n  function process() {\r\n    var context = {\r\n      isChanged: false,\r\n      hash: _hash\r\n    },\r\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\r\n      navigationFamily = navigationFamilyTask.getLogicalFamily(),\r\n      neighboursSelectionMode = neighboursSelectionModeOptionTask.getNeighboursSelectionMode(),\r\n      activeItems = activeItemsTask.getActiveItems();\r\n\r\n    _data.items = _dataTemplate.read(_data.items, getCursorNeighbours(cursorTreeItemId, neighboursSelectionMode, navigationFamily, activeItems), \"items\", context);\r\n\r\n    return context.isChanged;\r\n  }\r\n\r\n  function getCursorNeighbours(cursorTreeItemId, neighboursSelectionMode, navigationFamily, activeItems) {\r\n    var result = [],\r\n      processed = {};\r\n    if (cursorTreeItemId !== null) {\r\n      switch (neighboursSelectionMode) {\r\n        case NeighboursSelectionMode.ParentsAndChildren:\r\n          navigationFamily.loopParents(this, cursorTreeItemId, function (itemid, item) {\r\n            if (item.isVisible && !processed.hasOwnProperty(itemid)) {\r\n              processed[itemid] = true;\r\n              result.push(itemid);\r\n            }\r\n            if (activeItems.hasOwnProperty(itemid)) {\r\n              return navigationFamily.SKIP;\r\n            }\r\n          });\r\n          navigationFamily.loopChildren(this, cursorTreeItemId, function (itemid, item) {\r\n            if (item.isVisible && !processed.hasOwnProperty(itemid)) {\r\n              processed[itemid] = true;\r\n              result.push(itemid);\r\n            }\r\n            if (activeItems.hasOwnProperty(itemid)) {\r\n              return navigationFamily.SKIP;\r\n            }\r\n          });\r\n          break;\r\n        case NeighboursSelectionMode.ParentsChildrenSiblingsAndSpouses:\r\n          navigationFamily.loopNeighbours(this, cursorTreeItemId, function (itemid, item) {\r\n            if (item.isVisible && !processed.hasOwnProperty(itemid)) {\r\n              processed[itemid] = true;\r\n              result.push(itemid);\r\n            }\r\n            if (activeItems.hasOwnProperty(itemid)) {\r\n              return true;\r\n            }\r\n          });\r\n          break;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function getItems() {\r\n    return _data.items;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getItems: getItems\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}