{"ast":null,"code":"/*  Balance family tree so parents sharing the most children stay close to each other \r\n    Account for users position and primaryParent options\r\n*/\nimport FamilyBalance from './familyTransformations/FamilyBalance';\nimport UserDefinedPrimaryParents from './familyTransformations/UserDefinedPrimaryParents';\nimport TreeLevelConnectorStackSize from '../../models/TreeLevelConnectorStackSize';\nexport default function OrderFamilyNodesTask(orderFamilyNodesOptionTask, userDefinedNodesOrderTask, normalizeLogicalFamilyTask) {\n  var _data = {\n      maximumId: null,\n      /* maximum of OrgItem.id */\n      logicalFamily: null,\n      treeLevels: null,\n      /* TreeLevels */\n      bundles: null,\n      /* array of BaseConnectorBundle objects */\n      connectorStacks: null /* array of TreeLevelConnectorStackSize objects, it keeps total number of horizontal connectors lines between parents and children stack on top of each other */\n    },\n    _familyBalance = new FamilyBalance(),\n    _userDefinedPrimaryParents = new UserDefinedPrimaryParents(),\n    _nullTreeLevelConnectorStackSize = new TreeLevelConnectorStackSize();\n  function process(debug) {\n    var logicalFamily = normalizeLogicalFamilyTask.getLogicalFamily(),\n      maximumId = normalizeLogicalFamilyTask.getMaximumId(),\n      orderFamilyNodesOptions = orderFamilyNodesOptionTask.getOptions();\n    var balanceParams = {\n      logicalFamily: logicalFamily,\n      maximumId: maximumId,\n      itemsPositions: userDefinedNodesOrderTask.getPositions(),\n      itemsGroups: userDefinedNodesOrderTask.getGroups(),\n      primaryParents: _userDefinedPrimaryParents.getUserDefinedPrimaryParents(orderFamilyNodesOptions.items, logicalFamily)\n    };\n    var {\n      maximumId,\n      treeLevels,\n      bundles,\n      connectorStacks\n    } = _familyBalance.balance(balanceParams);\n    _data.maximumId = maximumId;\n    _data.treeLevels = treeLevels;\n    _data.bundles = bundles;\n    _data.connectorStacks = connectorStacks;\n    _data.logicalFamily = logicalFamily;\n    return true;\n  }\n  function getLogicalFamily() {\n    return _data.logicalFamily;\n  }\n  function getMaximumId() {\n    return _data.maximumId;\n  }\n  function getTreeLevels() {\n    return _data.treeLevels;\n  }\n  function getBundles() {\n    return _data.bundles;\n  }\n  function getConnectorsStacksSizes(levelid) {\n    return _data.connectorStacks[levelid] || _nullTreeLevelConnectorStackSize;\n  }\n  return {\n    process: process,\n    getLogicalFamily: getLogicalFamily,\n    getMaximumId: getMaximumId,\n    getTreeLevels: getTreeLevels,\n    getBundles: getBundles,\n    getConnectorsStacksSizes: getConnectorsStacksSizes\n  };\n}\n;","map":{"version":3,"names":["FamilyBalance","UserDefinedPrimaryParents","TreeLevelConnectorStackSize","OrderFamilyNodesTask","orderFamilyNodesOptionTask","userDefinedNodesOrderTask","normalizeLogicalFamilyTask","_data","maximumId","logicalFamily","treeLevels","bundles","connectorStacks","_familyBalance","_userDefinedPrimaryParents","_nullTreeLevelConnectorStackSize","process","debug","getLogicalFamily","getMaximumId","orderFamilyNodesOptions","getOptions","balanceParams","itemsPositions","getPositions","itemsGroups","getGroups","primaryParents","getUserDefinedPrimaryParents","items","balance","getTreeLevels","getBundles","getConnectorsStacksSizes","levelid"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/tasks/transformations/OrderFamilyNodesTask.js"],"sourcesContent":["/*  Balance family tree so parents sharing the most children stay close to each other \r\n    Account for users position and primaryParent options\r\n*/\r\nimport FamilyBalance from './familyTransformations/FamilyBalance';\r\nimport UserDefinedPrimaryParents from './familyTransformations/UserDefinedPrimaryParents';\r\nimport TreeLevelConnectorStackSize from '../../models/TreeLevelConnectorStackSize';\r\n\r\nexport default function OrderFamilyNodesTask(orderFamilyNodesOptionTask, userDefinedNodesOrderTask, normalizeLogicalFamilyTask) {\r\n  var _data = {\r\n    maximumId: null, /* maximum of OrgItem.id */\r\n    logicalFamily: null,\r\n    treeLevels: null, /* TreeLevels */\r\n    bundles: null, /* array of BaseConnectorBundle objects */\r\n    connectorStacks: null /* array of TreeLevelConnectorStackSize objects, it keeps total number of horizontal connectors lines between parents and children stack on top of each other */\r\n  },\r\n    _familyBalance = new FamilyBalance(),\r\n    _userDefinedPrimaryParents = new UserDefinedPrimaryParents(),\r\n    _nullTreeLevelConnectorStackSize = new TreeLevelConnectorStackSize();\r\n\r\n  function process(debug) {\r\n    var logicalFamily = normalizeLogicalFamilyTask.getLogicalFamily(),\r\n      maximumId = normalizeLogicalFamilyTask.getMaximumId(),\r\n      orderFamilyNodesOptions = orderFamilyNodesOptionTask.getOptions();\r\n\r\n    var balanceParams = {\r\n      logicalFamily: logicalFamily,\r\n      maximumId: maximumId,\r\n      itemsPositions: userDefinedNodesOrderTask.getPositions(),\r\n      itemsGroups: userDefinedNodesOrderTask.getGroups(),\r\n      primaryParents: _userDefinedPrimaryParents.getUserDefinedPrimaryParents(orderFamilyNodesOptions.items, logicalFamily)\r\n    };\r\n\r\n    var {maximumId, treeLevels, bundles, connectorStacks} = _familyBalance.balance(balanceParams);\r\n\r\n    _data.maximumId = maximumId;\r\n    _data.treeLevels = treeLevels;\r\n    _data.bundles = bundles;\r\n    _data.connectorStacks = connectorStacks;\r\n    _data.logicalFamily = logicalFamily;\r\n\r\n    return true;\r\n  }\r\n\r\n  function getLogicalFamily() {\r\n    return _data.logicalFamily;\r\n  }\r\n\r\n  function getMaximumId() {\r\n    return _data.maximumId;\r\n  }\r\n\r\n  function getTreeLevels() {\r\n    return _data.treeLevels;\r\n  }\r\n\r\n  function getBundles() {\r\n    return _data.bundles;\r\n  }\r\n\r\n  function getConnectorsStacksSizes(levelid) {\r\n    return _data.connectorStacks[levelid] || _nullTreeLevelConnectorStackSize;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getLogicalFamily: getLogicalFamily,\r\n    getMaximumId: getMaximumId,\r\n    getTreeLevels: getTreeLevels,\r\n    getBundles: getBundles,\r\n    getConnectorsStacksSizes: getConnectorsStacksSizes\r\n  };\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,aAAa,MAAM,uCAAuC;AACjE,OAAOC,yBAAyB,MAAM,mDAAmD;AACzF,OAAOC,2BAA2B,MAAM,0CAA0C;AAElF,eAAe,SAASC,oBAAoBA,CAACC,0BAA0B,EAAEC,yBAAyB,EAAEC,0BAA0B,EAAE;EAC9H,IAAIC,KAAK,GAAG;MACVC,SAAS,EAAE,IAAI;MAAE;MACjBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE,IAAI;MAAE;MAClBC,OAAO,EAAE,IAAI;MAAE;MACfC,eAAe,EAAE,IAAI,CAAC;IACxB,CAAC;IACCC,cAAc,GAAG,IAAIb,aAAa,CAAC,CAAC;IACpCc,0BAA0B,GAAG,IAAIb,yBAAyB,CAAC,CAAC;IAC5Dc,gCAAgC,GAAG,IAAIb,2BAA2B,CAAC,CAAC;EAEtE,SAASc,OAAOA,CAACC,KAAK,EAAE;IACtB,IAAIR,aAAa,GAAGH,0BAA0B,CAACY,gBAAgB,CAAC,CAAC;MAC/DV,SAAS,GAAGF,0BAA0B,CAACa,YAAY,CAAC,CAAC;MACrDC,uBAAuB,GAAGhB,0BAA0B,CAACiB,UAAU,CAAC,CAAC;IAEnE,IAAIC,aAAa,GAAG;MAClBb,aAAa,EAAEA,aAAa;MAC5BD,SAAS,EAAEA,SAAS;MACpBe,cAAc,EAAElB,yBAAyB,CAACmB,YAAY,CAAC,CAAC;MACxDC,WAAW,EAAEpB,yBAAyB,CAACqB,SAAS,CAAC,CAAC;MAClDC,cAAc,EAAEb,0BAA0B,CAACc,4BAA4B,CAACR,uBAAuB,CAACS,KAAK,EAAEpB,aAAa;IACtH,CAAC;IAED,IAAI;MAACD,SAAS;MAAEE,UAAU;MAAEC,OAAO;MAAEC;IAAe,CAAC,GAAGC,cAAc,CAACiB,OAAO,CAACR,aAAa,CAAC;IAE7Ff,KAAK,CAACC,SAAS,GAAGA,SAAS;IAC3BD,KAAK,CAACG,UAAU,GAAGA,UAAU;IAC7BH,KAAK,CAACI,OAAO,GAAGA,OAAO;IACvBJ,KAAK,CAACK,eAAe,GAAGA,eAAe;IACvCL,KAAK,CAACE,aAAa,GAAGA,aAAa;IAEnC,OAAO,IAAI;EACb;EAEA,SAASS,gBAAgBA,CAAA,EAAG;IAC1B,OAAOX,KAAK,CAACE,aAAa;EAC5B;EAEA,SAASU,YAAYA,CAAA,EAAG;IACtB,OAAOZ,KAAK,CAACC,SAAS;EACxB;EAEA,SAASuB,aAAaA,CAAA,EAAG;IACvB,OAAOxB,KAAK,CAACG,UAAU;EACzB;EAEA,SAASsB,UAAUA,CAAA,EAAG;IACpB,OAAOzB,KAAK,CAACI,OAAO;EACtB;EAEA,SAASsB,wBAAwBA,CAACC,OAAO,EAAE;IACzC,OAAO3B,KAAK,CAACK,eAAe,CAACsB,OAAO,CAAC,IAAInB,gCAAgC;EAC3E;EAEA,OAAO;IACLC,OAAO,EAAEA,OAAO;IAChBE,gBAAgB,EAAEA,gBAAgB;IAClCC,YAAY,EAAEA,YAAY;IAC1BY,aAAa,EAAEA,aAAa;IAC5BC,UAAU,EAAEA,UAAU;IACtBC,wBAAwB,EAAEA;EAC5B,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}