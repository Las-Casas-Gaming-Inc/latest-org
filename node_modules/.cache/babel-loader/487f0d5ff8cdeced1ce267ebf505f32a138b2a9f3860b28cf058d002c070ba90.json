{"ast":null,"code":"import Rect from '../../graphics/structs/Rect';\nimport RenderEventArgs from '../../events/RenderEventArgs';\nimport { Layers, ZOrderType } from '../../enums';\nimport Shape from '../../graphics/shapes/Shape';\nimport ShapeAnnotationConfig from '../../configs/ShapeAnnotationConfig';\nexport default function DrawShapeAnnotationTask(getGraphics, createTransformTask, applyLayoutChangesTask, orientationOptionTask, shapeAnnotationOptionTask, alignDiagramTask, annotationLabelTemplateTask, zOrderType) {\n  var _graphics, _transform, _orientationOptions, _annotationLabelTemplate;\n  function process() {\n    _graphics = getGraphics();\n    _transform = createTransformTask.getTransform();\n    _orientationOptions = orientationOptionTask.getOptions();\n    _annotationLabelTemplate = annotationLabelTemplateTask.getTemplate();\n    switch (zOrderType) {\n      case ZOrderType.Background:\n        //ignore jslint\n        _graphics.reset(\"placeholder\", Layers.BackgroundAnnotations);\n        break;\n      case ZOrderType.Foreground:\n        //ignore jslint\n        _graphics.reset(\"placeholder\", Layers.ForegroundAnnotations);\n        break;\n    }\n    _drawAnnotations(shapeAnnotationOptionTask.getAnnotations(), alignDiagramTask.getItemPosition);\n    return false;\n  }\n  function _drawAnnotations(annotations, getItemPosition) {\n    var panel, index, len, index2, len2, index3, len3, shape, defaultConfig, itemPosition, position, properties, property, annotationConfig, uiHash;\n    switch (zOrderType) {\n      case ZOrderType.Background:\n        //ignore jslint\n        panel = _graphics.activate(\"placeholder\", Layers.BackgroundAnnotations);\n        break;\n      case ZOrderType.Foreground:\n        //ignore jslint\n        panel = _graphics.activate(\"placeholder\", Layers.ForegroundAnnotations);\n        break;\n    }\n    for (index = 0, len = annotations.length; index < len; index += 1) {\n      annotationConfig = annotations[index];\n      if (annotationConfig.items != null && annotationConfig.items.length > 0) {\n        position = new Rect();\n        for (index2 = 0, len2 = annotationConfig.items.length; index2 < len2; index2 += 1) {\n          itemPosition = getItemPosition(annotationConfig.items[index2]);\n          if (itemPosition != null) {\n            position.addRect(itemPosition.actualPosition);\n          }\n        }\n        if (!position.isEmpty()) {\n          shape = new Shape(_graphics);\n          defaultConfig = new ShapeAnnotationConfig();\n          properties = [\"opacity\", \"cornerRadius\", \"shapeType\", \"offset\", \"lineWidth\", \"borderColor\", \"fillColor\", \"lineType\", \"labelSize\", \"labelOffset\", \"labelPlacement\", \"zOrderType\"];\n          for (index3 = 0, len3 = properties.length; index3 < len3; index3 += 1) {\n            property = properties[index3];\n            shape[property] = annotationConfig.hasOwnProperty(property) ? annotationConfig[property] : defaultConfig[property];\n          }\n          shape.position = position;\n          shape.orientationType = _orientationOptions.orientationType;\n          shape.panelSize = panel.size;\n          shape.labelTemplate = _annotationLabelTemplate;\n          shape.hasLabel = annotationConfig.templateName != null || annotationConfig.label != null;\n          uiHash = new RenderEventArgs();\n          uiHash.context = annotationConfig;\n          uiHash.templateName = shape.labelTemplate;\n          _transform.transformRect(position.x, position.y, position.width, position.height, true, this, function (x, y, width, height) {\n            var position = new Rect(x, y, width, height);\n            shape.draw(position, uiHash);\n          }); //ignore jslint\n        }\n      }\n    }\n  }\n  return {\n    process: process\n  };\n}\n;","map":{"version":3,"names":["Rect","RenderEventArgs","Layers","ZOrderType","Shape","ShapeAnnotationConfig","DrawShapeAnnotationTask","getGraphics","createTransformTask","applyLayoutChangesTask","orientationOptionTask","shapeAnnotationOptionTask","alignDiagramTask","annotationLabelTemplateTask","zOrderType","_graphics","_transform","_orientationOptions","_annotationLabelTemplate","process","getTransform","getOptions","getTemplate","Background","reset","BackgroundAnnotations","Foreground","ForegroundAnnotations","_drawAnnotations","getAnnotations","getItemPosition","annotations","panel","index","len","index2","len2","index3","len3","shape","defaultConfig","itemPosition","position","properties","property","annotationConfig","uiHash","activate","length","items","addRect","actualPosition","isEmpty","hasOwnProperty","orientationType","panelSize","size","labelTemplate","hasLabel","templateName","label","context","transformRect","x","y","width","height","draw"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/renders/DrawShapeAnnotationTask.js"],"sourcesContent":["import Rect from '../../graphics/structs/Rect';\r\nimport RenderEventArgs from '../../events/RenderEventArgs';\r\nimport { Layers, ZOrderType } from '../../enums';\r\nimport Shape from '../../graphics/shapes/Shape';\r\nimport ShapeAnnotationConfig from '../../configs/ShapeAnnotationConfig';\r\n\r\nexport default function DrawShapeAnnotationTask(getGraphics, createTransformTask, applyLayoutChangesTask,\r\n  orientationOptionTask, shapeAnnotationOptionTask, alignDiagramTask, annotationLabelTemplateTask, zOrderType) {\r\n  var _graphics,\r\n    _transform,\r\n    _orientationOptions,\r\n    _annotationLabelTemplate;\r\n\r\n  function process() {\r\n\r\n    _graphics = getGraphics();\r\n\r\n    _transform = createTransformTask.getTransform();\r\n    _orientationOptions = orientationOptionTask.getOptions();\r\n\r\n    _annotationLabelTemplate = annotationLabelTemplateTask.getTemplate();\r\n\r\n    switch (zOrderType) {\r\n      case ZOrderType.Background://ignore jslint\r\n        _graphics.reset(\"placeholder\", Layers.BackgroundAnnotations);\r\n        break;\r\n      case ZOrderType.Foreground://ignore jslint\r\n        _graphics.reset(\"placeholder\", Layers.ForegroundAnnotations);\r\n        break;\r\n    }\r\n\r\n    _drawAnnotations(shapeAnnotationOptionTask.getAnnotations(), alignDiagramTask.getItemPosition);\r\n\r\n    return false;\r\n  }\r\n\r\n  function _drawAnnotations(annotations, getItemPosition) {\r\n    var panel,\r\n      index, len,\r\n      index2, len2,\r\n      index3, len3,\r\n      shape,\r\n      defaultConfig,\r\n      itemPosition, position,\r\n      properties, property,\r\n      annotationConfig,\r\n      uiHash;\r\n\r\n\r\n    switch (zOrderType) {\r\n      case ZOrderType.Background://ignore jslint\r\n        panel = _graphics.activate(\"placeholder\", Layers.BackgroundAnnotations);\r\n        break;\r\n      case ZOrderType.Foreground://ignore jslint\r\n        panel = _graphics.activate(\"placeholder\", Layers.ForegroundAnnotations);\r\n        break;\r\n    }\r\n\r\n    for (index = 0, len = annotations.length; index < len; index += 1) {\r\n      annotationConfig = annotations[index];\r\n\r\n      if (annotationConfig.items != null && annotationConfig.items.length > 0) {\r\n        position = new Rect();\r\n        for (index2 = 0, len2 = annotationConfig.items.length; index2 < len2; index2 += 1) {\r\n          itemPosition = getItemPosition(annotationConfig.items[index2]);\r\n          if (itemPosition != null) {\r\n            position.addRect(itemPosition.actualPosition);\r\n          }\r\n        }\r\n\r\n        if (!position.isEmpty()) {\r\n          shape = new Shape(_graphics);\r\n          defaultConfig = new ShapeAnnotationConfig();\r\n          properties = [\"opacity\", \"cornerRadius\", \"shapeType\", \"offset\", \"lineWidth\", \"borderColor\", \"fillColor\", \"lineType\", \"labelSize\", \"labelOffset\", \"labelPlacement\", \"zOrderType\"];\r\n          for (index3 = 0, len3 = properties.length; index3 < len3; index3 += 1) {\r\n            property = properties[index3];\r\n            shape[property] = annotationConfig.hasOwnProperty(property) ? annotationConfig[property] : defaultConfig[property];\r\n          }\r\n\r\n          shape.position = position;\r\n          shape.orientationType = _orientationOptions.orientationType;\r\n          shape.panelSize = panel.size;\r\n          shape.labelTemplate = _annotationLabelTemplate;\r\n          shape.hasLabel = annotationConfig.templateName != null || annotationConfig.label != null;\r\n\r\n          uiHash = new RenderEventArgs();\r\n          uiHash.context = annotationConfig;\r\n          uiHash.templateName = shape.labelTemplate;\r\n\r\n          _transform.transformRect(position.x, position.y, position.width, position.height, true,\r\n            this, function (x, y, width, height) {\r\n              var position = new Rect(x, y, width, height);\r\n              shape.draw(position, uiHash);\r\n            });//ignore jslint\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    process: process\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}