{"ast":null,"code":"import Thickness from '../../graphics/structs/Thickness';\nimport { Layers, Colors, ShapeType } from '../../enums';\nimport PolylinesBuffer from '../../graphics/structs/PolylinesBuffer';\nimport DotSegment from '../../graphics/structs/DotSegment';\nimport PaletteItem from '../../graphics/structs/PaletteItem';\nimport Marker from '../../graphics/shapes/Marker';\nexport default function DrawFrameItemsTask(getGraphics, applyLayoutChangesTask, projectItemsToFrameTask, itemTemplateParamsTask, minimizedItemsOptionTask) {\n  var _graphics;\n  function process() {\n    var frameThickness = new Thickness(applyLayoutChangesTask.getFrameThickness());\n    _graphics = getGraphics();\n    _graphics.reset(\"frameplaceholder\", Layers.Marker);\n    if (!frameThickness.isEmpty()) {\n      drawFrameItems();\n    }\n    return false;\n  }\n  function drawFrameItems() {\n    var markers = new PolylinesBuffer(),\n      positions = projectItemsToFrameTask.getPositions(),\n      options = minimizedItemsOptionTask.getOptions(),\n      marker = new Marker(),\n      polyline;\n    for (var treeItemId in positions) {\n      if (positions.hasOwnProperty(treeItemId)) {\n        var actualPosition = positions[treeItemId],\n          templateParams = itemTemplateParamsTask.getTemplateParams(treeItemId),\n          templateConfig = templateParams.template.templateConfig,\n          minimizedItemsOptions = minimizedItemsOptionTask.getItemOptions(treeItemId),\n          itemTitleColor = null,\n          itemFillColor = null,\n          minimizedItemShapeType = null,\n          minimizedItemCornerRadius = 0;\n\n        /* use individual item options first */\n        if (minimizedItemsOptions != null) {\n          itemTitleColor = minimizedItemsOptions.itemTitleColor;\n          itemFillColor = minimizedItemsOptions.itemTitleColor;\n          minimizedItemShapeType = minimizedItemsOptions.minimizedItemShapeType;\n        }\n\n        /* use template config & control options next */\n        itemTitleColor = itemTitleColor || templateConfig.minimizedItemBorderColor || Colors.Navy;\n        itemFillColor = itemFillColor || templateConfig.minimizedItemFillColor || Colors.Navy;\n        if (minimizedItemShapeType == null) {\n          minimizedItemShapeType = templateConfig.minimizedItemShapeType !== null ? templateConfig.minimizedItemShapeType : options.minimizedItemShapeType;\n        }\n        minimizedItemCornerRadius = templateConfig.minimizedItemCornerRadius === null ? templateConfig.minimizedItemSize.width : templateConfig.minimizedItemCornerRadius;\n        if (minimizedItemShapeType == null || minimizedItemShapeType == ShapeType.None) {\n          polyline = markers.getPolyline(new PaletteItem({\n            'lineColor': itemTitleColor,\n            'lineWidth': templateConfig.minimizedItemLineWidth,\n            'lineType': templateConfig.minimizedItemLineType,\n            'fillColor': itemFillColor,\n            'opacity': templateConfig.minimizedItemOpacity\n          }));\n          polyline.addSegment(new DotSegment(actualPosition.x, actualPosition.y, actualPosition.width, actualPosition.height, minimizedItemCornerRadius));\n        } else {\n          marker.draw(markers, minimizedItemShapeType, actualPosition, new PaletteItem({\n            'lineColor': itemTitleColor,\n            'lineWidth': templateConfig.minimizedItemLineWidth,\n            'lineType': templateConfig.minimizedItemLineType,\n            'fillColor': itemFillColor,\n            'opacity': templateConfig.minimizedItemOpacity\n          }));\n        }\n      }\n    }\n    _graphics.activate(\"frameplaceholder\", Layers.Marker);\n    _graphics.polylinesBuffer(markers);\n  }\n  return {\n    process: process\n  };\n}\n;","map":{"version":3,"names":["Thickness","Layers","Colors","ShapeType","PolylinesBuffer","DotSegment","PaletteItem","Marker","DrawFrameItemsTask","getGraphics","applyLayoutChangesTask","projectItemsToFrameTask","itemTemplateParamsTask","minimizedItemsOptionTask","_graphics","process","frameThickness","getFrameThickness","reset","isEmpty","drawFrameItems","markers","positions","getPositions","options","getOptions","marker","polyline","treeItemId","hasOwnProperty","actualPosition","templateParams","getTemplateParams","templateConfig","template","minimizedItemsOptions","getItemOptions","itemTitleColor","itemFillColor","minimizedItemShapeType","minimizedItemCornerRadius","minimizedItemBorderColor","Navy","minimizedItemFillColor","minimizedItemSize","width","None","getPolyline","minimizedItemLineWidth","minimizedItemLineType","minimizedItemOpacity","addSegment","x","y","height","draw","activate","polylinesBuffer"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/renders/DrawFrameItemsTask.js"],"sourcesContent":["import Thickness from '../../graphics/structs/Thickness';\r\nimport { Layers, Colors, ShapeType } from '../../enums';\r\nimport PolylinesBuffer from '../../graphics/structs/PolylinesBuffer';\r\nimport DotSegment from '../../graphics/structs/DotSegment';\r\nimport PaletteItem from '../../graphics/structs/PaletteItem';\r\nimport Marker from '../../graphics/shapes/Marker';\r\n\r\nexport default function DrawFrameItemsTask(getGraphics, applyLayoutChangesTask, projectItemsToFrameTask, itemTemplateParamsTask, minimizedItemsOptionTask) {\r\n\r\n  var _graphics;\r\n\r\n  function process() {\r\n    var frameThickness = new Thickness(applyLayoutChangesTask.getFrameThickness());\r\n\r\n    _graphics = getGraphics();\r\n    _graphics.reset(\"frameplaceholder\", Layers.Marker);\r\n\r\n    if(!frameThickness.isEmpty()) {\r\n      drawFrameItems();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function drawFrameItems() {\r\n    var markers = new PolylinesBuffer(),\r\n      positions = projectItemsToFrameTask.getPositions(),\r\n      options = minimizedItemsOptionTask.getOptions(),\r\n      marker = new Marker(),\r\n      polyline;\r\n\r\n    for (var treeItemId in positions) {\r\n      if(positions.hasOwnProperty(treeItemId)) {\r\n        var actualPosition = positions[treeItemId],\r\n          templateParams = itemTemplateParamsTask.getTemplateParams(treeItemId),\r\n          templateConfig = templateParams.template.templateConfig,\r\n          minimizedItemsOptions = minimizedItemsOptionTask.getItemOptions(treeItemId),\r\n          itemTitleColor = null,\r\n          itemFillColor = null,\r\n          minimizedItemShapeType = null,\r\n          minimizedItemCornerRadius = 0;\r\n\r\n        /* use individual item options first */\r\n        if (minimizedItemsOptions != null) {\r\n          itemTitleColor = minimizedItemsOptions.itemTitleColor;\r\n          itemFillColor = minimizedItemsOptions.itemTitleColor;\r\n          minimizedItemShapeType = minimizedItemsOptions.minimizedItemShapeType;\r\n        }\r\n\r\n        /* use template config & control options next */\r\n        itemTitleColor = itemTitleColor || templateConfig.minimizedItemBorderColor || Colors.Navy;\r\n        itemFillColor = itemFillColor || templateConfig.minimizedItemFillColor || Colors.Navy;\r\n        if (minimizedItemShapeType == null) {\r\n          minimizedItemShapeType = (templateConfig.minimizedItemShapeType !== null ? templateConfig.minimizedItemShapeType : options.minimizedItemShapeType);\r\n        }\r\n        minimizedItemCornerRadius = templateConfig.minimizedItemCornerRadius === null ? templateConfig.minimizedItemSize.width : templateConfig.minimizedItemCornerRadius;\r\n\r\n        if (minimizedItemShapeType == null || minimizedItemShapeType == ShapeType.None) {\r\n          polyline = markers.getPolyline(new PaletteItem({\r\n            'lineColor': itemTitleColor,\r\n            'lineWidth': templateConfig.minimizedItemLineWidth,\r\n            'lineType': templateConfig.minimizedItemLineType,\r\n            'fillColor': itemFillColor,\r\n            'opacity': templateConfig.minimizedItemOpacity\r\n          }));\r\n          polyline.addSegment(new DotSegment(actualPosition.x, actualPosition.y, actualPosition.width, actualPosition.height, minimizedItemCornerRadius));\r\n        } else {\r\n          marker.draw(markers, minimizedItemShapeType, actualPosition,\r\n            new PaletteItem({\r\n              'lineColor': itemTitleColor,\r\n              'lineWidth': templateConfig.minimizedItemLineWidth,\r\n              'lineType': templateConfig.minimizedItemLineType,\r\n              'fillColor': itemFillColor,\r\n              'opacity': templateConfig.minimizedItemOpacity\r\n            })\r\n          );\r\n        }\r\n      }\r\n    }\r\n    _graphics.activate(\"frameplaceholder\", Layers.Marker);\r\n    _graphics.polylinesBuffer(markers);\r\n  }\r\n\r\n  return {\r\n    process: process\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}