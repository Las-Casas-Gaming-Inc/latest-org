{"ast":null,"code":"import FamilyLayout from './layouts/FamilyLayout';\nimport ItemLayout from './layouts/ItemLayout';\nimport Tree from '../../algorithms/Tree';\nimport { Visibility } from '../../enums';\nexport default function FamCreateLayoutsTreeTask(orderFamilyNodesTask, extractNestedLayoutsTask) {\n  var _data = {\n    layoutsTree: {},\n    maximumId: null\n  };\n  function process() {\n    var logicalFamily = orderFamilyNodesTask.getLogicalFamily();\n    var treeLevels = orderFamilyNodesTask.getTreeLevels();\n    var maximumId = orderFamilyNodesTask.getMaximumId();\n    var getConnectorsStacksSizes = orderFamilyNodesTask.getConnectorsStacksSizes;\n    var layouts = extractNestedLayoutsTask.getLayouts();\n    var rootLayout = new FamilyLayout(logicalFamily, treeLevels, getConnectorsStacksSizes);\n    var layoutsTree = Tree();\n    maximumId++;\n    layoutsTree.add(null, maximumId, rootLayout);\n    var levelLayouts = [{\n      id: maximumId,\n      levelLayout: rootLayout\n    }];\n    while (levelLayouts.length > 0) {\n      var nextLevelLayouts = [];\n      for (var index = 0; index < levelLayouts.length; index += 1) {\n        var {\n          id,\n          levelLayout\n        } = levelLayouts[index];\n        levelLayout.loop(this, function (treeItem) {\n          var treeItemId = treeItem.id;\n          var itemLayout = layouts[treeItemId];\n          if (!itemLayout) {\n            itemLayout = new ItemLayout(treeItem.isVisible ? Visibility.Auto : Visibility.Invisible);\n          } else {\n            nextLevelLayouts.push({\n              id: treeItemId,\n              levelLayout: itemLayout\n            });\n          }\n          layoutsTree.add(id, treeItemId, itemLayout);\n        });\n      }\n      levelLayouts = nextLevelLayouts;\n    }\n    _data.layoutsTree = layoutsTree;\n    _data.maximumId = maximumId;\n    return true;\n  }\n  function getLayoutsTree() {\n    return _data.layoutsTree;\n  }\n  function getMaximumId() {\n    return _data.maximumId;\n  }\n  return {\n    process: process,\n    getLayoutsTree: getLayoutsTree,\n    getMaximumId: getMaximumId\n  };\n}\n;","map":{"version":3,"names":["FamilyLayout","ItemLayout","Tree","Visibility","FamCreateLayoutsTreeTask","orderFamilyNodesTask","extractNestedLayoutsTask","_data","layoutsTree","maximumId","process","logicalFamily","getLogicalFamily","treeLevels","getTreeLevels","getMaximumId","getConnectorsStacksSizes","layouts","getLayouts","rootLayout","add","levelLayouts","id","levelLayout","length","nextLevelLayouts","index","loop","treeItem","treeItemId","itemLayout","isVisible","Auto","Invisible","push","getLayoutsTree"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/transformations/FamCreateLayoutsTreeTask.js"],"sourcesContent":["import FamilyLayout from './layouts/FamilyLayout';\r\nimport ItemLayout from './layouts/ItemLayout';\r\nimport Tree from '../../algorithms/Tree';\r\nimport { Visibility } from '../../enums';\r\n\r\nexport default function FamCreateLayoutsTreeTask(orderFamilyNodesTask, extractNestedLayoutsTask ) {\r\n\r\n  var _data = {\r\n    layoutsTree: {},\r\n    maximumId: null\r\n  };\r\n\r\n  function process() {\r\n    var logicalFamily = orderFamilyNodesTask.getLogicalFamily();\r\n    var treeLevels = orderFamilyNodesTask.getTreeLevels();\r\n    var maximumId = orderFamilyNodesTask.getMaximumId();\r\n    var getConnectorsStacksSizes = orderFamilyNodesTask.getConnectorsStacksSizes;\r\n\r\n    var layouts = extractNestedLayoutsTask.getLayouts();\r\n    var rootLayout = new FamilyLayout(logicalFamily, treeLevels, getConnectorsStacksSizes);\r\n    var layoutsTree = Tree();\r\n    maximumId++;\r\n    layoutsTree.add(null, maximumId, rootLayout);\r\n\r\n    var levelLayouts = [{ id: maximumId, levelLayout: rootLayout }];\r\n    while(levelLayouts.length > 0) {\r\n      var nextLevelLayouts = [];\r\n      for(var index = 0; index < levelLayouts.length; index+=1) {\r\n        var { id, levelLayout } = levelLayouts[index];\r\n        levelLayout.loop(this, function(treeItem) {\r\n          var treeItemId = treeItem.id;\r\n          var itemLayout = layouts[treeItemId];\r\n          if(!itemLayout) {\r\n            itemLayout = new ItemLayout(treeItem.isVisible ? Visibility.Auto : Visibility.Invisible);\r\n          } else {\r\n            nextLevelLayouts.push({id: treeItemId, levelLayout: itemLayout});\r\n          }\r\n          layoutsTree.add(id, treeItemId, itemLayout);\r\n        })\r\n      }\r\n      levelLayouts = nextLevelLayouts;\r\n    }\r\n\r\n    _data.layoutsTree = layoutsTree;\r\n    _data.maximumId = maximumId;\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  function getLayoutsTree() {\r\n    return _data.layoutsTree;\r\n  }\r\n\r\n  function getMaximumId() {\r\n    return _data.maximumId;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getLayoutsTree: getLayoutsTree,\r\n    getMaximumId: getMaximumId\r\n  };\r\n};"],"mappings":"AAAA,OAAOA,YAAY,MAAM,wBAAwB;AACjD,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,OAAOC,IAAI,MAAM,uBAAuB;AACxC,SAASC,UAAU,QAAQ,aAAa;AAExC,eAAe,SAASC,wBAAwBA,CAACC,oBAAoB,EAAEC,wBAAwB,EAAG;EAEhG,IAAIC,KAAK,GAAG;IACVC,WAAW,EAAE,CAAC,CAAC;IACfC,SAAS,EAAE;EACb,CAAC;EAED,SAASC,OAAOA,CAAA,EAAG;IACjB,IAAIC,aAAa,GAAGN,oBAAoB,CAACO,gBAAgB,CAAC,CAAC;IAC3D,IAAIC,UAAU,GAAGR,oBAAoB,CAACS,aAAa,CAAC,CAAC;IACrD,IAAIL,SAAS,GAAGJ,oBAAoB,CAACU,YAAY,CAAC,CAAC;IACnD,IAAIC,wBAAwB,GAAGX,oBAAoB,CAACW,wBAAwB;IAE5E,IAAIC,OAAO,GAAGX,wBAAwB,CAACY,UAAU,CAAC,CAAC;IACnD,IAAIC,UAAU,GAAG,IAAInB,YAAY,CAACW,aAAa,EAAEE,UAAU,EAAEG,wBAAwB,CAAC;IACtF,IAAIR,WAAW,GAAGN,IAAI,CAAC,CAAC;IACxBO,SAAS,EAAE;IACXD,WAAW,CAACY,GAAG,CAAC,IAAI,EAAEX,SAAS,EAAEU,UAAU,CAAC;IAE5C,IAAIE,YAAY,GAAG,CAAC;MAAEC,EAAE,EAAEb,SAAS;MAAEc,WAAW,EAAEJ;IAAW,CAAC,CAAC;IAC/D,OAAME,YAAY,CAACG,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAIC,gBAAgB,GAAG,EAAE;MACzB,KAAI,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGL,YAAY,CAACG,MAAM,EAAEE,KAAK,IAAE,CAAC,EAAE;QACxD,IAAI;UAAEJ,EAAE;UAAEC;QAAY,CAAC,GAAGF,YAAY,CAACK,KAAK,CAAC;QAC7CH,WAAW,CAACI,IAAI,CAAC,IAAI,EAAE,UAASC,QAAQ,EAAE;UACxC,IAAIC,UAAU,GAAGD,QAAQ,CAACN,EAAE;UAC5B,IAAIQ,UAAU,GAAGb,OAAO,CAACY,UAAU,CAAC;UACpC,IAAG,CAACC,UAAU,EAAE;YACdA,UAAU,GAAG,IAAI7B,UAAU,CAAC2B,QAAQ,CAACG,SAAS,GAAG5B,UAAU,CAAC6B,IAAI,GAAG7B,UAAU,CAAC8B,SAAS,CAAC;UAC1F,CAAC,MAAM;YACLR,gBAAgB,CAACS,IAAI,CAAC;cAACZ,EAAE,EAAEO,UAAU;cAAEN,WAAW,EAAEO;YAAU,CAAC,CAAC;UAClE;UACAtB,WAAW,CAACY,GAAG,CAACE,EAAE,EAAEO,UAAU,EAAEC,UAAU,CAAC;QAC7C,CAAC,CAAC;MACJ;MACAT,YAAY,GAAGI,gBAAgB;IACjC;IAEAlB,KAAK,CAACC,WAAW,GAAGA,WAAW;IAC/BD,KAAK,CAACE,SAAS,GAAGA,SAAS;IAE3B,OAAO,IAAI;EACb;EAGA,SAAS0B,cAAcA,CAAA,EAAG;IACxB,OAAO5B,KAAK,CAACC,WAAW;EAC1B;EAEA,SAASO,YAAYA,CAAA,EAAG;IACtB,OAAOR,KAAK,CAACE,SAAS;EACxB;EAEA,OAAO;IACLC,OAAO,EAAEA,OAAO;IAChByB,cAAc,EAAEA,cAAc;IAC9BpB,YAAY,EAAEA;EAChB,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}