{"ast":null,"code":"import ArrayReader from '../../readers/ArrayReader';\nimport ValueReader from '../../readers/ValueReader';\nexport default function ActiveItemsTask(itemsSizesOptionTask, readTemplatesTask) {\n  var _data = {\n      items: []\n    },\n    _hash = {};\n  var _dataTemplate = new ArrayReader(new ValueReader([\"string\", \"number\"], true), true);\n  function process() {\n    var context = {\n        isChanged: false,\n        hash: _hash\n      },\n      itemsSizesOptions = itemsSizesOptionTask.getOptions(),\n      items = itemsSizesOptions.items;\n    _data.items = _dataTemplate.read(_data.items, collectActiveItems(itemsSizesOptions, items), \"items\", context);\n    return context.isChanged;\n  }\n  function collectActiveItems(itemsSizesOptions, items) {\n    var result = [],\n      index,\n      len;\n    for (index = 0, len = items.length; index < len; index += 1) {\n      var itemConfig = items[index],\n        template = readTemplatesTask.getTemplate(itemConfig.templateName, itemsSizesOptions.defaultTemplateName, readTemplatesTask.DefaultWidgetTemplateName),\n        templateConfig = template.templateConfig,\n        isActive = itemConfig.isActive && templateConfig.isActive;\n      if (isActive) {\n        result.push(itemConfig.id);\n      }\n    }\n    return result;\n  }\n  function getActiveItems() {\n    return _hash.items;\n  }\n  return {\n    process: process,\n    getActiveItems: getActiveItems\n  };\n}\n;","map":{"version":3,"names":["ArrayReader","ValueReader","ActiveItemsTask","itemsSizesOptionTask","readTemplatesTask","_data","items","_hash","_dataTemplate","process","context","isChanged","hash","itemsSizesOptions","getOptions","read","collectActiveItems","result","index","len","length","itemConfig","template","getTemplate","templateName","defaultTemplateName","DefaultWidgetTemplateName","templateConfig","isActive","push","id","getActiveItems"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/templates/ActiveItemsTask.js"],"sourcesContent":["import ArrayReader from '../../readers/ArrayReader';\r\nimport ValueReader from '../../readers/ValueReader';\r\n\r\nexport default function ActiveItemsTask(itemsSizesOptionTask, readTemplatesTask) {\r\n  var _data = {\r\n    items: []\r\n  },\r\n    _hash = {};\r\n\r\n  var _dataTemplate = new ArrayReader(\r\n    new ValueReader([\"string\", \"number\"], true),\r\n    true\r\n  );\r\n\r\n  function process() {\r\n    var context = {\r\n      isChanged: false,\r\n      hash: _hash\r\n    },\r\n      itemsSizesOptions = itemsSizesOptionTask.getOptions(),\r\n      items = itemsSizesOptions.items;\r\n\r\n    _data.items = _dataTemplate.read(_data.items, collectActiveItems(itemsSizesOptions, items), \"items\", context);\r\n\r\n    return context.isChanged;\r\n  }\r\n\r\n  function collectActiveItems(itemsSizesOptions, items) {\r\n    var result = [],\r\n      index, len;\r\n    for (index = 0, len = items.length; index < len; index += 1) {\r\n      var itemConfig = items[index],\r\n        template = readTemplatesTask.getTemplate(itemConfig.templateName, itemsSizesOptions.defaultTemplateName, readTemplatesTask.DefaultWidgetTemplateName),\r\n        templateConfig = template.templateConfig,\r\n        isActive = itemConfig.isActive && templateConfig.isActive;\r\n\r\n      if (isActive) {\r\n        result.push(itemConfig.id);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function getActiveItems() {\r\n    return _hash.items;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getActiveItems: getActiveItems\r\n  };\r\n};"],"mappings":"AAAA,OAAOA,WAAW,MAAM,2BAA2B;AACnD,OAAOC,WAAW,MAAM,2BAA2B;AAEnD,eAAe,SAASC,eAAeA,CAACC,oBAAoB,EAAEC,iBAAiB,EAAE;EAC/E,IAAIC,KAAK,GAAG;MACVC,KAAK,EAAE;IACT,CAAC;IACCC,KAAK,GAAG,CAAC,CAAC;EAEZ,IAAIC,aAAa,GAAG,IAAIR,WAAW,CACjC,IAAIC,WAAW,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC,EAC3C,IACF,CAAC;EAED,SAASQ,OAAOA,CAAA,EAAG;IACjB,IAAIC,OAAO,GAAG;QACZC,SAAS,EAAE,KAAK;QAChBC,IAAI,EAAEL;MACR,CAAC;MACCM,iBAAiB,GAAGV,oBAAoB,CAACW,UAAU,CAAC,CAAC;MACrDR,KAAK,GAAGO,iBAAiB,CAACP,KAAK;IAEjCD,KAAK,CAACC,KAAK,GAAGE,aAAa,CAACO,IAAI,CAACV,KAAK,CAACC,KAAK,EAAEU,kBAAkB,CAACH,iBAAiB,EAAEP,KAAK,CAAC,EAAE,OAAO,EAAEI,OAAO,CAAC;IAE7G,OAAOA,OAAO,CAACC,SAAS;EAC1B;EAEA,SAASK,kBAAkBA,CAACH,iBAAiB,EAAEP,KAAK,EAAE;IACpD,IAAIW,MAAM,GAAG,EAAE;MACbC,KAAK;MAAEC,GAAG;IACZ,KAAKD,KAAK,GAAG,CAAC,EAAEC,GAAG,GAAGb,KAAK,CAACc,MAAM,EAAEF,KAAK,GAAGC,GAAG,EAAED,KAAK,IAAI,CAAC,EAAE;MAC3D,IAAIG,UAAU,GAAGf,KAAK,CAACY,KAAK,CAAC;QAC3BI,QAAQ,GAAGlB,iBAAiB,CAACmB,WAAW,CAACF,UAAU,CAACG,YAAY,EAAEX,iBAAiB,CAACY,mBAAmB,EAAErB,iBAAiB,CAACsB,yBAAyB,CAAC;QACrJC,cAAc,GAAGL,QAAQ,CAACK,cAAc;QACxCC,QAAQ,GAAGP,UAAU,CAACO,QAAQ,IAAID,cAAc,CAACC,QAAQ;MAE3D,IAAIA,QAAQ,EAAE;QACZX,MAAM,CAACY,IAAI,CAACR,UAAU,CAACS,EAAE,CAAC;MAC5B;IACF;IACA,OAAOb,MAAM;EACf;EAEA,SAASc,cAAcA,CAAA,EAAG;IACxB,OAAOxB,KAAK,CAACD,KAAK;EACpB;EAEA,OAAO;IACLG,OAAO,EAAEA,OAAO;IAChBsB,cAAc,EAAEA;EAClB,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}