{"ast":null,"code":"import Point from '../../graphics/structs/Point';\nimport Rect from '../../graphics/structs/Rect';\nimport Size from '../../graphics/structs/Size';\nimport Thickness from '../../graphics/structs/Thickness';\nimport RenderEventArgs from '../../events/RenderEventArgs';\nimport { Layers, Visibility, Enabled, PlacementType, OrientationType } from '../../enums';\nimport Callout from '../../graphics/shapes/Callout';\nimport { isNullOrEmpty } from '../../common';\nexport default function DrawHighlightAnnotationTask(getGraphics, createTransformTask, applyLayoutChangesTask, scaleOptionTask, combinedContextsTask, calloutOptionTask, readTemplatesTask, alignDiagramTask, centerOnCursorTask, highlightItemTask, cursorItemTask, selectedItemsTask, frameSizeTask) {\n  var _graphics,\n    _transform,\n    _calloutShape = new Callout(getGraphics()),\n    _options;\n  function process() {\n    var treeItemId = highlightItemTask.getHighlightTreeItem();\n    _graphics = getGraphics();\n    _graphics.reset(\"calloutplaceholder\", Layers.Annotation);\n    if (treeItemId !== null) {\n      _transform = createTransformTask.getTransform();\n      _options = calloutOptionTask.getOptions();\n      drawHighlightAnnotation(treeItemId);\n    }\n    return false;\n  }\n  function drawHighlightAnnotation(treeItemId) {\n    var panel,\n      itemConfig,\n      calloutPanelPosition,\n      position,\n      uiHash,\n      calloutTemplateName,\n      calloutTemplate,\n      showCallout = true,\n      treeItemPosition = alignDiagramTask.getItemPosition(treeItemId),\n      actualPosition = treeItemPosition.actualPosition;\n    switch (treeItemPosition.actualVisibility) {\n      case Visibility.Dot:\n      case Visibility.Line:\n      case Visibility.Normal:\n        itemConfig = calloutOptionTask.getItemOptions(treeItemId);\n        switch (itemConfig.showCallout) {\n          case Enabled.False:\n            showCallout = false;\n            break;\n          case Enabled.True:\n            showCallout = false;\n            break;\n          default:\n            showCallout = _options.showCallout;\n            break;\n        }\n        if (showCallout) {\n          panel = _graphics.activate(\"placeholder\", Layers.Item);\n          _transform.transformRect(actualPosition.x, actualPosition.y, actualPosition.width, actualPosition.height, true, this, function (x, y, width, height) {\n            var snapRect = new Rect(x, y, width, height),\n              snapPoint = new Point(snapRect.centerPoint()),\n              {\n                medianRect,\n                viewPortRect\n              } = getFrameMedianPosition(),\n              projectionPoint = medianRect.getProjectionPoint(snapRect.centerPoint());\n            if (projectionPoint == null) {\n              /* snapPoint is inside viewport, no need to project */\n              projectionPoint = snapPoint;\n            }\n            if (treeItemPosition.actualVisibility >= _options.calloutMaximumVisibility && treeItemPosition.actualVisibility != Visibility.Invisible || !medianRect.overlaps(snapRect)) {\n              calloutTemplateName = !isNullOrEmpty(itemConfig.calloutTemplateName) ? itemConfig.calloutTemplateName : !isNullOrEmpty(itemConfig.templateName) ? itemConfig.templateName : !isNullOrEmpty(_options.defaultCalloutTemplateName) ? _options.defaultCalloutTemplateName : _options.defaultTemplateName;\n              calloutTemplate = readTemplatesTask.getTemplate(calloutTemplateName, readTemplatesTask.DefaultWidgetTemplateName);\n              position = getAnnotationPosition(projectionPoint, viewPortRect, calloutTemplate.templateConfig.itemSize);\n\n              /* position callout div placeholder */\n              calloutPanelPosition = new Rect(position);\n              calloutPanelPosition.addRect(projectionPoint.x, projectionPoint.y);\n              calloutPanelPosition.offset(50);\n\n              /* recalculate geometries */\n              projectionPoint.x -= calloutPanelPosition.x;\n              projectionPoint.y -= calloutPanelPosition.y;\n              position.x -= calloutPanelPosition.x;\n              position.y -= calloutPanelPosition.y;\n              uiHash = new RenderEventArgs();\n              uiHash.context = combinedContextsTask.getConfig(treeItemId);\n              uiHash.isCursor = cursorItemTask.getCursorTreeItem() == treeItemId;\n              uiHash.isSelected = selectedItemsTask.isSelected(treeItemId);\n              uiHash.templateName = calloutTemplate.templateConfig.name;\n              _graphics.show(\"calloutplaceholder\");\n              panel = _graphics.activate(\"calloutplaceholder\", Layers.Annotation);\n              _graphics.position(\"calloutplaceholder\", calloutPanelPosition.x, calloutPanelPosition.y, calloutPanelPosition.width, calloutPanelPosition.height);\n              _graphics.template(position.x, position.y, position.width, position.height, 0, 0, position.width, position.height, calloutTemplate.itemTemplate.template(), calloutTemplate.itemTemplate.getHashCode(), calloutTemplate.itemTemplate.render, uiHash, null);\n              _calloutShape.pointerPlacement = PlacementType.Auto;\n              _calloutShape.cornerRadius = _options.calloutCornerRadius;\n              _calloutShape.offset = _options.calloutOffset;\n              _calloutShape.opacity = _options.calloutOpacity;\n              _calloutShape.lineWidth = _options.calloutLineWidth;\n              _calloutShape.pointerWidth = _options.calloutPointerWidth;\n              _calloutShape.borderColor = _options.calloutBorderColor;\n              _calloutShape.fillColor = _options.calloutfillColor;\n              _calloutShape.draw(projectionPoint, position);\n            } else {\n              _graphics.hide(\"calloutplaceholder\");\n            }\n          });\n        } else {\n          _graphics.hide(\"calloutplaceholder\");\n        }\n        break;\n      case Visibility.Invisible:\n        _graphics.hide(\"calloutplaceholder\");\n        break;\n    }\n  }\n  function getFrameMedianPosition() {\n    var scaleOptions = scaleOptionTask.getOptions(),\n      scale = scaleOptions.scale,\n      placeholderOffset = new Point(centerOnCursorTask.getPlaceholderOffset()),\n      scrollPanelSize = new Size(applyLayoutChangesTask.getScrollPanelSize()),\n      frameBaseOffset = new Thickness(applyLayoutChangesTask.getFrameOffset()),\n      medianThickness = new Thickness(frameSizeTask.getMedian());\n    placeholderOffset.scale(1.0 / scale);\n    frameBaseOffset.scale(1.0 / scale);\n    scrollPanelSize.scale(1.0 / scale);\n    medianThickness.scale(1.0 / scale);\n    var viewPortRect = new Rect(placeholderOffset.x, placeholderOffset.y, scrollPanelSize.width, scrollPanelSize.height);\n    var medianRect = new Rect(viewPortRect);\n    medianRect.offset(frameBaseOffset);\n    medianRect.offset(medianThickness);\n    return {\n      medianRect: medianRect,\n      viewPortRect: viewPortRect\n    };\n  }\n  function getAnnotationPosition(snapPoint, panelRect, itemSize) {\n    var result = new Rect(snapPoint.x, snapPoint.y, itemSize.width, itemSize.height);\n    switch (_options.orientationType) {\n      case OrientationType.Top:\n      case OrientationType.Bottom:\n        result.y -= itemSize.height / 4.0;\n        if (snapPoint.x < panelRect.horizontalCenter()) {\n          result.x += _options.calloutPlacementOffset;\n        } else {\n          result.x -= _options.calloutPlacementOffset + itemSize.width;\n        }\n        break;\n      default:\n        result.x -= itemSize.width / 4.0;\n        if (snapPoint.y < panelRect.verticalCenter()) {\n          result.y += _options.calloutPlacementOffset;\n        } else {\n          result.y -= _options.calloutPlacementOffset + itemSize.height;\n        }\n        break;\n    }\n\n    // If annotation clipped then move it back into view port\n    if (result.x < panelRect.x) {\n      result.x = panelRect.x + _options.calloutPlacementOffset;\n    } else if (result.right() > panelRect.right()) {\n      result.x -= result.right() - panelRect.right() + _options.calloutPlacementOffset;\n    }\n    if (result.y < panelRect.y) {\n      result.y = panelRect.y + _options.calloutPlacementOffset;\n    } else if (result.bottom() > panelRect.bottom()) {\n      result.y -= result.bottom() - panelRect.bottom() + _options.calloutPlacementOffset;\n    }\n    return result;\n  }\n  return {\n    process: process\n  };\n}\n;","map":{"version":3,"names":["Point","Rect","Size","Thickness","RenderEventArgs","Layers","Visibility","Enabled","PlacementType","OrientationType","Callout","isNullOrEmpty","DrawHighlightAnnotationTask","getGraphics","createTransformTask","applyLayoutChangesTask","scaleOptionTask","combinedContextsTask","calloutOptionTask","readTemplatesTask","alignDiagramTask","centerOnCursorTask","highlightItemTask","cursorItemTask","selectedItemsTask","frameSizeTask","_graphics","_transform","_calloutShape","_options","process","treeItemId","getHighlightTreeItem","reset","Annotation","getTransform","getOptions","drawHighlightAnnotation","panel","itemConfig","calloutPanelPosition","position","uiHash","calloutTemplateName","calloutTemplate","showCallout","treeItemPosition","getItemPosition","actualPosition","actualVisibility","Dot","Line","Normal","getItemOptions","False","True","activate","Item","transformRect","x","y","width","height","snapRect","snapPoint","centerPoint","medianRect","viewPortRect","getFrameMedianPosition","projectionPoint","getProjectionPoint","calloutMaximumVisibility","Invisible","overlaps","templateName","defaultCalloutTemplateName","defaultTemplateName","getTemplate","DefaultWidgetTemplateName","getAnnotationPosition","templateConfig","itemSize","addRect","offset","context","getConfig","isCursor","getCursorTreeItem","isSelected","name","show","template","itemTemplate","getHashCode","render","pointerPlacement","Auto","cornerRadius","calloutCornerRadius","calloutOffset","opacity","calloutOpacity","lineWidth","calloutLineWidth","pointerWidth","calloutPointerWidth","borderColor","calloutBorderColor","fillColor","calloutfillColor","draw","hide","scaleOptions","scale","placeholderOffset","getPlaceholderOffset","scrollPanelSize","getScrollPanelSize","frameBaseOffset","getFrameOffset","medianThickness","getMedian","panelRect","result","orientationType","Top","Bottom","horizontalCenter","calloutPlacementOffset","verticalCenter","right","bottom"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/renders/DrawHighlightAnnotationTask.js"],"sourcesContent":["import Point from '../../graphics/structs/Point';\r\nimport Rect from '../../graphics/structs/Rect';\r\nimport Size from '../../graphics/structs/Size';\r\nimport Thickness from '../../graphics/structs/Thickness';\r\nimport RenderEventArgs from '../../events/RenderEventArgs';\r\nimport { Layers, Visibility, Enabled, PlacementType, OrientationType } from '../../enums';\r\nimport Callout from '../../graphics/shapes/Callout';\r\nimport { isNullOrEmpty } from '../../common';\r\n\r\nexport default function DrawHighlightAnnotationTask(getGraphics, createTransformTask, applyLayoutChangesTask, scaleOptionTask,\r\n  combinedContextsTask,\r\n  calloutOptionTask,\r\n  readTemplatesTask,\r\n  alignDiagramTask, centerOnCursorTask,\r\n  highlightItemTask, cursorItemTask, selectedItemsTask, frameSizeTask) {\r\n  var _graphics,\r\n    _transform,\r\n    _calloutShape = new Callout(getGraphics()),\r\n    _options;\r\n\r\n  function process() {\r\n    var treeItemId = highlightItemTask.getHighlightTreeItem();\r\n\r\n    _graphics = getGraphics();\r\n    _graphics.reset(\"calloutplaceholder\", Layers.Annotation);\r\n\r\n    if (treeItemId !== null) {\r\n      _transform = createTransformTask.getTransform();\r\n      _options = calloutOptionTask.getOptions();\r\n\r\n      drawHighlightAnnotation(treeItemId);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function drawHighlightAnnotation(treeItemId) {\r\n    var panel,\r\n      itemConfig,\r\n      calloutPanelPosition,\r\n      position,\r\n      uiHash,\r\n      calloutTemplateName,\r\n      calloutTemplate,\r\n      showCallout = true,\r\n      treeItemPosition = alignDiagramTask.getItemPosition(treeItemId),\r\n      actualPosition = treeItemPosition.actualPosition;\r\n\r\n\r\n    switch (treeItemPosition.actualVisibility) {\r\n      case Visibility.Dot:\r\n      case Visibility.Line:\r\n      case Visibility.Normal:\r\n        itemConfig = calloutOptionTask.getItemOptions(treeItemId);\r\n\r\n        switch (itemConfig.showCallout) {\r\n          case Enabled.False:\r\n            showCallout = false;\r\n            break;\r\n          case Enabled.True:\r\n            showCallout = false;\r\n            break;\r\n          default:\r\n            showCallout = _options.showCallout;\r\n            break;\r\n        }\r\n\r\n        if (showCallout) {\r\n          panel = _graphics.activate(\"placeholder\", Layers.Item);\r\n\r\n          _transform.transformRect(actualPosition.x, actualPosition.y, actualPosition.width, actualPosition.height, true,\r\n            this, function (x, y, width, height) {\r\n              var snapRect = new Rect(x, y, width, height),\r\n                snapPoint = new Point(snapRect.centerPoint()),\r\n                { medianRect, viewPortRect } = getFrameMedianPosition(),\r\n                projectionPoint = medianRect.getProjectionPoint(snapRect.centerPoint());\r\n\r\n              if(projectionPoint == null) {\r\n                /* snapPoint is inside viewport, no need to project */\r\n                projectionPoint = snapPoint;\r\n              }\r\n              if ((treeItemPosition.actualVisibility >= _options.calloutMaximumVisibility && treeItemPosition.actualVisibility != Visibility.Invisible) || !medianRect.overlaps(snapRect)) {\r\n\r\n                calloutTemplateName = !isNullOrEmpty(itemConfig.calloutTemplateName) ? itemConfig.calloutTemplateName :\r\n                  !isNullOrEmpty(itemConfig.templateName) ? itemConfig.templateName :\r\n                    !isNullOrEmpty(_options.defaultCalloutTemplateName) ? _options.defaultCalloutTemplateName :\r\n                      _options.defaultTemplateName;\r\n\r\n                calloutTemplate = readTemplatesTask.getTemplate(calloutTemplateName, readTemplatesTask.DefaultWidgetTemplateName);\r\n\r\n                position = getAnnotationPosition(projectionPoint, viewPortRect, calloutTemplate.templateConfig.itemSize);\r\n\r\n                /* position callout div placeholder */\r\n                calloutPanelPosition = new Rect(position);\r\n                calloutPanelPosition.addRect(projectionPoint.x, projectionPoint.y);\r\n                calloutPanelPosition.offset(50);\r\n\r\n                /* recalculate geometries */\r\n                projectionPoint.x -= calloutPanelPosition.x;\r\n                projectionPoint.y -= calloutPanelPosition.y;\r\n                position.x -= calloutPanelPosition.x;\r\n                position.y -= calloutPanelPosition.y;\r\n\r\n                uiHash = new RenderEventArgs();\r\n                uiHash.context = combinedContextsTask.getConfig(treeItemId);\r\n                uiHash.isCursor = (cursorItemTask.getCursorTreeItem() == treeItemId);\r\n                uiHash.isSelected = selectedItemsTask.isSelected(treeItemId);\r\n                uiHash.templateName = calloutTemplate.templateConfig.name;\r\n                _graphics.show(\"calloutplaceholder\");\r\n                panel = _graphics.activate(\"calloutplaceholder\", Layers.Annotation);\r\n                _graphics.position(\"calloutplaceholder\", calloutPanelPosition.x, calloutPanelPosition.y, calloutPanelPosition.width, calloutPanelPosition.height);\r\n                _graphics.template(\r\n                  position.x\r\n                  , position.y\r\n                  , position.width\r\n                  , position.height\r\n                  , 0\r\n                  , 0\r\n                  , position.width\r\n                  , position.height\r\n                  , calloutTemplate.itemTemplate.template()\r\n                  , calloutTemplate.itemTemplate.getHashCode()\r\n                  , calloutTemplate.itemTemplate.render\r\n                  , uiHash\r\n                  , null\r\n                );\r\n\r\n                _calloutShape.pointerPlacement = PlacementType.Auto;\r\n                _calloutShape.cornerRadius = _options.calloutCornerRadius;\r\n                _calloutShape.offset = _options.calloutOffset;\r\n                _calloutShape.opacity = _options.calloutOpacity;\r\n                _calloutShape.lineWidth = _options.calloutLineWidth;\r\n                _calloutShape.pointerWidth = _options.calloutPointerWidth;\r\n                _calloutShape.borderColor = _options.calloutBorderColor;\r\n                _calloutShape.fillColor = _options.calloutfillColor;\r\n                _calloutShape.draw(projectionPoint, position);\r\n              } else {\r\n                _graphics.hide(\"calloutplaceholder\");\r\n              }\r\n            }\r\n          );\r\n        } else {\r\n          _graphics.hide(\"calloutplaceholder\");\r\n        }\r\n        break;\r\n      case Visibility.Invisible:\r\n        _graphics.hide(\"calloutplaceholder\");\r\n        break;\r\n    }\r\n  }\r\n\r\n  function getFrameMedianPosition() {\r\n    var scaleOptions = scaleOptionTask.getOptions(),\r\n      scale = scaleOptions.scale,\r\n      placeholderOffset = new Point(centerOnCursorTask.getPlaceholderOffset()),\r\n      scrollPanelSize = new Size(applyLayoutChangesTask.getScrollPanelSize()),\r\n      frameBaseOffset = new Thickness(applyLayoutChangesTask.getFrameOffset()),\r\n      medianThickness = new Thickness(frameSizeTask.getMedian());\r\n\r\n    \r\n    placeholderOffset.scale(1.0 / scale);\r\n    frameBaseOffset.scale(1.0 / scale);\r\n    scrollPanelSize.scale(1.0 / scale);\r\n    medianThickness.scale(1.0 / scale);\r\n\r\n    var viewPortRect = new Rect(placeholderOffset.x, placeholderOffset.y, scrollPanelSize.width, scrollPanelSize.height);\r\n    var medianRect = new Rect(viewPortRect);\r\n    medianRect.offset(frameBaseOffset);\r\n    medianRect.offset(medianThickness);\r\n\r\n    return { \r\n      medianRect: medianRect,\r\n      viewPortRect: viewPortRect\r\n    };\r\n  }\r\n\r\n  function getAnnotationPosition(snapPoint, panelRect, itemSize) {\r\n    var result = new Rect(snapPoint.x, snapPoint.y, itemSize.width, itemSize.height);\r\n\r\n    switch (_options.orientationType) {\r\n      case OrientationType.Top:\r\n      case OrientationType.Bottom:\r\n        result.y -= (itemSize.height / 4.0);\r\n        if (snapPoint.x < panelRect.horizontalCenter()) {\r\n          result.x += _options.calloutPlacementOffset;\r\n        }\r\n        else {\r\n          result.x -= (_options.calloutPlacementOffset + itemSize.width);\r\n        }\r\n        break;\r\n      default:\r\n        result.x -= (itemSize.width / 4.0);\r\n        if (snapPoint.y < panelRect.verticalCenter()) {\r\n          result.y += _options.calloutPlacementOffset;\r\n        }\r\n        else {\r\n          result.y -= (_options.calloutPlacementOffset + itemSize.height);\r\n        }\r\n        break;\r\n    }\r\n\r\n    // If annotation clipped then move it back into view port\r\n    if (result.x < panelRect.x) {\r\n      result.x = panelRect.x + _options.calloutPlacementOffset;\r\n    }\r\n    else if (result.right() > panelRect.right()) {\r\n      result.x -= (result.right() - panelRect.right() + _options.calloutPlacementOffset);\r\n    }\r\n\r\n    if (result.y < panelRect.y) {\r\n      result.y = panelRect.y + _options.calloutPlacementOffset;\r\n    }\r\n    else if (result.bottom() > panelRect.bottom()) {\r\n      result.y -= (result.bottom() - panelRect.bottom() + _options.calloutPlacementOffset);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  return {\r\n    process: process\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}