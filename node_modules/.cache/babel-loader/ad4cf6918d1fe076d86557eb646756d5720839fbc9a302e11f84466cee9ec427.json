{"ast":null,"code":"import { Layers } from '../../enums';\nimport Rect from '../../graphics/structs/Rect';\nimport Interval from '../../graphics/structs/Interval';\nimport RenderEventArgs from '../../events/RenderEventArgs';\nimport { mergeObjects } from '../../common';\nexport default function DrawLevelAnnotationBackgroundTask(getGraphics, verticalOffsetTask, createTransformTask, applyLayoutChangesTask, levelAnnotationOptionTask, mergeLevelIntervalsTask, levelAnnotationTemplateTask) {\n  var _graphics, _positions, _transform, _backgroundTemplate;\n  function process() {\n    var annotations = levelAnnotationOptionTask.getAnnotations();\n    _graphics = getGraphics();\n    _graphics.reset(\"placeholder\", Layers.LevelAnnotation);\n    if (annotations.length > 0) {\n      _positions = mergeLevelIntervalsTask.getPositions();\n      _transform = createTransformTask.getTransform();\n      _backgroundTemplate = levelAnnotationTemplateTask.getBackgroundTemplate();\n      drawAnnotations(annotations, _positions);\n    }\n    return false;\n  }\n  function drawAnnotations(annotations, positions) {\n    var verticalOffset = new Interval(verticalOffsetTask.getVerticalOffset()),\n      panel = _graphics.activate(\"placeholder\", Layers.LevelAnnotation),\n      panelRect;\n    _transform.transformRect(0, 0, panel.size.width, panel.size.height, false, this, function (x, y, width, height) {\n      panelRect = new Rect(x, y, width, height);\n    });\n    for (var index = 0, len = annotations.length; index < len; index += 1) {\n      var annotationConfig = annotations[index];\n      var lineWidth = _transform.transformThickness(annotationConfig.lineWidth, true);\n      var intervals = positions[index];\n      if (intervals != null) {\n        for (var index3 = 0, len3 = intervals.length; index3 < len3; index3 += 1) {\n          var interval = intervals[index3];\n          var position = new Rect(0, interval.from, panelRect.width, interval.width());\n          position.offset(annotationConfig.offset);\n          var verticalInterval = position.verticalInterval();\n          if (verticalInterval.overlaps(verticalOffset)) {\n            var uiHash = new RenderEventArgs();\n            uiHash.context = annotationConfig;\n            mergeObjects(uiHash.context, {\n              lineWidth\n            });\n            _transform.transformRect(position.x, position.y, position.width, position.height, true, this, function (x, y, width, height) {\n              _graphics.template(x, y, width, height, 0, 0, width, height, _backgroundTemplate.template(), _backgroundTemplate.getHashCode(), _backgroundTemplate.render, uiHash, null);\n            });\n          }\n        }\n      }\n    }\n  }\n  return {\n    process: process\n  };\n}\n;","map":{"version":3,"names":["Layers","Rect","Interval","RenderEventArgs","mergeObjects","DrawLevelAnnotationBackgroundTask","getGraphics","verticalOffsetTask","createTransformTask","applyLayoutChangesTask","levelAnnotationOptionTask","mergeLevelIntervalsTask","levelAnnotationTemplateTask","_graphics","_positions","_transform","_backgroundTemplate","process","annotations","getAnnotations","reset","LevelAnnotation","length","getPositions","getTransform","getBackgroundTemplate","drawAnnotations","positions","verticalOffset","getVerticalOffset","panel","activate","panelRect","transformRect","size","width","height","x","y","index","len","annotationConfig","lineWidth","transformThickness","intervals","index3","len3","interval","position","from","offset","verticalInterval","overlaps","uiHash","context","template","getHashCode","render"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/tasks/renders/DrawLevelAnnotationBackgroundTask.js"],"sourcesContent":["import { Layers } from '../../enums';\r\nimport Rect from '../../graphics/structs/Rect';\r\nimport Interval from '../../graphics/structs/Interval';\r\nimport RenderEventArgs from '../../events/RenderEventArgs';\r\nimport { mergeObjects } from '../../common';\r\n\r\nexport default function DrawLevelAnnotationBackgroundTask(getGraphics, verticalOffsetTask, createTransformTask, applyLayoutChangesTask, \r\n  levelAnnotationOptionTask, mergeLevelIntervalsTask, levelAnnotationTemplateTask) {\r\n  var _graphics,\r\n    _positions,\r\n    _transform,\r\n    _backgroundTemplate;\r\n\r\n  function process() {\r\n    var annotations = levelAnnotationOptionTask.getAnnotations();\r\n\r\n    _graphics = getGraphics();\r\n    _graphics.reset(\"placeholder\", Layers.LevelAnnotation);\r\n\r\n    if (annotations.length > 0) {\r\n      _positions = mergeLevelIntervalsTask.getPositions();\r\n      _transform = createTransformTask.getTransform();\r\n      _backgroundTemplate = levelAnnotationTemplateTask.getBackgroundTemplate();\r\n\r\n      drawAnnotations(annotations, _positions);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function drawAnnotations(annotations, positions) {\r\n    var verticalOffset = new Interval(verticalOffsetTask.getVerticalOffset()),\r\n      panel = _graphics.activate(\"placeholder\", Layers.LevelAnnotation),\r\n      panelRect;\r\n\r\n    _transform.transformRect(0, 0, panel.size.width, panel.size.height, false,\r\n      this, function (x, y, width, height) {\r\n        panelRect = new Rect(x, y, width, height);\r\n      });\r\n\r\n      \r\n    for (var index = 0, len = annotations.length; index < len; index += 1) {\r\n      var annotationConfig = annotations[index];\r\n      var lineWidth = _transform.transformThickness(annotationConfig.lineWidth, true);\r\n      var intervals = positions[index];\r\n      if (intervals != null) {\r\n        for (var index3 = 0, len3 = intervals.length; index3 < len3; index3 += 1) {\r\n          var interval = intervals[index3];\r\n\r\n          var position = new Rect(0, interval.from, panelRect.width, interval.width());\r\n          position.offset(annotationConfig.offset);\r\n\r\n          var verticalInterval = position.verticalInterval();\r\n          if(verticalInterval.overlaps(verticalOffset)) {\r\n            var uiHash = new RenderEventArgs();\r\n            uiHash.context = annotationConfig;\r\n            mergeObjects(uiHash.context, { lineWidth });\r\n    \r\n            _transform.transformRect(position.x, position.y, position.width, position.height, true,\r\n              this, function (x, y, width, height) {\r\n                _graphics.template(\r\n                  x\r\n                  , y\r\n                  , width\r\n                  , height\r\n                  , 0\r\n                  , 0\r\n                  , width\r\n                  , height\r\n                  , _backgroundTemplate.template()\r\n                  , _backgroundTemplate.getHashCode()\r\n                  , _backgroundTemplate.render\r\n                  , uiHash\r\n                  , null\r\n                );\r\n              });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    process: process\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}