{"ast":null,"code":"import ObjectReader from '../../readers/ObjectReader';\nimport ValueReader from '../../readers/ValueReader';\nimport { PageFitMode } from '../../enums';\nimport Size from '../../graphics/structs/Size';\nimport Thickness from '../../graphics/structs/Thickness';\nexport default function CurrentControlSizeTask(layoutOptionsTask, itemsSizesOptionTask, frameSizeTask, levelTitleSizeTask) {\n  var _data = {},\n    _hash = {},\n    _dataTemplate = new ObjectReader({\n      scrollPanelSize: new ObjectReader({\n        width: new ValueReader([\"number\"], true),\n        height: new ValueReader([\"number\"], true)\n      }, true),\n      optimalPanelSize: new ObjectReader({\n        width: new ValueReader([\"number\"], true),\n        height: new ValueReader([\"number\"], true)\n      }, true),\n      hasFrame: new ValueReader([\"boolean\"], true),\n      hasLevelTitles: new ValueReader([\"boolean\"], true)\n    });\n  function process() {\n    var result = false,\n      context = {\n        isChanged: false,\n        hash: _hash\n      },\n      layoutOptions = layoutOptionsTask.getOptions(),\n      {\n        pageFitMode\n      } = itemsSizesOptionTask.getOptions(),\n      frameThickness = new Thickness(frameSizeTask.getThickness()),\n      levelTitlesThickness = new Thickness(levelTitleSizeTask.getOptions().thickness);\n\n    // disable outer level titles if its square space is bigger than viewport\n    layoutOptions.hasLevelTitles = false;\n    if (levelTitlesThickness.isPositive()) {\n      let viewportSize = new Size(layoutOptions.scrollPanelSize);\n      viewportSize.removeThickness(levelTitlesThickness);\n      if (layoutOptions.scrollPanelSize.space() < viewportSize.space() * 2) {\n        layoutOptions.scrollPanelSize = viewportSize;\n        layoutOptions.hasLevelTitles = true;\n      }\n    }\n\n    // disable frame if its square space is bigger than viewport\n    layoutOptions.hasFrame = false;\n    if (frameThickness.isPositive()) {\n      let viewportSize = new Size(layoutOptions.scrollPanelSize);\n      viewportSize.removeThickness(frameThickness);\n      if (layoutOptions.scrollPanelSize.space() < viewportSize.space() * 2) {\n        layoutOptions.scrollPanelSize = viewportSize;\n        layoutOptions.hasFrame = true;\n      }\n    }\n    layoutOptions.optimalPanelSize = new Size(layoutOptions.scrollPanelSize.width - 25, layoutOptions.scrollPanelSize.height - 25);\n    _data = _dataTemplate.read(_data, layoutOptions, \"layout\", context);\n    switch (pageFitMode) {\n      case PageFitMode.PageWidth:\n      case PageFitMode.PageHeight:\n      case PageFitMode.FitToPage:\n      case PageFitMode.None:\n      case PageFitMode.SelectionOnly:\n        result = context.isChanged;\n        break;\n      default:\n        break;\n    }\n    return result;\n  }\n  function getOptions() {\n    return _data;\n  }\n  return {\n    process: process,\n    getOptions: getOptions\n  };\n}\n;","map":{"version":3,"names":["ObjectReader","ValueReader","PageFitMode","Size","Thickness","CurrentControlSizeTask","layoutOptionsTask","itemsSizesOptionTask","frameSizeTask","levelTitleSizeTask","_data","_hash","_dataTemplate","scrollPanelSize","width","height","optimalPanelSize","hasFrame","hasLevelTitles","process","result","context","isChanged","hash","layoutOptions","getOptions","pageFitMode","frameThickness","getThickness","levelTitlesThickness","thickness","isPositive","viewportSize","removeThickness","space","read","PageWidth","PageHeight","FitToPage","None","SelectionOnly"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/layout/CurrentControlSizeTask.js"],"sourcesContent":["import ObjectReader from '../../readers/ObjectReader';\r\nimport ValueReader from '../../readers/ValueReader';\r\nimport { PageFitMode } from '../../enums';\r\nimport Size from '../../graphics/structs/Size';\r\nimport Thickness from '../../graphics/structs/Thickness';\r\n\r\nexport default function CurrentControlSizeTask(layoutOptionsTask, itemsSizesOptionTask, frameSizeTask, levelTitleSizeTask) {\r\n  var _data = {},\r\n    _hash = {},\r\n    _dataTemplate = new ObjectReader({\r\n      scrollPanelSize: new ObjectReader({\r\n        width: new ValueReader([\"number\"], true),\r\n        height: new ValueReader([\"number\"], true)\r\n      }, true),\r\n      optimalPanelSize: new ObjectReader({\r\n        width: new ValueReader([\"number\"], true),\r\n        height: new ValueReader([\"number\"], true)\r\n      }, true),\r\n      hasFrame: new ValueReader([\"boolean\"], true),\r\n      hasLevelTitles: new ValueReader([\"boolean\"], true)\r\n    });\r\n\r\n  function process() {\r\n    var result = false,\r\n      context = { isChanged: false, hash: _hash },\r\n      layoutOptions = layoutOptionsTask.getOptions(),\r\n      { pageFitMode } = itemsSizesOptionTask.getOptions(),\r\n      frameThickness = new Thickness(frameSizeTask.getThickness()),\r\n      levelTitlesThickness = new Thickness(levelTitleSizeTask.getOptions().thickness);\r\n\r\n    // disable outer level titles if its square space is bigger than viewport\r\n    layoutOptions.hasLevelTitles = false;\r\n    if(levelTitlesThickness.isPositive()) {\r\n      let viewportSize = new Size(layoutOptions.scrollPanelSize);\r\n      viewportSize.removeThickness(levelTitlesThickness);\r\n      if(layoutOptions.scrollPanelSize.space() < viewportSize.space() * 2) {\r\n        layoutOptions.scrollPanelSize = viewportSize;\r\n        layoutOptions.hasLevelTitles = true;\r\n      }\r\n    }      \r\n\r\n    // disable frame if its square space is bigger than viewport\r\n    layoutOptions.hasFrame = false;\r\n    if(frameThickness.isPositive()) {\r\n      let viewportSize = new Size(layoutOptions.scrollPanelSize);\r\n      viewportSize.removeThickness(frameThickness);\r\n      if(layoutOptions.scrollPanelSize.space() < viewportSize.space() * 2) {\r\n        layoutOptions.scrollPanelSize = viewportSize;\r\n        layoutOptions.hasFrame = true;\r\n      }\r\n    }\r\n\r\n    layoutOptions.optimalPanelSize = new Size(layoutOptions.scrollPanelSize.width - 25, layoutOptions.scrollPanelSize.height - 25)\r\n\r\n    _data = _dataTemplate.read(_data, layoutOptions, \"layout\", context);\r\n\r\n    switch (pageFitMode) {\r\n      case PageFitMode.PageWidth:\r\n      case PageFitMode.PageHeight:\r\n      case PageFitMode.FitToPage:\r\n      case PageFitMode.None:\r\n      case PageFitMode.SelectionOnly:\r\n        result = context.isChanged;\r\n        break;\r\n      default:\r\n        break;\r\n\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  function getOptions() {\r\n    return _data;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getOptions: getOptions\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}