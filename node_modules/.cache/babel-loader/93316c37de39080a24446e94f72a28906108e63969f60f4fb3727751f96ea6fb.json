{"ast":null,"code":"import OrgLayout from './layouts/OrgLayout';\nimport ItemLayout from './layouts/ItemLayout';\nimport Tree from '../../algorithms/Tree';\nexport default function OrgCreateLayoutsTreeTask(visualTreeTask, visualTreeLevelsTask, extractNestedLayoutsTask) {\n  var _data = {\n    layoutsTree: {},\n    maximumId: null\n  };\n  function process() {\n    var visualTree = visualTreeTask.getVisualTree();\n    var leftMargins = visualTreeTask.getLeftMargins();\n    var rightMargins = visualTreeTask.getRightMargins();\n    var maximumId = visualTreeTask.getMaximumId();\n    var treeLevels = visualTreeLevelsTask.getTreeLevels();\n    var getConnectorsStacksSizes = visualTreeLevelsTask.getConnectorsStacksSizes;\n    var layouts = extractNestedLayoutsTask.getLayouts();\n    var rootLayout = new OrgLayout(visualTree, treeLevels, leftMargins, rightMargins, getConnectorsStacksSizes);\n    var layoutsTree = Tree();\n    maximumId++;\n    layoutsTree.add(null, maximumId, rootLayout);\n    var levelLayouts = [{\n      id: maximumId,\n      levelLayout: rootLayout\n    }];\n    while (levelLayouts.length > 0) {\n      var nextLevelLayouts = [];\n      for (var index = 0; index < levelLayouts.length; index += 1) {\n        var {\n          id,\n          levelLayout\n        } = levelLayouts[index];\n        levelLayout.loop(this, function (treeItem) {\n          var treeItemId = treeItem.id;\n          var itemLayout = layouts[treeItemId];\n          if (!itemLayout) {\n            itemLayout = new ItemLayout(treeItem.visibility);\n          } else {\n            nextLevelLayouts.push({\n              id: treeItemId,\n              levelLayout: itemLayout\n            });\n          }\n          layoutsTree.add(id, treeItemId, itemLayout);\n        });\n      }\n      levelLayouts = nextLevelLayouts;\n    }\n    _data.layoutsTree = layoutsTree;\n    _data.maximumId = maximumId;\n    return true;\n  }\n  function getLayoutsTree() {\n    return _data.layoutsTree;\n  }\n  function getMaximumId() {\n    return _data.maximumId;\n  }\n  return {\n    process: process,\n    getLayoutsTree: getLayoutsTree,\n    getMaximumId: getMaximumId\n  };\n}\n;","map":{"version":3,"names":["OrgLayout","ItemLayout","Tree","OrgCreateLayoutsTreeTask","visualTreeTask","visualTreeLevelsTask","extractNestedLayoutsTask","_data","layoutsTree","maximumId","process","visualTree","getVisualTree","leftMargins","getLeftMargins","rightMargins","getRightMargins","getMaximumId","treeLevels","getTreeLevels","getConnectorsStacksSizes","layouts","getLayouts","rootLayout","add","levelLayouts","id","levelLayout","length","nextLevelLayouts","index","loop","treeItem","treeItemId","itemLayout","visibility","push","getLayoutsTree"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/transformations/OrgCreateLayoutsTreeTask.js"],"sourcesContent":["import OrgLayout from './layouts/OrgLayout';\r\nimport ItemLayout from './layouts/ItemLayout';\r\nimport Tree from '../../algorithms/Tree';\r\n\r\nexport default function OrgCreateLayoutsTreeTask(visualTreeTask, visualTreeLevelsTask, extractNestedLayoutsTask ) {\r\n\r\n  var _data = {\r\n    layoutsTree: {},\r\n    maximumId: null\r\n  };\r\n\r\n  function process() {\r\n    var visualTree = visualTreeTask.getVisualTree();\r\n    var leftMargins = visualTreeTask.getLeftMargins();\r\n    var rightMargins = visualTreeTask.getRightMargins();\r\n    var maximumId = visualTreeTask.getMaximumId();\r\n    var treeLevels = visualTreeLevelsTask.getTreeLevels();\r\n    var getConnectorsStacksSizes = visualTreeLevelsTask.getConnectorsStacksSizes;\r\n    var layouts = extractNestedLayoutsTask.getLayouts();\r\n    \r\n    var rootLayout = new OrgLayout(visualTree, treeLevels, leftMargins, rightMargins, getConnectorsStacksSizes);\r\n    var layoutsTree = Tree();\r\n    maximumId++;\r\n    layoutsTree.add(null, maximumId, rootLayout);\r\n\r\n    var levelLayouts = [{ id: maximumId, levelLayout: rootLayout }];\r\n    while(levelLayouts.length > 0) {\r\n      var nextLevelLayouts = [];\r\n      for(var index = 0; index < levelLayouts.length; index+=1) {\r\n        var { id, levelLayout } = levelLayouts[index];\r\n        levelLayout.loop(this, function(treeItem) {\r\n          var treeItemId = treeItem.id;\r\n          var itemLayout = layouts[treeItemId];\r\n          if(!itemLayout) {\r\n            itemLayout = new ItemLayout(treeItem.visibility);\r\n          } else {\r\n            nextLevelLayouts.push({id: treeItemId, levelLayout: itemLayout});\r\n          }\r\n          layoutsTree.add(id, treeItemId, itemLayout);\r\n        })\r\n      }\r\n      levelLayouts = nextLevelLayouts;\r\n    }\r\n\r\n    _data.layoutsTree = layoutsTree;\r\n    _data.maximumId = maximumId;\r\n\r\n    return true;\r\n  }\r\n\r\n\r\n  function getLayoutsTree() {\r\n    return _data.layoutsTree;\r\n  }\r\n\r\n  function getMaximumId() {\r\n    return _data.maximumId;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getLayoutsTree: getLayoutsTree,\r\n    getMaximumId: getMaximumId\r\n  };\r\n};"],"mappings":"AAAA,OAAOA,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,OAAOC,IAAI,MAAM,uBAAuB;AAExC,eAAe,SAASC,wBAAwBA,CAACC,cAAc,EAAEC,oBAAoB,EAAEC,wBAAwB,EAAG;EAEhH,IAAIC,KAAK,GAAG;IACVC,WAAW,EAAE,CAAC,CAAC;IACfC,SAAS,EAAE;EACb,CAAC;EAED,SAASC,OAAOA,CAAA,EAAG;IACjB,IAAIC,UAAU,GAAGP,cAAc,CAACQ,aAAa,CAAC,CAAC;IAC/C,IAAIC,WAAW,GAAGT,cAAc,CAACU,cAAc,CAAC,CAAC;IACjD,IAAIC,YAAY,GAAGX,cAAc,CAACY,eAAe,CAAC,CAAC;IACnD,IAAIP,SAAS,GAAGL,cAAc,CAACa,YAAY,CAAC,CAAC;IAC7C,IAAIC,UAAU,GAAGb,oBAAoB,CAACc,aAAa,CAAC,CAAC;IACrD,IAAIC,wBAAwB,GAAGf,oBAAoB,CAACe,wBAAwB;IAC5E,IAAIC,OAAO,GAAGf,wBAAwB,CAACgB,UAAU,CAAC,CAAC;IAEnD,IAAIC,UAAU,GAAG,IAAIvB,SAAS,CAACW,UAAU,EAAEO,UAAU,EAAEL,WAAW,EAAEE,YAAY,EAAEK,wBAAwB,CAAC;IAC3G,IAAIZ,WAAW,GAAGN,IAAI,CAAC,CAAC;IACxBO,SAAS,EAAE;IACXD,WAAW,CAACgB,GAAG,CAAC,IAAI,EAAEf,SAAS,EAAEc,UAAU,CAAC;IAE5C,IAAIE,YAAY,GAAG,CAAC;MAAEC,EAAE,EAAEjB,SAAS;MAAEkB,WAAW,EAAEJ;IAAW,CAAC,CAAC;IAC/D,OAAME,YAAY,CAACG,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAIC,gBAAgB,GAAG,EAAE;MACzB,KAAI,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGL,YAAY,CAACG,MAAM,EAAEE,KAAK,IAAE,CAAC,EAAE;QACxD,IAAI;UAAEJ,EAAE;UAAEC;QAAY,CAAC,GAAGF,YAAY,CAACK,KAAK,CAAC;QAC7CH,WAAW,CAACI,IAAI,CAAC,IAAI,EAAE,UAASC,QAAQ,EAAE;UACxC,IAAIC,UAAU,GAAGD,QAAQ,CAACN,EAAE;UAC5B,IAAIQ,UAAU,GAAGb,OAAO,CAACY,UAAU,CAAC;UACpC,IAAG,CAACC,UAAU,EAAE;YACdA,UAAU,GAAG,IAAIjC,UAAU,CAAC+B,QAAQ,CAACG,UAAU,CAAC;UAClD,CAAC,MAAM;YACLN,gBAAgB,CAACO,IAAI,CAAC;cAACV,EAAE,EAAEO,UAAU;cAAEN,WAAW,EAAEO;YAAU,CAAC,CAAC;UAClE;UACA1B,WAAW,CAACgB,GAAG,CAACE,EAAE,EAAEO,UAAU,EAAEC,UAAU,CAAC;QAC7C,CAAC,CAAC;MACJ;MACAT,YAAY,GAAGI,gBAAgB;IACjC;IAEAtB,KAAK,CAACC,WAAW,GAAGA,WAAW;IAC/BD,KAAK,CAACE,SAAS,GAAGA,SAAS;IAE3B,OAAO,IAAI;EACb;EAGA,SAAS4B,cAAcA,CAAA,EAAG;IACxB,OAAO9B,KAAK,CAACC,WAAW;EAC1B;EAEA,SAASS,YAAYA,CAAA,EAAG;IACtB,OAAOV,KAAK,CAACE,SAAS;EACxB;EAEA,OAAO;IACLC,OAAO,EAAEA,OAAO;IAChB2B,cAAc,EAAEA,cAAc;IAC9BpB,YAAY,EAAEA;EAChB,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}