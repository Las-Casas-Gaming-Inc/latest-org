{"ast":null,"code":"import Rect from '../../../graphics/structs/Rect';\nimport { VerticalAlignmentType, Visibility, GroupByType, AdviserPlacementType } from '../../../enums';\nimport TreeItemPosition from '../../../models/TreeItemPosition';\nexport default function MatrixLayout(items, hideParentConnection, hideChildrenConnection) {\n  this.items = items;\n  this.hideParentConnection = hideParentConnection;\n  this.hideChildrenConnection = hideChildrenConnection;\n  this.data = {\n    columns: [],\n    rows: []\n  };\n}\n;\nMatrixLayout.prototype.loop = function (thisArg, onItem) {\n  if (onItem != null) {\n    for (var index = 0, len = this.items.length; index < len; index += 1) {\n      var item = this.items[index];\n      onItem.call(thisArg, item, 0);\n    }\n  }\n};\nMatrixLayout.prototype.Column = function () {\n  this.depth = 0;\n  this.offset = 0;\n  this.leftPadding = 0;\n  this.rightPadding = 0;\n  this.layoutDirection = AdviserPlacementType.Left;\n};\nMatrixLayout.prototype.Row = function () {\n  this.depth = 0;\n  this.offset = 0;\n  this.horizontalConnectorsDepth = 0;\n  this.minimalDepth = null;\n  this.dotsDepth = null;\n};\nMatrixLayout.prototype.getMatrixWidth = function (maximumColumnsInMatrix, len) {\n  return Math.min(maximumColumnsInMatrix, Math.ceil(Math.sqrt(len)));\n};\nMatrixLayout.prototype.measure = function (levelVisibility, isCursor, isSelected, treeItemTemplate, treeItemsPositions, options) {\n  var data = {\n    columns: [],\n    rows: []\n  };\n  this.measureColumns(data, this.items, treeItemsPositions, options);\n  this.measureRows(data, this.items, treeItemsPositions, options);\n  this.data = data;\n  var treeItemPosition = new TreeItemPosition();\n  treeItemPosition.actualVisibility = Visibility.Normal;\n  treeItemPosition.actualSize = this.getLayoutSize(data);\n  return treeItemPosition;\n};\nMatrixLayout.prototype.measureColumns = function (data, items, treeItemsPositions, options) {\n  var column,\n    index,\n    len,\n    maximumColumns = this.getMatrixWidth(options.maximumColumnsInMatrix, items.length);\n  for (index = 0, len = items.length; index < len; index += 1) {\n    var treeItem = items[index];\n    var treeItemId = treeItem.id;\n    var treeItemPosition = treeItemsPositions[treeItemId];\n    var horizontalPadding = options.intervals[treeItemPosition.actualVisibility] / 2;\n    var columnIndex = index % maximumColumns;\n    column = data.columns[columnIndex];\n    if (column == null) {\n      column = new this.Column();\n      column.layoutDirection = columnIndex % 2 ? AdviserPlacementType.Right : AdviserPlacementType.Left;\n      data.columns[columnIndex] = column;\n    }\n    var itemWidth = horizontalPadding + treeItemPosition.actualSize.width + horizontalPadding;\n    column.depth = Math.max(column.depth, itemWidth);\n  }\n  var arrowTipLength = options.linesWidth * 8;\n  var offset = 0;\n  for (index = 0, len = data.columns.length; index < len; index += 1) {\n    column = data.columns[index];\n    if (index % 2 == 0) {\n      switch (options.arrowsDirection) {\n        case GroupByType.Parents:\n          column.leftPadding = this.hideChildrenConnection ? 0 : arrowTipLength;\n          column.rightPadding = 0;\n          break;\n        case GroupByType.Children:\n          column.leftPadding = 0;\n          column.rightPadding = this.hideParentConnection ? 0 : arrowTipLength;\n          break;\n      }\n    } else {\n      switch (options.arrowsDirection) {\n        case GroupByType.Parents:\n          column.leftPadding = 0;\n          column.rightPadding = this.hideChildrenConnection ? 0 : arrowTipLength;\n          break;\n        case GroupByType.Children:\n          column.leftPadding = this.hideParentConnection ? 0 : arrowTipLength;\n          column.rightPadding = 0;\n          break;\n      }\n    }\n    column.offset = offset + column.leftPadding + column.depth / 2;\n    offset = column.offset + column.depth / 2 + column.rightPadding;\n  }\n};\nMatrixLayout.prototype.measureRows = function (data, items, treeItemsPositions, options) {\n  var index,\n    len,\n    row,\n    maximumColumns = this.getMatrixWidth(options.maximumColumnsInMatrix, items.length);\n  for (index = 0, len = items.length; index < len; index += 1) {\n    var treeItem = items[index];\n    var treeItemId = treeItem.id;\n    var treeItemPosition = treeItemsPositions[treeItemId];\n    var rowIndex = Math.floor(index / maximumColumns);\n    var verticalPadding = options.shifts[treeItemPosition.actualVisibility] / 2;\n    row = data.rows[rowIndex];\n    if (row == null) {\n      row = new this.Row();\n      data.rows[rowIndex] = row;\n    }\n    row.depth = Math.max(row.depth, verticalPadding + treeItemPosition.actualSize.height + verticalPadding);\n    switch (treeItemPosition.actualVisibility) {\n      case Visibility.Dot:\n      case Visibility.Line:\n      case Visibility.Invisible:\n        row.dotsDepth = !row.dotsDepth ? treeItemPosition.actualSize.height : Math.min(row.dotsDepth, treeItemPosition.actualSize.height);\n        break;\n      default:\n        row.minimalDepth = !row.minimalDepth ? treeItemPosition.actualSize.height : Math.min(row.minimalDepth, treeItemPosition.actualSize.height);\n        break;\n    }\n  }\n  var offset = 0;\n  for (index = 0, len = data.rows.length; index < len; index += 1) {\n    row = data.rows[index];\n    row.offset = offset + row.depth / 2;\n    offset = row.offset + row.depth / 2;\n    if (row.minimalDepth == null) {\n      row.minimalDepth = row.depth;\n    }\n    if (row.dotsDepth != null && row.dotsDepth > row.minimalDepth) {\n      row.minimalDepth = row.dotsDepth;\n    }\n    switch (options.verticalAlignment) {\n      case VerticalAlignmentType.Top:\n        row.horizontalConnectorsDepth = row.minimalDepth / 2.0;\n        break;\n      case VerticalAlignmentType.Middle:\n        row.horizontalConnectorsDepth = row.depth / 2.0;\n        break;\n      case VerticalAlignmentType.Bottom:\n        row.horizontalConnectorsDepth = row.depth - row.minimalDepth / 2.0;\n        break;\n    }\n  }\n};\nMatrixLayout.prototype.getLayoutSize = function (data) {\n  return new Rect(0, 0, Math.round(this.getLayoutWidth(data)), Math.round(this.getLayoutHeight(data)));\n};\nMatrixLayout.prototype.getLayoutWidth = function (data) {\n  var result = 0,\n    length = data.columns.length;\n  if (length > 0) {\n    var lastColumn = data.columns[length - 1];\n    result = lastColumn.offset + lastColumn.depth / 2 + lastColumn.rightPadding;\n  }\n  return result;\n};\nMatrixLayout.prototype.getLayoutHeight = function (data) {\n  var result = 0,\n    length = data.rows.length;\n  if (length > 0) {\n    var lastRow = data.rows[length - 1];\n    result = lastRow.offset + lastRow.depth / 2;\n  }\n  return result;\n};\nMatrixLayout.prototype.arrange = function (thisArg, parentPosition, layoutDirection, treeItemsPositions, options, onItemPositioned) {\n  if (onItemPositioned != null) {\n    var maximumColumns = this.getMatrixWidth(options.maximumColumnsInMatrix, this.items.length);\n    for (var index = 0, len = this.items.length; index < len; index += 1) {\n      var treeItem = this.items[index],\n        treeItemId = treeItem.id;\n      var columnIndex = index % maximumColumns;\n      var column = this.data.columns[columnIndex];\n      var rowIndex = Math.floor(index / maximumColumns);\n      var row = this.data.rows[rowIndex];\n      var treeItemPosition = treeItemsPositions[treeItemId];\n      var actualPosition = this.getItemPosition(treeItemPosition.actualVisibility, column, row, treeItemPosition.actualSize, options.verticalAlignment);\n      actualPosition.translate(parentPosition.x, parentPosition.y);\n      treeItemPosition = {\n        ...treeItemPosition,\n        actualPosition,\n        horizontalConnectorsShift: parentPosition.y + row.offset - row.depth / 2 + row.horizontalConnectorsDepth,\n        leftMedianOffset: column.depth / 2 + column.leftPadding,\n        rightMedianOffset: column.depth / 2 + column.rightPadding,\n        topConnectorShift: row.depth / 2,\n        bottomConnectorShift: row.depth / 2\n      };\n      onItemPositioned.call(thisArg, treeItemId, treeItemPosition, column.layoutDirection);\n    }\n  }\n};\nMatrixLayout.prototype.getItemPosition = function (visibility, column, row, size, verticalAlignment) {\n  var itemShift = 0;\n  switch (visibility) {\n    case Visibility.Normal:\n      switch (verticalAlignment) {\n        case VerticalAlignmentType.Top:\n          itemShift = 0;\n          break;\n        case VerticalAlignmentType.Middle:\n          itemShift = (row.depth - size.height) / 2.0;\n          break;\n        case VerticalAlignmentType.Bottom:\n          itemShift = row.depth - size.height;\n          break;\n      }\n      break;\n    case Visibility.Dot:\n    case Visibility.Line:\n    case Visibility.Invisible:\n      itemShift = row.horizontalConnectorsDepth - size.height / 2.0;\n      break;\n  }\n  return new Rect(column.offset - size.width / 2, row.offset - row.depth / 2 + itemShift, size.width, size.height);\n};","map":{"version":3,"names":["Rect","VerticalAlignmentType","Visibility","GroupByType","AdviserPlacementType","TreeItemPosition","MatrixLayout","items","hideParentConnection","hideChildrenConnection","data","columns","rows","prototype","loop","thisArg","onItem","index","len","length","item","call","Column","depth","offset","leftPadding","rightPadding","layoutDirection","Left","Row","horizontalConnectorsDepth","minimalDepth","dotsDepth","getMatrixWidth","maximumColumnsInMatrix","Math","min","ceil","sqrt","measure","levelVisibility","isCursor","isSelected","treeItemTemplate","treeItemsPositions","options","measureColumns","measureRows","treeItemPosition","actualVisibility","Normal","actualSize","getLayoutSize","column","maximumColumns","treeItem","treeItemId","id","horizontalPadding","intervals","columnIndex","Right","itemWidth","width","max","arrowTipLength","linesWidth","arrowsDirection","Parents","Children","row","rowIndex","floor","verticalPadding","shifts","height","Dot","Line","Invisible","verticalAlignment","Top","Middle","Bottom","round","getLayoutWidth","getLayoutHeight","result","lastColumn","lastRow","arrange","parentPosition","onItemPositioned","actualPosition","getItemPosition","translate","x","y","horizontalConnectorsShift","leftMedianOffset","rightMedianOffset","topConnectorShift","bottomConnectorShift","visibility","size","itemShift"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/tasks/transformations/layouts/MatrixLayout.js"],"sourcesContent":["import Rect from '../../../graphics/structs/Rect';\r\nimport { VerticalAlignmentType, Visibility, GroupByType, AdviserPlacementType } from '../../../enums';\r\nimport TreeItemPosition from '../../../models/TreeItemPosition';\r\n\r\nexport default function MatrixLayout(items, hideParentConnection, hideChildrenConnection) {\r\n  this.items = items;\r\n  this.hideParentConnection = hideParentConnection;\r\n  this.hideChildrenConnection = hideChildrenConnection;\r\n\r\n  this.data = {\r\n    columns: [],\r\n    rows: []\r\n  };\r\n};\r\n\r\nMatrixLayout.prototype.loop = function (thisArg, onItem) {\r\n  if(onItem != null) {\r\n    for(var index = 0, len = this.items.length; index < len; index+=1) {\r\n      var item = this.items[index];\r\n\r\n      onItem.call(thisArg, item, 0);\r\n    }\r\n  }\r\n};\r\n\r\nMatrixLayout.prototype.Column = function () {\r\n  this.depth = 0;\r\n  this.offset = 0;\r\n  this.leftPadding = 0;\r\n  this.rightPadding = 0;\r\n  this.layoutDirection = AdviserPlacementType.Left;\r\n};\r\n\r\nMatrixLayout.prototype.Row = function () {\r\n  this.depth = 0;\r\n  this.offset = 0;\r\n  this.horizontalConnectorsDepth = 0;\r\n  this.minimalDepth = null;\r\n  this.dotsDepth = null;\r\n};\r\n\r\nMatrixLayout.prototype.getMatrixWidth = function (maximumColumnsInMatrix, len) {\r\n  return Math.min(maximumColumnsInMatrix, Math.ceil(Math.sqrt(len)));\r\n};\r\n\r\nMatrixLayout.prototype.measure = function (levelVisibility, isCursor, isSelected, treeItemTemplate, treeItemsPositions, options) {\r\n  var data = {\r\n    columns: [],\r\n    rows: []\r\n  };\r\n\r\n  this.measureColumns(data, this.items, treeItemsPositions, options);\r\n  this.measureRows(data, this.items, treeItemsPositions, options);\r\n\r\n  this.data = data;\r\n\r\n  var treeItemPosition = new TreeItemPosition();\r\n  treeItemPosition.actualVisibility = Visibility.Normal;\r\n  treeItemPosition.actualSize = this.getLayoutSize(data);\r\n  return treeItemPosition;\r\n};\r\n\r\nMatrixLayout.prototype.measureColumns = function (data, items, treeItemsPositions, options) {\r\n  var column,\r\n    index, len,\r\n    maximumColumns = this.getMatrixWidth(options.maximumColumnsInMatrix, items.length);\r\n  for (index = 0, len = items.length; index < len; index += 1) {\r\n    var treeItem = items[index];\r\n    var treeItemId = treeItem.id;\r\n    var treeItemPosition = treeItemsPositions[treeItemId];\r\n\r\n    var horizontalPadding = options.intervals[treeItemPosition.actualVisibility] / 2;\r\n\r\n    var columnIndex = index % maximumColumns;\r\n    column = data.columns[columnIndex];\r\n    if (column == null) {\r\n      column = new this.Column();\r\n      column.layoutDirection = columnIndex % 2 ? AdviserPlacementType.Right : AdviserPlacementType.Left;\r\n      data.columns[columnIndex] = column;\r\n    }\r\n    var itemWidth = horizontalPadding + treeItemPosition.actualSize.width + horizontalPadding;\r\n    column.depth = Math.max(column.depth, itemWidth);\r\n  }\r\n\r\n  var arrowTipLength = options.linesWidth * 8;\r\n\r\n\r\n  var offset = 0;\r\n  for (index = 0, len = data.columns.length; index < len; index += 1) {\r\n    column = data.columns[index];\r\n\r\n\r\n    if (index % 2 == 0) {\r\n      switch (options.arrowsDirection) {\r\n        case GroupByType.Parents:\r\n          column.leftPadding = this.hideChildrenConnection ? 0 : arrowTipLength;\r\n          column.rightPadding = 0;\r\n          break;\r\n        case GroupByType.Children:\r\n          column.leftPadding = 0;\r\n          column.rightPadding = this.hideParentConnection ? 0 : arrowTipLength;\r\n          break;\r\n      }\r\n    } else {\r\n      switch (options.arrowsDirection) {\r\n        case GroupByType.Parents:\r\n          column.leftPadding = 0;\r\n          column.rightPadding = this.hideChildrenConnection ? 0 : arrowTipLength;\r\n          break;\r\n        case GroupByType.Children:\r\n          column.leftPadding = this.hideParentConnection ? 0 : arrowTipLength;\r\n          column.rightPadding = 0;\r\n          break;\r\n      }\r\n    }\r\n\r\n    column.offset = offset + column.leftPadding + column.depth / 2;\r\n\r\n    offset = column.offset + column.depth / 2 + column.rightPadding;\r\n  }\r\n};\r\n\r\nMatrixLayout.prototype.measureRows = function (data, items, treeItemsPositions, options) {\r\n  var index, len,\r\n    row,\r\n    maximumColumns = this.getMatrixWidth(options.maximumColumnsInMatrix, items.length);\r\n  for (index = 0, len = items.length; index < len; index += 1) {\r\n    var treeItem = items[index];\r\n    var treeItemId = treeItem.id;\r\n    var treeItemPosition = treeItemsPositions[treeItemId];\r\n\r\n    var rowIndex = Math.floor(index / maximumColumns);\r\n    var verticalPadding = options.shifts[treeItemPosition.actualVisibility] / 2;\r\n\r\n    row = data.rows[rowIndex];\r\n    if (row == null) {\r\n      row = new this.Row();\r\n      data.rows[rowIndex] = row;\r\n    }\r\n    row.depth = Math.max(row.depth, verticalPadding + treeItemPosition.actualSize.height + verticalPadding);\r\n\r\n    switch (treeItemPosition.actualVisibility) {\r\n      case Visibility.Dot:\r\n      case Visibility.Line:\r\n      case Visibility.Invisible:\r\n        row.dotsDepth = !row.dotsDepth ? treeItemPosition.actualSize.height : Math.min(row.dotsDepth, treeItemPosition.actualSize.height);\r\n        break;\r\n      default:\r\n        row.minimalDepth = !row.minimalDepth ? treeItemPosition.actualSize.height : Math.min(row.minimalDepth, treeItemPosition.actualSize.height);\r\n        break;\r\n    }\r\n  }\r\n\r\n  var offset = 0;\r\n  for (index = 0, len = data.rows.length; index < len; index += 1) {\r\n    row = data.rows[index];\r\n\r\n    row.offset = offset + row.depth / 2;\r\n    offset = row.offset + row.depth / 2;\r\n\r\n    if (row.minimalDepth == null) {\r\n      row.minimalDepth = row.depth;\r\n    }\r\n    if (row.dotsDepth != null && row.dotsDepth > row.minimalDepth) {\r\n      row.minimalDepth = row.dotsDepth;\r\n    }\r\n\r\n    switch (options.verticalAlignment) {\r\n      case VerticalAlignmentType.Top:\r\n        row.horizontalConnectorsDepth = row.minimalDepth / 2.0;\r\n        break;\r\n      case VerticalAlignmentType.Middle:\r\n        row.horizontalConnectorsDepth = row.depth / 2.0;\r\n        break;\r\n      case VerticalAlignmentType.Bottom:\r\n        row.horizontalConnectorsDepth = row.depth - row.minimalDepth / 2.0;\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\nMatrixLayout.prototype.getLayoutSize = function (data) {\r\n  return new Rect(0, 0, Math.round(this.getLayoutWidth(data)), Math.round(this.getLayoutHeight(data)));\r\n};\r\n\r\nMatrixLayout.prototype.getLayoutWidth = function (data) {\r\n  var result = 0,\r\n    length = data.columns.length;\r\n  if (length > 0) {\r\n    var lastColumn = data.columns[length - 1];\r\n    result = lastColumn.offset + lastColumn.depth / 2 + lastColumn.rightPadding;\r\n  }\r\n  return result;\r\n};\r\n\r\nMatrixLayout.prototype.getLayoutHeight = function (data) {\r\n  var result = 0,\r\n    length = data.rows.length;\r\n  if (length > 0) {\r\n    var lastRow = data.rows[length - 1];\r\n    result = lastRow.offset + lastRow.depth / 2;\r\n  }\r\n  return result;\r\n};\r\n\r\nMatrixLayout.prototype.arrange = function (thisArg, parentPosition, layoutDirection, treeItemsPositions, options, onItemPositioned) {\r\n  if (onItemPositioned != null) {\r\n    var maximumColumns = this.getMatrixWidth(options.maximumColumnsInMatrix, this.items.length);\r\n    for (var index = 0, len = this.items.length; index < len; index += 1) {\r\n      var treeItem = this.items[index],\r\n        treeItemId = treeItem.id;\r\n\r\n      var columnIndex = index % maximumColumns;\r\n      var column = this.data.columns[columnIndex];\r\n\r\n      var rowIndex = Math.floor(index / maximumColumns);\r\n      var row = this.data.rows[rowIndex];\r\n\r\n      var treeItemPosition = treeItemsPositions[treeItemId];\r\n\r\n      var actualPosition = this.getItemPosition(treeItemPosition.actualVisibility, column, row, treeItemPosition.actualSize, options.verticalAlignment);\r\n      actualPosition.translate(parentPosition.x, parentPosition.y);\r\n\r\n      treeItemPosition = {\r\n        ...treeItemPosition,\r\n        actualPosition,\r\n        horizontalConnectorsShift: parentPosition.y + row.offset - row.depth / 2 + row.horizontalConnectorsDepth,\r\n        leftMedianOffset: column.depth / 2 + column.leftPadding,\r\n        rightMedianOffset: column.depth / 2 + column.rightPadding,\r\n        topConnectorShift: row.depth / 2,\r\n        bottomConnectorShift: row.depth / 2\r\n      };      \r\n\r\n      onItemPositioned.call(thisArg, treeItemId, treeItemPosition, column.layoutDirection);\r\n    }\r\n  }\r\n};\r\n\r\nMatrixLayout.prototype.getItemPosition = function (visibility, column, row, size, verticalAlignment) {\r\n  var itemShift = 0;\r\n\r\n  switch (visibility) {\r\n    case Visibility.Normal:\r\n      switch (verticalAlignment) {\r\n        case VerticalAlignmentType.Top:\r\n          itemShift = 0;\r\n          break;\r\n        case VerticalAlignmentType.Middle:\r\n          itemShift = (row.depth - size.height) / 2.0;\r\n          break;\r\n        case VerticalAlignmentType.Bottom:\r\n          itemShift = row.depth - size.height;\r\n          break;\r\n      }\r\n      break;\r\n    case Visibility.Dot:\r\n    case Visibility.Line:\r\n    case Visibility.Invisible:\r\n      itemShift = row.horizontalConnectorsDepth - size.height / 2.0;\r\n      break;\r\n  }\r\n\r\n  return new Rect(column.offset - size.width / 2, row.offset - row.depth / 2 + itemShift, size.width, size.height);\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}