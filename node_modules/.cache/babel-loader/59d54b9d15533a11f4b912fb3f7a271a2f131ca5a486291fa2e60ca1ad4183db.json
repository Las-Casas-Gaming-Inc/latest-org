{"ast":null,"code":"import Size from './graphics/structs/Size';\nimport PdfGraphics from './graphics/PdfGraphics';\nimport { PageFitMode, Enabled } from './enums';\n/**\r\n * Creates PDFKit Family Diagram Plugin\r\n * @class BasePdfkitPlugin\r\n * \r\n * @param {object} options Family Diagram Configuration object\r\n * \r\n * @returns {BasePdfkitPlugin} Returns reference to PDFKit Plugin instance.\r\n */\nexport default function BasePdfkitPlugin(options, createTaskManager, templates) {\n  var _data = {\n      doc: null,\n      options: options,\n      tasks: null,\n      graphics: null,\n      controlSize: null\n    },\n    _debug = false;\n  function getOptions() {\n    return _data.options;\n  }\n  function getGraphics() {\n    return _data.graphics;\n  }\n  function setLayout(options) {\n    var {\n        graphics\n      } = _data,\n      {\n        frameMousePanelRect,\n        titlesMousePanelRect,\n        scrollPanelRect,\n        controlSize\n      } = options;\n    graphics.position(\"frameplaceholder\", frameMousePanelRect.x, frameMousePanelRect.y, frameMousePanelRect.width, frameMousePanelRect.height);\n    graphics.position(\"titlesplaceholder\", titlesMousePanelRect.x, titlesMousePanelRect.y, titlesMousePanelRect.width, titlesMousePanelRect.height);\n    graphics.position(\"placeholder\", scrollPanelRect.x, scrollPanelRect.y, scrollPanelRect.width, scrollPanelRect.height);\n    _data.controlSize = controlSize;\n  }\n  function _disableNotAvailableFunctionality() {\n    /* disable functionality not available in PDF */\n    _data.options.scale = 1;\n    _data.options.showFrame = false;\n    _data.options.hasButtons = Enabled.False;\n    _data.options.pageFitMode = PageFitMode.AutoSize;\n    _data.options.autoSizeMinimum = new Size(0, 0);\n    _data.options.autoSizeMaximum = new Size(1000000, 1000000);\n  }\n\n  /**\r\n   * Calculates size of the diagram required to render all nodes without truncation.\r\n   * \r\n   * @param {object} doc PDFKit document\r\n   * @param {number} positionX Diagram placement X coordinate\r\n   * @param {number} positionY Diagram placement Y coordinate\r\n   * @returns {Size} Returns size of the diagram\r\n   */\n  function draw(doc, positionX, positionY) {\n    _data.doc = doc;\n    _data.tasks = createTaskManager(getOptions, getGraphics, setLayout, templates);\n    _data.graphics = new PdfGraphics(_data.doc);\n    _data.graphics.debug = _debug;\n    _disableNotAvailableFunctionality();\n    _data.doc.save();\n    _data.doc.translate(positionX, positionY);\n    _data.tasks.process('OptionsTask', null, _debug);\n    _data.graphics.clean();\n    _data.doc.restore();\n    return new Size(_data.controlSize);\n  }\n\n  /**\r\n   * Calculates size of the diagram required to render all nodes without truncation.\r\n   * \r\n   * @returns {Size} Returns size of the diagram\r\n   */\n  function getSize() {\n    _data.tasks = createTaskManager(getOptions, getGraphics, setLayout, templates);\n    _data.graphics = new PdfGraphics(_data.doc);\n    _data.graphics.debug = _debug;\n    _disableNotAvailableFunctionality();\n    _data.tasks.process('OptionsTask', 'ApplyLayoutChangesTask', _debug);\n    _data.graphics.clean();\n    return new Size(_data.controlSize);\n  }\n  return {\n    draw: draw,\n    getSize: getSize\n  };\n}\n;","map":{"version":3,"names":["Size","PdfGraphics","PageFitMode","Enabled","BasePdfkitPlugin","options","createTaskManager","templates","_data","doc","tasks","graphics","controlSize","_debug","getOptions","getGraphics","setLayout","frameMousePanelRect","titlesMousePanelRect","scrollPanelRect","position","x","y","width","height","_disableNotAvailableFunctionality","scale","showFrame","hasButtons","False","pageFitMode","AutoSize","autoSizeMinimum","autoSizeMaximum","draw","positionX","positionY","debug","save","translate","process","clean","restore","getSize"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/BasePdfkitPlugin.js"],"sourcesContent":["import Size from './graphics/structs/Size';\r\nimport PdfGraphics from './graphics/PdfGraphics';\r\nimport { PageFitMode, Enabled } from './enums';\r\n/**\r\n * Creates PDFKit Family Diagram Plugin\r\n * @class BasePdfkitPlugin\r\n * \r\n * @param {object} options Family Diagram Configuration object\r\n * \r\n * @returns {BasePdfkitPlugin} Returns reference to PDFKit Plugin instance.\r\n */\r\nexport default function BasePdfkitPlugin(options, createTaskManager, templates) {\r\n  var _data = {\r\n    doc: null,\r\n    options: options,\r\n    tasks: null,\r\n    graphics: null,\r\n    controlSize: null,\r\n  },\r\n    _debug = false;\r\n\r\n  function getOptions() {\r\n    return _data.options;\r\n  }\r\n\r\n  function getGraphics() {\r\n    return _data.graphics;\r\n  }\r\n\r\n  function setLayout(options) {\r\n    var { graphics } = _data,\r\n      { frameMousePanelRect, titlesMousePanelRect, scrollPanelRect, controlSize } = options;\r\n\r\n    graphics.position(\"frameplaceholder\", frameMousePanelRect.x, frameMousePanelRect.y, frameMousePanelRect.width, frameMousePanelRect.height );\r\n    graphics.position(\"titlesplaceholder\", titlesMousePanelRect.x, titlesMousePanelRect.y, titlesMousePanelRect.width, titlesMousePanelRect.height );\r\n    graphics.position(\"placeholder\", scrollPanelRect.x, scrollPanelRect.y, scrollPanelRect.width, scrollPanelRect.height);\r\n\r\n    _data.controlSize = controlSize;\r\n  }\r\n\r\n  function _disableNotAvailableFunctionality() {\r\n    /* disable functionality not available in PDF */\r\n    _data.options.scale = 1;\r\n    _data.options.showFrame = false;\r\n    _data.options.hasButtons = Enabled.False;\r\n    _data.options.pageFitMode = PageFitMode.AutoSize;\r\n    _data.options.autoSizeMinimum = new Size(0, 0);\r\n    _data.options.autoSizeMaximum = new Size(1000000, 1000000);\r\n  }\r\n\r\n  /**\r\n   * Calculates size of the diagram required to render all nodes without truncation.\r\n   * \r\n   * @param {object} doc PDFKit document\r\n   * @param {number} positionX Diagram placement X coordinate\r\n   * @param {number} positionY Diagram placement Y coordinate\r\n   * @returns {Size} Returns size of the diagram\r\n   */\r\n  function draw(doc, positionX, positionY) {\r\n    _data.doc = doc;\r\n\r\n    _data.tasks = createTaskManager(getOptions, getGraphics, setLayout, templates);\r\n    _data.graphics = new PdfGraphics(_data.doc);\r\n    _data.graphics.debug = _debug;\r\n\r\n    _disableNotAvailableFunctionality();\r\n\r\n    _data.doc.save();\r\n\r\n    _data.doc.translate(positionX, positionY);\r\n\r\n    _data.tasks.process('OptionsTask', null, _debug);\r\n    _data.graphics.clean();\r\n\r\n    _data.doc.restore();\r\n\r\n    return new Size(_data.controlSize);\r\n  }\r\n\r\n  /**\r\n   * Calculates size of the diagram required to render all nodes without truncation.\r\n   * \r\n   * @returns {Size} Returns size of the diagram\r\n   */\r\n  function getSize() {\r\n    _data.tasks = createTaskManager(getOptions, getGraphics, setLayout, templates);\r\n    _data.graphics = new PdfGraphics(_data.doc);\r\n    _data.graphics.debug = _debug;\r\n\r\n    _disableNotAvailableFunctionality();\r\n\r\n    _data.tasks.process('OptionsTask', 'ApplyLayoutChangesTask', _debug);\r\n    _data.graphics.clean();\r\n    \r\n    return new Size(_data.controlSize);\r\n  }\r\n\r\n  return {\r\n    draw: draw,\r\n    getSize: getSize\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}