{"ast":null,"code":"import Size from '../../graphics/structs/Size';\nimport Point from '../../graphics/structs/Point';\nimport Rect from '../../graphics/structs/Rect';\n\n/*\r\n  This method should try to keep cursor item as close as possible to its previous position\r\n*/\nexport default function CenterOnCursorTask(layoutOptionsTask, applyLayoutChangesTask, currentScrollPositionTask, cursorItemTask, alignDiagramTask, createTransformTask, scaleOptionTask) {\n  var _data = {\n      placeholderOffset: null\n    },\n    _transform;\n  function process() {\n    var snapRect,\n      layoutOptions = layoutOptionsTask.getOptions(),\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\n      treeItemPosition = alignDiagramTask.getItemPosition(cursorTreeItemId),\n      contentSize = new Size(alignDiagramTask.getContentSize()),\n      scrollPanelSize,\n      scaleOptions = scaleOptionTask.getOptions(),\n      scale = scaleOptions.scale;\n    _data.placeholderOffset = currentScrollPositionTask.getPlaceholderOffset();\n    if (layoutOptions.forceCenterOnCursor) {\n      _transform = createTransformTask.getTransform();\n      if (treeItemPosition != null) {\n        snapRect = getTransformedItemPosition(treeItemPosition.actualPosition);\n        snapRect.scale(scale);\n        contentSize.scale(scale);\n        scrollPanelSize = applyLayoutChangesTask.getScrollPanelSize();\n        _data.placeholderOffset = new Point(Math.max(Math.min(snapRect.horizontalCenter() - scrollPanelSize.width / 2, contentSize.width - scrollPanelSize.width), 0), Math.max(Math.min(snapRect.verticalCenter() - scrollPanelSize.height / 2, contentSize.height - scrollPanelSize.height), 0));\n      }\n    }\n    return true;\n  }\n  function getTransformedItemPosition(position) {\n    var result = false;\n    _transform.transformRect(position.x, position.y, position.width, position.height, true, this, function (x, y, width, height) {\n      result = new Rect(x, y, width, height);\n    });\n    return result;\n  }\n  function getPlaceholderOffset() {\n    return _data.placeholderOffset;\n  }\n  return {\n    process: process,\n    getPlaceholderOffset: getPlaceholderOffset\n  };\n}\n;","map":{"version":3,"names":["Size","Point","Rect","CenterOnCursorTask","layoutOptionsTask","applyLayoutChangesTask","currentScrollPositionTask","cursorItemTask","alignDiagramTask","createTransformTask","scaleOptionTask","_data","placeholderOffset","_transform","process","snapRect","layoutOptions","getOptions","cursorTreeItemId","getCursorTreeItem","treeItemPosition","getItemPosition","contentSize","getContentSize","scrollPanelSize","scaleOptions","scale","getPlaceholderOffset","forceCenterOnCursor","getTransform","getTransformedItemPosition","actualPosition","getScrollPanelSize","Math","max","min","horizontalCenter","width","verticalCenter","height","position","result","transformRect","x","y"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/layout/CenterOnCursorTask.js"],"sourcesContent":["import Size from '../../graphics/structs/Size';\r\nimport Point from '../../graphics/structs/Point';\r\nimport Rect from '../../graphics/structs/Rect';\r\n\r\n/*\r\n  This method should try to keep cursor item as close as possible to its previous position\r\n*/\r\nexport default function CenterOnCursorTask(layoutOptionsTask, applyLayoutChangesTask, currentScrollPositionTask, cursorItemTask, alignDiagramTask, createTransformTask, scaleOptionTask) {\r\n  var _data = {\r\n    placeholderOffset: null\r\n  },\r\n    _transform;\r\n\r\n  function process() {\r\n    var snapRect,\r\n      layoutOptions = layoutOptionsTask.getOptions(),\r\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\r\n      treeItemPosition = alignDiagramTask.getItemPosition(cursorTreeItemId),\r\n      contentSize = new Size(alignDiagramTask.getContentSize()),\r\n      scrollPanelSize,\r\n      scaleOptions = scaleOptionTask.getOptions(),\r\n      scale = scaleOptions.scale;\r\n\r\n    _data.placeholderOffset = currentScrollPositionTask.getPlaceholderOffset();\r\n\r\n    if (layoutOptions.forceCenterOnCursor) {\r\n      _transform = createTransformTask.getTransform();\r\n      if (treeItemPosition != null) {\r\n        snapRect = getTransformedItemPosition(treeItemPosition.actualPosition);\r\n        snapRect.scale(scale);\r\n        contentSize.scale(scale);\r\n        scrollPanelSize = applyLayoutChangesTask.getScrollPanelSize();\r\n        _data.placeholderOffset = new Point(\r\n          Math.max(Math.min(snapRect.horizontalCenter() - scrollPanelSize.width / 2, contentSize.width - scrollPanelSize.width), 0),\r\n          Math.max(Math.min(snapRect.verticalCenter() - scrollPanelSize.height / 2, contentSize.height - scrollPanelSize.height), 0)\r\n        );\r\n      }\r\n    }\r\n\r\n\r\n    return true;\r\n  }\r\n\r\n  function getTransformedItemPosition(position) {\r\n    var result = false;\r\n\r\n    _transform.transformRect(position.x, position.y, position.width, position.height, true,\r\n      this, function (x, y, width, height) {\r\n        result = new Rect(x, y, width, height);\r\n      }\r\n    );\r\n    return result;\r\n  }\r\n\r\n  function getPlaceholderOffset() {\r\n    return _data.placeholderOffset;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getPlaceholderOffset: getPlaceholderOffset\r\n  };\r\n};"],"mappings":"AAAA,OAAOA,IAAI,MAAM,6BAA6B;AAC9C,OAAOC,KAAK,MAAM,8BAA8B;AAChD,OAAOC,IAAI,MAAM,6BAA6B;;AAE9C;AACA;AACA;AACA,eAAe,SAASC,kBAAkBA,CAACC,iBAAiB,EAAEC,sBAAsB,EAAEC,yBAAyB,EAAEC,cAAc,EAAEC,gBAAgB,EAAEC,mBAAmB,EAAEC,eAAe,EAAE;EACvL,IAAIC,KAAK,GAAG;MACVC,iBAAiB,EAAE;IACrB,CAAC;IACCC,UAAU;EAEZ,SAASC,OAAOA,CAAA,EAAG;IACjB,IAAIC,QAAQ;MACVC,aAAa,GAAGZ,iBAAiB,CAACa,UAAU,CAAC,CAAC;MAC9CC,gBAAgB,GAAGX,cAAc,CAACY,iBAAiB,CAAC,CAAC;MACrDC,gBAAgB,GAAGZ,gBAAgB,CAACa,eAAe,CAACH,gBAAgB,CAAC;MACrEI,WAAW,GAAG,IAAItB,IAAI,CAACQ,gBAAgB,CAACe,cAAc,CAAC,CAAC,CAAC;MACzDC,eAAe;MACfC,YAAY,GAAGf,eAAe,CAACO,UAAU,CAAC,CAAC;MAC3CS,KAAK,GAAGD,YAAY,CAACC,KAAK;IAE5Bf,KAAK,CAACC,iBAAiB,GAAGN,yBAAyB,CAACqB,oBAAoB,CAAC,CAAC;IAE1E,IAAIX,aAAa,CAACY,mBAAmB,EAAE;MACrCf,UAAU,GAAGJ,mBAAmB,CAACoB,YAAY,CAAC,CAAC;MAC/C,IAAIT,gBAAgB,IAAI,IAAI,EAAE;QAC5BL,QAAQ,GAAGe,0BAA0B,CAACV,gBAAgB,CAACW,cAAc,CAAC;QACtEhB,QAAQ,CAACW,KAAK,CAACA,KAAK,CAAC;QACrBJ,WAAW,CAACI,KAAK,CAACA,KAAK,CAAC;QACxBF,eAAe,GAAGnB,sBAAsB,CAAC2B,kBAAkB,CAAC,CAAC;QAC7DrB,KAAK,CAACC,iBAAiB,GAAG,IAAIX,KAAK,CACjCgC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACpB,QAAQ,CAACqB,gBAAgB,CAAC,CAAC,GAAGZ,eAAe,CAACa,KAAK,GAAG,CAAC,EAAEf,WAAW,CAACe,KAAK,GAAGb,eAAe,CAACa,KAAK,CAAC,EAAE,CAAC,CAAC,EACzHJ,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACpB,QAAQ,CAACuB,cAAc,CAAC,CAAC,GAAGd,eAAe,CAACe,MAAM,GAAG,CAAC,EAAEjB,WAAW,CAACiB,MAAM,GAAGf,eAAe,CAACe,MAAM,CAAC,EAAE,CAAC,CAC3H,CAAC;MACH;IACF;IAGA,OAAO,IAAI;EACb;EAEA,SAAST,0BAA0BA,CAACU,QAAQ,EAAE;IAC5C,IAAIC,MAAM,GAAG,KAAK;IAElB5B,UAAU,CAAC6B,aAAa,CAACF,QAAQ,CAACG,CAAC,EAAEH,QAAQ,CAACI,CAAC,EAAEJ,QAAQ,CAACH,KAAK,EAAEG,QAAQ,CAACD,MAAM,EAAE,IAAI,EACpF,IAAI,EAAE,UAAUI,CAAC,EAAEC,CAAC,EAAEP,KAAK,EAAEE,MAAM,EAAE;MACnCE,MAAM,GAAG,IAAIvC,IAAI,CAACyC,CAAC,EAAEC,CAAC,EAAEP,KAAK,EAAEE,MAAM,CAAC;IACxC,CACF,CAAC;IACD,OAAOE,MAAM;EACf;EAEA,SAASd,oBAAoBA,CAAA,EAAG;IAC9B,OAAOhB,KAAK,CAACC,iBAAiB;EAChC;EAEA,OAAO;IACLE,OAAO,EAAEA,OAAO;IAChBa,oBAAoB,EAAEA;EACxB,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}