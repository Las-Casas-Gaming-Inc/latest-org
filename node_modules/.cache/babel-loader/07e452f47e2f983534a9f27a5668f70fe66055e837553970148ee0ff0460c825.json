{"ast":null,"code":"import FamEventArgs from './events/FamEventArgs';\nimport { getElementOffset } from './graphics/dom';\nimport Rect from './graphics/structs/Rect';\nexport default function FamEventArgsFactory(data, oldTreeItemId, newTreeItemId, name) {\n  var result = new FamEventArgs(),\n    combinedContextsTask = data.tasks.getTask(\"CombinedContextsTask\"),\n    alignDiagramTask = data.tasks.getTask(\"AlignDiagramTask\"),\n    logicalFamilyTask = data.tasks.getTask(\"LogicalFamilyTask\"),\n    oldItemConfig = combinedContextsTask.getConfig(oldTreeItemId),\n    newItemConfig = combinedContextsTask.getConfig(newTreeItemId),\n    family = logicalFamilyTask.getLogicalFamily(),\n    itemPosition,\n    offset,\n    panelOffset;\n  if (oldItemConfig && oldItemConfig.id != null) {\n    result.oldContext = oldItemConfig;\n  }\n  if (newItemConfig && newItemConfig.id != null) {\n    result.context = newItemConfig;\n    family.loopParents(this, newItemConfig.id, function (itemid, item, levelIndex) {\n      if (levelIndex > 0) {\n        return family.BREAK;\n      }\n      result.parentItems.push(combinedContextsTask.getConfig(itemid));\n    });\n    family.loopChildren(this, newItemConfig.id, function (itemid, item, levelIndex) {\n      if (levelIndex > 0) {\n        return family.BREAK;\n      }\n      result.childrenItems.push(combinedContextsTask.getConfig(itemid));\n    });\n    panelOffset = getElementOffset(data.layout.mousePanel);\n    offset = getElementOffset(data.layout.element);\n    itemPosition = alignDiagramTask.getItemPosition(newTreeItemId);\n    result.position = new Rect(itemPosition.actualPosition).translate(panelOffset.left, panelOffset.top).translate(-offset.left, -offset.top);\n  }\n  if (name != null) {\n    result.name = name;\n  }\n  return result;\n}\n;","map":{"version":3,"names":["FamEventArgs","getElementOffset","Rect","FamEventArgsFactory","data","oldTreeItemId","newTreeItemId","name","result","combinedContextsTask","tasks","getTask","alignDiagramTask","logicalFamilyTask","oldItemConfig","getConfig","newItemConfig","family","getLogicalFamily","itemPosition","offset","panelOffset","id","oldContext","context","loopParents","itemid","item","levelIndex","BREAK","parentItems","push","loopChildren","childrenItems","layout","mousePanel","element","getItemPosition","position","actualPosition","translate","left","top"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/FamEventArgsFactory.js"],"sourcesContent":["import FamEventArgs from './events/FamEventArgs';\r\nimport { getElementOffset } from './graphics/dom';\r\nimport Rect from './graphics/structs/Rect';\r\n\r\nexport default function FamEventArgsFactory(data, oldTreeItemId, newTreeItemId, name) {\r\n  var result = new FamEventArgs(),\r\n    combinedContextsTask = data.tasks.getTask(\"CombinedContextsTask\"),\r\n    alignDiagramTask = data.tasks.getTask(\"AlignDiagramTask\"),\r\n    logicalFamilyTask = data.tasks.getTask(\"LogicalFamilyTask\"),\r\n    oldItemConfig = combinedContextsTask.getConfig(oldTreeItemId),\r\n    newItemConfig = combinedContextsTask.getConfig(newTreeItemId),\r\n    family = logicalFamilyTask.getLogicalFamily(),\r\n    itemPosition,\r\n    offset,\r\n    panelOffset;\r\n\r\n  if (oldItemConfig && oldItemConfig.id != null) {\r\n    result.oldContext = oldItemConfig;\r\n  }\r\n\r\n  if (newItemConfig && newItemConfig.id != null) {\r\n    result.context = newItemConfig;\r\n\r\n    family.loopParents(this, newItemConfig.id, function (itemid, item, levelIndex) {\r\n      if (levelIndex > 0) {\r\n        return family.BREAK;\r\n      }\r\n      result.parentItems.push(combinedContextsTask.getConfig(itemid));\r\n    });\r\n\r\n    family.loopChildren(this, newItemConfig.id, function (itemid, item, levelIndex) {\r\n      if (levelIndex > 0) {\r\n        return family.BREAK;\r\n      }\r\n      result.childrenItems.push(combinedContextsTask.getConfig(itemid));\r\n    });\r\n\r\n    panelOffset = getElementOffset(data.layout.mousePanel);\r\n    offset = getElementOffset(data.layout.element);\r\n    itemPosition = alignDiagramTask.getItemPosition(newTreeItemId);\r\n    result.position = new Rect(itemPosition.actualPosition)\r\n      .translate(panelOffset.left, panelOffset.top)\r\n      .translate(-offset.left, -offset.top);\r\n  }\r\n\r\n  if (name != null) {\r\n    result.name = name;\r\n  }\r\n\r\n  return result;\r\n};"],"mappings":"AAAA,OAAOA,YAAY,MAAM,uBAAuB;AAChD,SAASC,gBAAgB,QAAQ,gBAAgB;AACjD,OAAOC,IAAI,MAAM,yBAAyB;AAE1C,eAAe,SAASC,mBAAmBA,CAACC,IAAI,EAAEC,aAAa,EAAEC,aAAa,EAAEC,IAAI,EAAE;EACpF,IAAIC,MAAM,GAAG,IAAIR,YAAY,CAAC,CAAC;IAC7BS,oBAAoB,GAAGL,IAAI,CAACM,KAAK,CAACC,OAAO,CAAC,sBAAsB,CAAC;IACjEC,gBAAgB,GAAGR,IAAI,CAACM,KAAK,CAACC,OAAO,CAAC,kBAAkB,CAAC;IACzDE,iBAAiB,GAAGT,IAAI,CAACM,KAAK,CAACC,OAAO,CAAC,mBAAmB,CAAC;IAC3DG,aAAa,GAAGL,oBAAoB,CAACM,SAAS,CAACV,aAAa,CAAC;IAC7DW,aAAa,GAAGP,oBAAoB,CAACM,SAAS,CAACT,aAAa,CAAC;IAC7DW,MAAM,GAAGJ,iBAAiB,CAACK,gBAAgB,CAAC,CAAC;IAC7CC,YAAY;IACZC,MAAM;IACNC,WAAW;EAEb,IAAIP,aAAa,IAAIA,aAAa,CAACQ,EAAE,IAAI,IAAI,EAAE;IAC7Cd,MAAM,CAACe,UAAU,GAAGT,aAAa;EACnC;EAEA,IAAIE,aAAa,IAAIA,aAAa,CAACM,EAAE,IAAI,IAAI,EAAE;IAC7Cd,MAAM,CAACgB,OAAO,GAAGR,aAAa;IAE9BC,MAAM,CAACQ,WAAW,CAAC,IAAI,EAAET,aAAa,CAACM,EAAE,EAAE,UAAUI,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAE;MAC7E,IAAIA,UAAU,GAAG,CAAC,EAAE;QAClB,OAAOX,MAAM,CAACY,KAAK;MACrB;MACArB,MAAM,CAACsB,WAAW,CAACC,IAAI,CAACtB,oBAAoB,CAACM,SAAS,CAACW,MAAM,CAAC,CAAC;IACjE,CAAC,CAAC;IAEFT,MAAM,CAACe,YAAY,CAAC,IAAI,EAAEhB,aAAa,CAACM,EAAE,EAAE,UAAUI,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAE;MAC9E,IAAIA,UAAU,GAAG,CAAC,EAAE;QAClB,OAAOX,MAAM,CAACY,KAAK;MACrB;MACArB,MAAM,CAACyB,aAAa,CAACF,IAAI,CAACtB,oBAAoB,CAACM,SAAS,CAACW,MAAM,CAAC,CAAC;IACnE,CAAC,CAAC;IAEFL,WAAW,GAAGpB,gBAAgB,CAACG,IAAI,CAAC8B,MAAM,CAACC,UAAU,CAAC;IACtDf,MAAM,GAAGnB,gBAAgB,CAACG,IAAI,CAAC8B,MAAM,CAACE,OAAO,CAAC;IAC9CjB,YAAY,GAAGP,gBAAgB,CAACyB,eAAe,CAAC/B,aAAa,CAAC;IAC9DE,MAAM,CAAC8B,QAAQ,GAAG,IAAIpC,IAAI,CAACiB,YAAY,CAACoB,cAAc,CAAC,CACpDC,SAAS,CAACnB,WAAW,CAACoB,IAAI,EAAEpB,WAAW,CAACqB,GAAG,CAAC,CAC5CF,SAAS,CAAC,CAACpB,MAAM,CAACqB,IAAI,EAAE,CAACrB,MAAM,CAACsB,GAAG,CAAC;EACzC;EAEA,IAAInC,IAAI,IAAI,IAAI,EAAE;IAChBC,MAAM,CAACD,IAAI,GAAGA,IAAI;EACpB;EAEA,OAAOC,MAAM;AACf;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}