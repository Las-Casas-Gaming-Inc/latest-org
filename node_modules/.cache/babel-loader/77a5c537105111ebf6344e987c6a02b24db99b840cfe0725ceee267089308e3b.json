{"ast":null,"code":"import Rect from '../../graphics/structs/Rect';\nimport Point from '../../graphics/structs/Point';\nimport Size from '../../graphics/structs/Size';\nimport ObjectReader from '../../readers/ObjectReader';\nimport ValueReader from '../../readers/ValueReader';\nexport default function ViewPortPlacementTask(scaleOptionTask, centerOnCursorTask, createTransformTask, applyLayoutChangesTask) {\n  var _data = {},\n    _hash = {};\n  var _dataTemplate = new ObjectReader({\n    viewPortPosition: new ObjectReader({\n      x: new ValueReader([\"number\"], false, 0),\n      y: new ValueReader([\"number\"], false, 0),\n      width: new ValueReader([\"number\"], false, 0),\n      height: new ValueReader([\"number\"], false, 0)\n    }, false, new Rect(0, 0, 0, 0))\n  });\n  function process() {\n    var context = {\n      isChanged: false,\n      hash: _hash\n    };\n    _data = _dataTemplate.read(_data, getTransformedPosition(), \"options\", context);\n    return context.isChanged;\n  }\n  function getTransformedPosition() {\n    var viewPortPosition,\n      transform = createTransformTask.getTransform(),\n      position = getPosition();\n    if (position != null) {\n      transform.transformRect(position.x, position.y, position.width, position.height, false, this, function (x, y, width, height) {\n        viewPortPosition = new Rect(x, y, width, height);\n      });\n    }\n    return {\n      viewPortPosition: viewPortPosition\n    };\n  }\n  function getPosition() {\n    var scaleOptions = scaleOptionTask.getOptions(),\n      scale = scaleOptions.scale,\n      placeholderOffset = centerOnCursorTask ? new Point(centerOnCursorTask.getPlaceholderOffset()) : new Point(0, 0),\n      optimalPanelSize = new Size(applyLayoutChangesTask.getOptimalPanelSize());\n    placeholderOffset.scale(1.0 / scale);\n    optimalPanelSize.scale(1.0 / scale);\n    var result = new Rect(placeholderOffset.x, placeholderOffset.y, optimalPanelSize.width, optimalPanelSize.height);\n    return result;\n  }\n  function getViewPortPosition() {\n    return _data.viewPortPosition;\n  }\n  return {\n    process: process,\n    getViewPortPosition: getViewPortPosition\n  };\n}\n;","map":{"version":3,"names":["Rect","Point","Size","ObjectReader","ValueReader","ViewPortPlacementTask","scaleOptionTask","centerOnCursorTask","createTransformTask","applyLayoutChangesTask","_data","_hash","_dataTemplate","viewPortPosition","x","y","width","height","process","context","isChanged","hash","read","getTransformedPosition","transform","getTransform","position","getPosition","transformRect","scaleOptions","getOptions","scale","placeholderOffset","getPlaceholderOffset","optimalPanelSize","getOptimalPanelSize","result","getViewPortPosition"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/layout/ViewPortPlacementTask.js"],"sourcesContent":["import Rect from '../../graphics/structs/Rect';\r\nimport Point from '../../graphics/structs/Point';\r\nimport Size from '../../graphics/structs/Size';\r\nimport ObjectReader from '../../readers/ObjectReader';\r\nimport ValueReader from '../../readers/ValueReader';\r\n\r\nexport default function ViewPortPlacementTask(scaleOptionTask, centerOnCursorTask, createTransformTask, applyLayoutChangesTask) {\r\n  var _data = {},\r\n    _hash = {};\r\n\r\n  var _dataTemplate = new ObjectReader({\r\n    viewPortPosition: new ObjectReader({\r\n      x: new ValueReader([\"number\"], false, 0),\r\n      y: new ValueReader([\"number\"], false, 0),\r\n      width: new ValueReader([\"number\"], false, 0),\r\n      height: new ValueReader([\"number\"], false, 0)\r\n    }, false, new Rect(0, 0, 0, 0))\r\n  });\r\n\r\n  function process() {\r\n    var context = {\r\n      isChanged: false,\r\n      hash: _hash\r\n    };\r\n\r\n    _data = _dataTemplate.read(_data, getTransformedPosition(), \"options\", context);\r\n\r\n    return context.isChanged;\r\n  }\r\n\r\n  function getTransformedPosition() {\r\n    var viewPortPosition,\r\n      transform = createTransformTask.getTransform(),\r\n      position = getPosition();\r\n    if(position != null ) {\r\n      transform.transformRect(position.x, position.y, position.width, position.height, false,\r\n        this, function (x, y, width, height) { \r\n          viewPortPosition = new Rect(x, y, width, height);\r\n        });\r\n    }\r\n    return { viewPortPosition: viewPortPosition };\r\n  }\r\n\r\n  function getPosition() {\r\n    var scaleOptions = scaleOptionTask.getOptions(),\r\n      scale = scaleOptions.scale,\r\n      placeholderOffset = centerOnCursorTask ? new Point(centerOnCursorTask.getPlaceholderOffset()) : new Point(0, 0),\r\n      optimalPanelSize = new Size(applyLayoutChangesTask.getOptimalPanelSize());\r\n\r\n    placeholderOffset.scale(1.0 / scale);\r\n    optimalPanelSize.scale(1.0 / scale);\r\n\r\n    var result = new Rect(\r\n      placeholderOffset.x,\r\n      placeholderOffset.y,\r\n      optimalPanelSize.width,\r\n      optimalPanelSize.height\r\n    );\r\n    return result;\r\n  }\r\n\r\n  function getViewPortPosition() {\r\n    return _data.viewPortPosition;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getViewPortPosition: getViewPortPosition\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}