{"ast":null,"code":"import ArrayReader from '../../../readers/ArrayReader';\nimport ValueReader from '../../../readers/ValueReader';\nimport ObjectReader from '../../../readers/ObjectReader';\nimport EnumerationReader from '../../../readers/EnumerationReader';\nimport { ZOrderType, AnnotationType } from '../../../enums';\nexport default function LabelAnnotationOptionTask(splitAnnotationsOptionTask, logicalFamilyTask, defaultLabelAnnotationConfig) {\n  var _data = {\n      annotations: [],\n      configs: {},\n      maximumId: null\n    },\n    _hash = {};\n  var _dataTemplate = new ArrayReader(new ObjectReader({\n    zOrderType: new EnumerationReader(ZOrderType, false, defaultLabelAnnotationConfig.zOrderType),\n    fromItem: new ValueReader([\"string\", \"number\"], true),\n    toItems: new ArrayReader(new ValueReader([\"string\", \"number\"], true), true),\n    title: new ValueReader([\"string\"], true),\n    itemTitleColor: new ValueReader([\"string\"], false, defaultLabelAnnotationConfig.itemTitleColor),\n    templateName: new ValueReader([\"string\"], true)\n  }, false), false, null, true);\n  function process() {\n    var context = {\n        isChanged: false,\n        hash: _hash,\n        sourceHash: {}\n      },\n      maximumId = logicalFamilyTask.getMaximumId(),\n      index,\n      len,\n      annotation;\n    _data.annotations = _dataTemplate.read(_data.annotations, splitAnnotationsOptionTask.getAnnotations(AnnotationType.Label), \"annotations\", context);\n    _data.configs = {};\n\n    /* here we assign unique id to every annotation used in layout\r\n      and populate configs hash mapping id to source annotation\r\n      these source items used as context objects in rendering cycle\r\n    */\n    var sourceItems = context.sourceHash.annotations;\n    for (index = 0, len = _data.annotations.length; index < len; index += 1) {\n      annotation = _data.annotations[index];\n      maximumId += 1;\n      annotation.id = maximumId;\n      _data.configs[annotation.id] = sourceItems[index];\n    }\n    _data.maximumId = maximumId;\n    return context.isChanged;\n  }\n  function getAnnotations() {\n    return _data.annotations;\n  }\n  function getMaximumId() {\n    return _data.maximumId;\n  }\n  function getConfig(itemId) {\n    return _data.configs[itemId];\n  }\n  return {\n    process: process,\n    getAnnotations: getAnnotations,\n    getMaximumId: getMaximumId,\n    getConfig: getConfig\n  };\n}\n;","map":{"version":3,"names":["ArrayReader","ValueReader","ObjectReader","EnumerationReader","ZOrderType","AnnotationType","LabelAnnotationOptionTask","splitAnnotationsOptionTask","logicalFamilyTask","defaultLabelAnnotationConfig","_data","annotations","configs","maximumId","_hash","_dataTemplate","zOrderType","fromItem","toItems","title","itemTitleColor","templateName","process","context","isChanged","hash","sourceHash","getMaximumId","index","len","annotation","read","getAnnotations","Label","sourceItems","length","id","getConfig","itemId"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/options/annotations/LabelAnnotationOptionTask.js"],"sourcesContent":["import ArrayReader from '../../../readers/ArrayReader';\r\nimport ValueReader from '../../../readers/ValueReader';\r\nimport ObjectReader from '../../../readers/ObjectReader';\r\nimport EnumerationReader from '../../../readers/EnumerationReader';\r\nimport {ZOrderType, AnnotationType} from '../../../enums';\r\n\r\nexport default function LabelAnnotationOptionTask(splitAnnotationsOptionTask, logicalFamilyTask, defaultLabelAnnotationConfig) {\r\n  var _data = {\r\n    annotations: [],\r\n    configs: {},\r\n    maximumId: null\r\n  },\r\n    _hash = {};\r\n\r\n  var _dataTemplate = new ArrayReader(\r\n    new ObjectReader({\r\n      zOrderType: new EnumerationReader(ZOrderType, false, defaultLabelAnnotationConfig.zOrderType),\r\n      fromItem: new ValueReader([\"string\", \"number\"], true),\r\n      toItems: new ArrayReader(\r\n        new ValueReader([\"string\", \"number\"], true),\r\n        true\r\n      ),\r\n      title: new ValueReader([\"string\"], true),\r\n      itemTitleColor: new ValueReader([\"string\"], false, defaultLabelAnnotationConfig.itemTitleColor),\r\n      templateName: new ValueReader([\"string\"], true)\r\n    },\r\n      false\r\n    ),\r\n    false,\r\n    null,\r\n    true\r\n  );\r\n\r\n\r\n  function process() {\r\n    var context = {\r\n      isChanged: false,\r\n      hash: _hash,\r\n      sourceHash: {}\r\n    },\r\n      maximumId = logicalFamilyTask.getMaximumId(),\r\n      index, len, annotation;\r\n\r\n    _data.annotations = _dataTemplate.read(_data.annotations, splitAnnotationsOptionTask.getAnnotations(AnnotationType.Label), \"annotations\", context);\r\n    _data.configs = {};\r\n\r\n    /* here we assign unique id to every annotation used in layout\r\n      and populate configs hash mapping id to source annotation\r\n      these source items used as context objects in rendering cycle\r\n    */\r\n    var sourceItems = context.sourceHash.annotations;\r\n    for (index = 0, len = _data.annotations.length; index < len; index += 1) {\r\n      annotation = _data.annotations[index];\r\n      maximumId += 1;\r\n      annotation.id = maximumId;\r\n\r\n      _data.configs[annotation.id] = sourceItems[index];\r\n    }\r\n\r\n    _data.maximumId = maximumId;\r\n\r\n    return context.isChanged;\r\n  }\r\n\r\n  function getAnnotations() {\r\n    return _data.annotations;\r\n  }\r\n\r\n  function getMaximumId() {\r\n    return _data.maximumId;\r\n  }\r\n\r\n  function getConfig(itemId) {\r\n    return _data.configs[itemId];\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getAnnotations: getAnnotations,\r\n    getMaximumId: getMaximumId,\r\n    getConfig: getConfig\r\n  };\r\n};"],"mappings":"AAAA,OAAOA,WAAW,MAAM,8BAA8B;AACtD,OAAOC,WAAW,MAAM,8BAA8B;AACtD,OAAOC,YAAY,MAAM,+BAA+B;AACxD,OAAOC,iBAAiB,MAAM,oCAAoC;AAClE,SAAQC,UAAU,EAAEC,cAAc,QAAO,gBAAgB;AAEzD,eAAe,SAASC,yBAAyBA,CAACC,0BAA0B,EAAEC,iBAAiB,EAAEC,4BAA4B,EAAE;EAC7H,IAAIC,KAAK,GAAG;MACVC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,CAAC,CAAC;MACXC,SAAS,EAAE;IACb,CAAC;IACCC,KAAK,GAAG,CAAC,CAAC;EAEZ,IAAIC,aAAa,GAAG,IAAIf,WAAW,CACjC,IAAIE,YAAY,CAAC;IACfc,UAAU,EAAE,IAAIb,iBAAiB,CAACC,UAAU,EAAE,KAAK,EAAEK,4BAA4B,CAACO,UAAU,CAAC;IAC7FC,QAAQ,EAAE,IAAIhB,WAAW,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC;IACrDiB,OAAO,EAAE,IAAIlB,WAAW,CACtB,IAAIC,WAAW,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC,EAC3C,IACF,CAAC;IACDkB,KAAK,EAAE,IAAIlB,WAAW,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC;IACxCmB,cAAc,EAAE,IAAInB,WAAW,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAEQ,4BAA4B,CAACW,cAAc,CAAC;IAC/FC,YAAY,EAAE,IAAIpB,WAAW,CAAC,CAAC,QAAQ,CAAC,EAAE,IAAI;EAChD,CAAC,EACC,KACF,CAAC,EACD,KAAK,EACL,IAAI,EACJ,IACF,CAAC;EAGD,SAASqB,OAAOA,CAAA,EAAG;IACjB,IAAIC,OAAO,GAAG;QACZC,SAAS,EAAE,KAAK;QAChBC,IAAI,EAAEX,KAAK;QACXY,UAAU,EAAE,CAAC;MACf,CAAC;MACCb,SAAS,GAAGL,iBAAiB,CAACmB,YAAY,CAAC,CAAC;MAC5CC,KAAK;MAAEC,GAAG;MAAEC,UAAU;IAExBpB,KAAK,CAACC,WAAW,GAAGI,aAAa,CAACgB,IAAI,CAACrB,KAAK,CAACC,WAAW,EAAEJ,0BAA0B,CAACyB,cAAc,CAAC3B,cAAc,CAAC4B,KAAK,CAAC,EAAE,aAAa,EAAEV,OAAO,CAAC;IAClJb,KAAK,CAACE,OAAO,GAAG,CAAC,CAAC;;IAElB;AACJ;AACA;AACA;IACI,IAAIsB,WAAW,GAAGX,OAAO,CAACG,UAAU,CAACf,WAAW;IAChD,KAAKiB,KAAK,GAAG,CAAC,EAAEC,GAAG,GAAGnB,KAAK,CAACC,WAAW,CAACwB,MAAM,EAAEP,KAAK,GAAGC,GAAG,EAAED,KAAK,IAAI,CAAC,EAAE;MACvEE,UAAU,GAAGpB,KAAK,CAACC,WAAW,CAACiB,KAAK,CAAC;MACrCf,SAAS,IAAI,CAAC;MACdiB,UAAU,CAACM,EAAE,GAAGvB,SAAS;MAEzBH,KAAK,CAACE,OAAO,CAACkB,UAAU,CAACM,EAAE,CAAC,GAAGF,WAAW,CAACN,KAAK,CAAC;IACnD;IAEAlB,KAAK,CAACG,SAAS,GAAGA,SAAS;IAE3B,OAAOU,OAAO,CAACC,SAAS;EAC1B;EAEA,SAASQ,cAAcA,CAAA,EAAG;IACxB,OAAOtB,KAAK,CAACC,WAAW;EAC1B;EAEA,SAASgB,YAAYA,CAAA,EAAG;IACtB,OAAOjB,KAAK,CAACG,SAAS;EACxB;EAEA,SAASwB,SAASA,CAACC,MAAM,EAAE;IACzB,OAAO5B,KAAK,CAACE,OAAO,CAAC0B,MAAM,CAAC;EAC9B;EAEA,OAAO;IACLhB,OAAO,EAAEA,OAAO;IAChBU,cAAc,EAAEA,cAAc;IAC9BL,YAAY,EAAEA,YAAY;IAC1BU,SAAS,EAAEA;EACb,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}