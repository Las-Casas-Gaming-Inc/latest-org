{"ast":null,"code":"import Rect from '../../../graphics/structs/Rect';\nimport Pile from '../../../algorithms/Pile';\nexport default function CollinearVectorBundle() {\n  var _boundingRect = new Rect(),\n    _vectors = [],\n    _continuations = [];\n  function addVector(vector, continuation) {\n    _vectors.push(vector);\n    _continuations.push(continuation);\n    _boundingRect.addRect(vector.from.x, vector.from.y);\n    _boundingRect.addRect(vector.to.x, vector.to.y);\n  }\n  function loopProjections(callback) {\n    // calback(from, to)\n    var index, len, vector;\n    if (_boundingRect.width > _boundingRect.height) {\n      for (index = 0, len = _vectors.length; index < len; index += 1) {\n        vector = _vectors[index];\n        callback(vector.from.x, vector.to.x, _continuations[index]);\n      }\n    } else {\n      for (index = 0, len = _vectors.length; index < len; index += 1) {\n        vector = _vectors[index];\n        callback(vector.from.y, vector.to.y, _continuations[index]);\n      }\n    }\n  }\n  function resolve() {\n    if (_vectors.length == 1) {\n      _continuations[0](0, 1, 1);\n    } else {\n      var stackSegments = Pile();\n      loopProjections(function (from, to, continuation) {\n        stackSegments.add(from, to, continuation);\n      });\n      var totalOffset = stackSegments.resolve(this, function (from, to, context, offset, bundleSize, direction) {\n        context(offset, bundleSize, direction);\n      });\n    }\n  }\n  return {\n    addVector: addVector,\n    resolve: resolve\n  };\n}\n;","map":{"version":3,"names":["Rect","Pile","CollinearVectorBundle","_boundingRect","_vectors","_continuations","addVector","vector","continuation","push","addRect","from","x","y","to","loopProjections","callback","index","len","width","height","length","resolve","stackSegments","add","totalOffset","context","offset","bundleSize","direction"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/tasks/renders/offsetResolver/CollinearVectorBundle.js"],"sourcesContent":["import Rect from '../../../graphics/structs/Rect';\r\nimport Pile from '../../../algorithms/Pile';\r\n\r\nexport default function CollinearVectorBundle() {\r\n  var _boundingRect = new Rect(),\r\n    _vectors = [],\r\n    _continuations = [];\r\n\r\n  function addVector(vector, continuation) {\r\n    _vectors.push(vector);\r\n    _continuations.push(continuation);\r\n\r\n    _boundingRect.addRect(vector.from.x, vector.from.y);\r\n    _boundingRect.addRect(vector.to.x, vector.to.y);\r\n  }\r\n\r\n  function loopProjections(callback) { // calback(from, to)\r\n    var index, len,\r\n      vector;\r\n    if (_boundingRect.width > _boundingRect.height) {\r\n      for (index = 0, len = _vectors.length; index < len; index += 1) {\r\n        vector = _vectors[index];\r\n        callback(vector.from.x, vector.to.x, _continuations[index]);\r\n      }\r\n    } else {\r\n      for (index = 0, len = _vectors.length; index < len; index += 1) {\r\n        vector = _vectors[index];\r\n        callback(vector.from.y, vector.to.y, _continuations[index]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function resolve() {\r\n    if (_vectors.length == 1) {\r\n      _continuations[0](0, 1, 1);\r\n    } else {\r\n      var stackSegments = Pile();\r\n      loopProjections(function (from, to, continuation) {\r\n        stackSegments.add(from, to, continuation);\r\n      });\r\n\r\n      var totalOffset = stackSegments.resolve(this, function (from, to, context, offset, bundleSize, direction) {\r\n        context(offset, bundleSize, direction);\r\n      });\r\n    }\r\n  }\r\n\r\n  return {\r\n    addVector: addVector,\r\n    resolve: resolve\r\n  };\r\n};"],"mappings":"AAAA,OAAOA,IAAI,MAAM,gCAAgC;AACjD,OAAOC,IAAI,MAAM,0BAA0B;AAE3C,eAAe,SAASC,qBAAqBA,CAAA,EAAG;EAC9C,IAAIC,aAAa,GAAG,IAAIH,IAAI,CAAC,CAAC;IAC5BI,QAAQ,GAAG,EAAE;IACbC,cAAc,GAAG,EAAE;EAErB,SAASC,SAASA,CAACC,MAAM,EAAEC,YAAY,EAAE;IACvCJ,QAAQ,CAACK,IAAI,CAACF,MAAM,CAAC;IACrBF,cAAc,CAACI,IAAI,CAACD,YAAY,CAAC;IAEjCL,aAAa,CAACO,OAAO,CAACH,MAAM,CAACI,IAAI,CAACC,CAAC,EAAEL,MAAM,CAACI,IAAI,CAACE,CAAC,CAAC;IACnDV,aAAa,CAACO,OAAO,CAACH,MAAM,CAACO,EAAE,CAACF,CAAC,EAAEL,MAAM,CAACO,EAAE,CAACD,CAAC,CAAC;EACjD;EAEA,SAASE,eAAeA,CAACC,QAAQ,EAAE;IAAE;IACnC,IAAIC,KAAK,EAAEC,GAAG,EACZX,MAAM;IACR,IAAIJ,aAAa,CAACgB,KAAK,GAAGhB,aAAa,CAACiB,MAAM,EAAE;MAC9C,KAAKH,KAAK,GAAG,CAAC,EAAEC,GAAG,GAAGd,QAAQ,CAACiB,MAAM,EAAEJ,KAAK,GAAGC,GAAG,EAAED,KAAK,IAAI,CAAC,EAAE;QAC9DV,MAAM,GAAGH,QAAQ,CAACa,KAAK,CAAC;QACxBD,QAAQ,CAACT,MAAM,CAACI,IAAI,CAACC,CAAC,EAAEL,MAAM,CAACO,EAAE,CAACF,CAAC,EAAEP,cAAc,CAACY,KAAK,CAAC,CAAC;MAC7D;IACF,CAAC,MAAM;MACL,KAAKA,KAAK,GAAG,CAAC,EAAEC,GAAG,GAAGd,QAAQ,CAACiB,MAAM,EAAEJ,KAAK,GAAGC,GAAG,EAAED,KAAK,IAAI,CAAC,EAAE;QAC9DV,MAAM,GAAGH,QAAQ,CAACa,KAAK,CAAC;QACxBD,QAAQ,CAACT,MAAM,CAACI,IAAI,CAACE,CAAC,EAAEN,MAAM,CAACO,EAAE,CAACD,CAAC,EAAER,cAAc,CAACY,KAAK,CAAC,CAAC;MAC7D;IACF;EACF;EAEA,SAASK,OAAOA,CAAA,EAAG;IACjB,IAAIlB,QAAQ,CAACiB,MAAM,IAAI,CAAC,EAAE;MACxBhB,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC,MAAM;MACL,IAAIkB,aAAa,GAAGtB,IAAI,CAAC,CAAC;MAC1Bc,eAAe,CAAC,UAAUJ,IAAI,EAAEG,EAAE,EAAEN,YAAY,EAAE;QAChDe,aAAa,CAACC,GAAG,CAACb,IAAI,EAAEG,EAAE,EAAEN,YAAY,CAAC;MAC3C,CAAC,CAAC;MAEF,IAAIiB,WAAW,GAAGF,aAAa,CAACD,OAAO,CAAC,IAAI,EAAE,UAAUX,IAAI,EAAEG,EAAE,EAAEY,OAAO,EAAEC,MAAM,EAAEC,UAAU,EAAEC,SAAS,EAAE;QACxGH,OAAO,CAACC,MAAM,EAAEC,UAAU,EAAEC,SAAS,CAAC;MACxC,CAAC,CAAC;IACJ;EACF;EAEA,OAAO;IACLvB,SAAS,EAAEA,SAAS;IACpBgB,OAAO,EAAEA;EACX,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}