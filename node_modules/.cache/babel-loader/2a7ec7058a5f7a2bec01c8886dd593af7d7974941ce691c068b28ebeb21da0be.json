{"ast":null,"code":"import { SelectionPathMode, Visibility } from '../../../enums';\nexport default function OrgSelectionPathItemsTask(navigationFamilyTask, cursorItemTask, selectedItemsTask, cursorSelectionPathModeOptionTask) {\n  var _data = {\n    items: []\n  };\n  function process() {\n    var selectionPathMode = cursorSelectionPathModeOptionTask.getSelectionPathMode(),\n      navigationFamily = navigationFamilyTask.getLogicalFamily(),\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\n      selectedItems = selectedItemsTask.getItems().slice(0);\n    selectedItems.push(cursorTreeItemId);\n    _data.items = getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode);\n    return true;\n  }\n  function getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode) {\n    var result = [],\n      processed = {},\n      selectedItem,\n      index,\n      len;\n    for (index = 0, len = selectedItems.length; index < len; index += 1) {\n      selectedItem = selectedItems[index];\n      /* show cursor full stack */\n      switch (selectionPathMode) {\n        case SelectionPathMode.None:\n          break;\n        case SelectionPathMode.FullStack:\n          /* select all parents up to the root */\n          navigationFamily.loopParents(this, selectedItem, function (parentItemId, parentItem) {\n            if (processed[parentItemId] != null) {\n              return navigationFamily.SKIP;\n            }\n            if (parentItem.visibility != Visibility.Invisible) {\n              result.push(parentItemId);\n            }\n            processed[parentItemId] = true;\n          });\n          break;\n      }\n    }\n    return result;\n  }\n  function getItems() {\n    return _data.items;\n  }\n  return {\n    process: process,\n    getItems: getItems\n  };\n}\n;","map":{"version":3,"names":["SelectionPathMode","Visibility","OrgSelectionPathItemsTask","navigationFamilyTask","cursorItemTask","selectedItemsTask","cursorSelectionPathModeOptionTask","_data","items","process","selectionPathMode","getSelectionPathMode","navigationFamily","getLogicalFamily","cursorTreeItemId","getCursorTreeItem","selectedItems","getItems","slice","push","getSelectionPathItems","result","processed","selectedItem","index","len","length","None","FullStack","loopParents","parentItemId","parentItem","SKIP","visibility","Invisible"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/tasks/transformations/selection/OrgSelectionPathItemsTask.js"],"sourcesContent":["import { SelectionPathMode, Visibility } from '../../../enums';\r\n\r\nexport default function OrgSelectionPathItemsTask(navigationFamilyTask, cursorItemTask, selectedItemsTask, cursorSelectionPathModeOptionTask) {\r\n  var _data = {\r\n    items: []\r\n  };\r\n\r\n  function process() {\r\n    var selectionPathMode = cursorSelectionPathModeOptionTask.getSelectionPathMode(),\r\n      navigationFamily = navigationFamilyTask.getLogicalFamily(),\r\n      cursorTreeItemId = cursorItemTask.getCursorTreeItem(),\r\n      selectedItems = selectedItemsTask.getItems().slice(0);\r\n\r\n    selectedItems.push(cursorTreeItemId);\r\n\r\n    _data.items = getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode);\r\n\r\n    return true;\r\n  }\r\n\r\n  function getSelectionPathItems(selectedItems, navigationFamily, selectionPathMode) {\r\n    var result = [],\r\n      processed = {},\r\n      selectedItem,\r\n      index, len;\r\n\r\n    for (index = 0, len = selectedItems.length; index < len; index += 1) {\r\n      selectedItem = selectedItems[index];\r\n      /* show cursor full stack */\r\n      switch (selectionPathMode) {\r\n        case SelectionPathMode.None:\r\n          break;\r\n        case SelectionPathMode.FullStack:\r\n          /* select all parents up to the root */\r\n          navigationFamily.loopParents(this, selectedItem, function (parentItemId, parentItem) {\r\n            if (processed[parentItemId] != null) {\r\n              return navigationFamily.SKIP;\r\n            }\r\n            if (parentItem.visibility != Visibility.Invisible) {\r\n              result.push(parentItemId);\r\n            }\r\n            processed[parentItemId] = true;\r\n          });\r\n          break;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function getItems() {\r\n    return _data.items;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getItems: getItems\r\n  };\r\n};"],"mappings":"AAAA,SAASA,iBAAiB,EAAEC,UAAU,QAAQ,gBAAgB;AAE9D,eAAe,SAASC,yBAAyBA,CAACC,oBAAoB,EAAEC,cAAc,EAAEC,iBAAiB,EAAEC,iCAAiC,EAAE;EAC5I,IAAIC,KAAK,GAAG;IACVC,KAAK,EAAE;EACT,CAAC;EAED,SAASC,OAAOA,CAAA,EAAG;IACjB,IAAIC,iBAAiB,GAAGJ,iCAAiC,CAACK,oBAAoB,CAAC,CAAC;MAC9EC,gBAAgB,GAAGT,oBAAoB,CAACU,gBAAgB,CAAC,CAAC;MAC1DC,gBAAgB,GAAGV,cAAc,CAACW,iBAAiB,CAAC,CAAC;MACrDC,aAAa,GAAGX,iBAAiB,CAACY,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;IAEvDF,aAAa,CAACG,IAAI,CAACL,gBAAgB,CAAC;IAEpCP,KAAK,CAACC,KAAK,GAAGY,qBAAqB,CAACJ,aAAa,EAAEJ,gBAAgB,EAAEF,iBAAiB,CAAC;IAEvF,OAAO,IAAI;EACb;EAEA,SAASU,qBAAqBA,CAACJ,aAAa,EAAEJ,gBAAgB,EAAEF,iBAAiB,EAAE;IACjF,IAAIW,MAAM,GAAG,EAAE;MACbC,SAAS,GAAG,CAAC,CAAC;MACdC,YAAY;MACZC,KAAK;MAAEC,GAAG;IAEZ,KAAKD,KAAK,GAAG,CAAC,EAAEC,GAAG,GAAGT,aAAa,CAACU,MAAM,EAAEF,KAAK,GAAGC,GAAG,EAAED,KAAK,IAAI,CAAC,EAAE;MACnED,YAAY,GAAGP,aAAa,CAACQ,KAAK,CAAC;MACnC;MACA,QAAQd,iBAAiB;QACvB,KAAKV,iBAAiB,CAAC2B,IAAI;UACzB;QACF,KAAK3B,iBAAiB,CAAC4B,SAAS;UAC9B;UACAhB,gBAAgB,CAACiB,WAAW,CAAC,IAAI,EAAEN,YAAY,EAAE,UAAUO,YAAY,EAAEC,UAAU,EAAE;YACnF,IAAIT,SAAS,CAACQ,YAAY,CAAC,IAAI,IAAI,EAAE;cACnC,OAAOlB,gBAAgB,CAACoB,IAAI;YAC9B;YACA,IAAID,UAAU,CAACE,UAAU,IAAIhC,UAAU,CAACiC,SAAS,EAAE;cACjDb,MAAM,CAACF,IAAI,CAACW,YAAY,CAAC;YAC3B;YACAR,SAAS,CAACQ,YAAY,CAAC,GAAG,IAAI;UAChC,CAAC,CAAC;UACF;MACJ;IACF;IACA,OAAOT,MAAM;EACf;EAEA,SAASJ,QAAQA,CAAA,EAAG;IAClB,OAAOV,KAAK,CAACC,KAAK;EACpB;EAEA,OAAO;IACLC,OAAO,EAAEA,OAAO;IAChBQ,QAAQ,EAAEA;EACZ,CAAC;AACH;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}