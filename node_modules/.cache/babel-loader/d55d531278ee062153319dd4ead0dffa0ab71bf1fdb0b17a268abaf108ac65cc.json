{"ast":null,"code":"import Size from '../../graphics/structs/Size';\nimport Rect from '../../graphics/structs/Rect';\nimport Point from '../../graphics/structs/Point';\nimport TreeItemPosition from '../../models/TreeItemPosition';\nimport { OrientationType, Visibility, HorizontalAlignmentType, PageFitMode } from '../../enums';\nimport SpatialIndex from '../../algorithms/SpatialIndex';\nimport KeyboardNavigationManager from '../../managers/KeyboardNavigationManager';\nexport default function AlignDiagramTask(orientationOptionTask, itemsSizesOptionTask, visualTreeOptionTask, scaleOptionTask, currentControlSizeTask, activeItemsTask, itemsPositionsTask) {\n  var _data = {\n      treeItemsPositions: {},\n      // TreeItemPosition();\n      panelSize: null // Rect();\n    },\n    _activeItems,\n    _treeItemsPositions,\n    _spatialIndex,\n    _keyboardNavigationManager;\n  function process() {\n    var placeholderSize = new Size(itemsPositionsTask.getContentSize()),\n      {\n        optimalPanelSize\n      } = currentControlSizeTask.getOptions(),\n      {\n        pageFitMode\n      } = itemsSizesOptionTask.getOptions(),\n      {\n        orientationType\n      } = orientationOptionTask.getOptions(),\n      {\n        horizontalAlignment\n      } = visualTreeOptionTask.getOptions(),\n      {\n        scale\n      } = scaleOptionTask.getOptions();\n    _spatialIndex = null;\n    _keyboardNavigationManager = null;\n    _activeItems = activeItemsTask != null ? activeItemsTask.getActiveItems() : {};\n    _treeItemsPositions = itemsPositionsTask.getItemsPositions();\n    var panelSize = new Size(optimalPanelSize);\n    switch (orientationType) {\n      case OrientationType.Left:\n      case OrientationType.Right:\n        panelSize.invert();\n        break;\n    }\n    panelSize.scale(1.0 / scale);\n\n    // By default we translate everything forward\n    _data.panelSize = panelSize;\n    _data.treeItemsPositions = _treeItemsPositions;\n    switch (pageFitMode) {\n      case PageFitMode.AutoSize:\n        _data.panelSize = new Size(placeholderSize);\n        break;\n      default:\n        _data.panelSize = new Size(placeholderSize);\n        if (placeholderSize.width < panelSize.width) {\n          _data.treeItemsPositions = {};\n          stretchToWidth(_data.treeItemsPositions, placeholderSize.width, panelSize.width, horizontalAlignment);\n          _data.panelSize.width = panelSize.width;\n        }\n        if (placeholderSize.height < panelSize.height) {\n          _data.panelSize.height = panelSize.height;\n        }\n        break;\n    }\n    switch (orientationType) {\n      case OrientationType.Left:\n      case OrientationType.Right:\n        _data.panelSize.invert();\n        break;\n    }\n    return true;\n  }\n  function stretchToWidth(treeItemsPositions, treeWidth, panelWidth, horizontalAlignment) {\n    var offset;\n    switch (horizontalAlignment) {\n      case HorizontalAlignmentType.Left:\n        offset = 0;\n        break;\n      case HorizontalAlignmentType.Right:\n        offset = panelWidth - treeWidth;\n        break;\n      case HorizontalAlignmentType.Center:\n        offset = (panelWidth - treeWidth) / 2.0;\n        break;\n    }\n    translateItemPositions(treeItemsPositions, offset, 0);\n  }\n  function translateItemPositions(treeItemsPositions, offsetX, offsetY) {\n    var treeItemId, treeItemPosition;\n    for (treeItemId in _treeItemsPositions) {\n      if (_treeItemsPositions.hasOwnProperty(treeItemId)) {\n        treeItemPosition = new TreeItemPosition(_treeItemsPositions[treeItemId]);\n        treeItemPosition.actualPosition.translate(offsetX, offsetY);\n        treeItemsPositions[treeItemId] = treeItemPosition;\n      }\n    }\n  }\n  function getSizes() {\n    var result = [];\n    var hash = {};\n    for (var itemid in _data.treeItemsPositions) {\n      if (_data.treeItemsPositions.hasOwnProperty(itemid)) {\n        var treeItemPosition = _data.treeItemsPositions[itemid];\n        switch (treeItemPosition.actualVisibility) {\n          case Visibility.Normal:\n          case Visibility.Dot: //ignore jslint\n          case Visibility.Line:\n            var item = treeItemPosition.actualPosition;\n            var size = Math.max(item.width, item.height);\n            if (!hash.hasOwnProperty(size)) {\n              hash[size] = true;\n              result.push(size);\n            }\n        }\n      }\n    }\n    return result;\n  }\n  function getSpatialIndex() {\n    if (_spatialIndex == null) {\n      _spatialIndex = SpatialIndex(getSizes());\n      for (var itemid in _data.treeItemsPositions) {\n        if (_data.treeItemsPositions.hasOwnProperty(itemid)) {\n          var treeItemPosition = _data.treeItemsPositions[itemid];\n          if (_activeItems.hasOwnProperty(itemid)) {\n            switch (treeItemPosition.actualVisibility) {\n              case Visibility.Normal:\n              case Visibility.Dot: //ignore jslint\n              case Visibility.Line:\n                var rect = new Rect(treeItemPosition.actualPosition);\n                rect.context = itemid;\n                _spatialIndex.addRect(rect);\n            }\n          }\n        }\n      }\n    }\n    return _spatialIndex;\n  }\n  function getTreeItemForMousePosition(x, y, gravityRadius) {\n    var result = null,\n      bestDistance = null,\n      spatialIndex = getSpatialIndex(),\n      selection,\n      center;\n    selection = new Rect(x, y, 0, 0);\n    center = new Point(x, y);\n    selection.offset(gravityRadius, gravityRadius, gravityRadius, gravityRadius);\n    spatialIndex.loopArea(this, selection, function (rect) {\n      var itemid = rect.context;\n      if (rect.contains(x, y)) {\n        result = itemid;\n        return true;\n      }\n      var treeItemPosition = _data.treeItemsPositions[itemid];\n      switch (treeItemPosition.actualVisibility) {\n        case Visibility.Dot: //ignore jslint\n        case Visibility.Line:\n          var distance = center.distanceTo(rect.horizontalCenter(), rect.verticalCenter());\n          if (bestDistance == null || distance < bestDistance) {\n            bestDistance = distance;\n            result = itemid;\n          }\n      }\n    });\n    return result;\n  }\n  function getKeyboardNavigationManager() {\n    if (_keyboardNavigationManager == null) {\n      _keyboardNavigationManager = KeyboardNavigationManager();\n      for (var itemid in _data.treeItemsPositions) {\n        if (_data.treeItemsPositions.hasOwnProperty(itemid)) {\n          var treeItemPosition = _data.treeItemsPositions[itemid];\n          if (_activeItems.hasOwnProperty(itemid)) {\n            switch (treeItemPosition.actualVisibility) {\n              case Visibility.Normal:\n                var rect = new Rect(treeItemPosition.actualPosition);\n                _keyboardNavigationManager.addRect(rect, itemid);\n            }\n          }\n        }\n      }\n    }\n    return _keyboardNavigationManager;\n  }\n  function getNextItem(cursorItem, direction) {\n    var manager = getKeyboardNavigationManager(),\n      result;\n    switch (direction) {\n      case OrientationType.Top:\n        result = manager.getItemAbove(cursorItem);\n        break;\n      case OrientationType.Bottom:\n        result = manager.getItemBelow(cursorItem);\n        break;\n      case OrientationType.Left:\n        result = manager.getItemOnLeft(cursorItem);\n        break;\n      case OrientationType.Right:\n        result = manager.getItemOnRight(cursorItem);\n        break;\n    }\n    return result;\n  }\n  function getItemPosition(itemid) {\n    return _data.treeItemsPositions[itemid];\n  }\n  function getItemsPositions() {\n    return _data.treeItemsPositions;\n  }\n  function getContentSize() {\n    return _data.panelSize;\n  }\n  return {\n    process: process,\n    getItemPosition: getItemPosition,\n    getItemsPositions: getItemsPositions,\n    getContentSize: getContentSize,\n    getTreeItemForMousePosition: getTreeItemForMousePosition,\n    getNextItem: getNextItem\n  };\n}\n;","map":{"version":3,"names":["Size","Rect","Point","TreeItemPosition","OrientationType","Visibility","HorizontalAlignmentType","PageFitMode","SpatialIndex","KeyboardNavigationManager","AlignDiagramTask","orientationOptionTask","itemsSizesOptionTask","visualTreeOptionTask","scaleOptionTask","currentControlSizeTask","activeItemsTask","itemsPositionsTask","_data","treeItemsPositions","panelSize","_activeItems","_treeItemsPositions","_spatialIndex","_keyboardNavigationManager","process","placeholderSize","getContentSize","optimalPanelSize","getOptions","pageFitMode","orientationType","horizontalAlignment","scale","getActiveItems","getItemsPositions","Left","Right","invert","AutoSize","width","stretchToWidth","height","treeWidth","panelWidth","offset","Center","translateItemPositions","offsetX","offsetY","treeItemId","treeItemPosition","hasOwnProperty","actualPosition","translate","getSizes","result","hash","itemid","actualVisibility","Normal","Dot","Line","item","size","Math","max","push","getSpatialIndex","rect","context","addRect","getTreeItemForMousePosition","x","y","gravityRadius","bestDistance","spatialIndex","selection","center","loopArea","contains","distance","distanceTo","horizontalCenter","verticalCenter","getKeyboardNavigationManager","getNextItem","cursorItem","direction","manager","Top","getItemAbove","Bottom","getItemBelow","getItemOnLeft","getItemOnRight","getItemPosition"],"sources":["/Users/iamnestyyy/ReactProjects/orgchart/node_modules/basicprimitives/src/tasks/layout/AlignDiagramTask.js"],"sourcesContent":["import Size from '../../graphics/structs/Size';\r\nimport Rect from '../../graphics/structs/Rect';\r\nimport Point from '../../graphics/structs/Point';\r\nimport TreeItemPosition from '../../models/TreeItemPosition';\r\nimport { OrientationType, Visibility, HorizontalAlignmentType, PageFitMode } from '../../enums';\r\nimport SpatialIndex from '../../algorithms/SpatialIndex';\r\nimport KeyboardNavigationManager from '../../managers/KeyboardNavigationManager';\r\n\r\nexport default function AlignDiagramTask(orientationOptionTask, itemsSizesOptionTask, visualTreeOptionTask, scaleOptionTask,\r\n  currentControlSizeTask, activeItemsTask, itemsPositionsTask) {\r\n  var _data = {\r\n    treeItemsPositions: {}, // TreeItemPosition();\r\n    panelSize: null // Rect();\r\n  },\r\n    _activeItems,\r\n    _treeItemsPositions,\r\n    _spatialIndex,\r\n    _keyboardNavigationManager;\r\n\r\n  function process() {\r\n    var placeholderSize = new Size(itemsPositionsTask.getContentSize()),\r\n      { optimalPanelSize } = currentControlSizeTask.getOptions(),\r\n      { pageFitMode } = itemsSizesOptionTask.getOptions(),\r\n      { orientationType } = orientationOptionTask.getOptions(),\r\n      { horizontalAlignment } = visualTreeOptionTask.getOptions(),\r\n      { scale } = scaleOptionTask.getOptions();\r\n    \r\n    _spatialIndex = null;\r\n    _keyboardNavigationManager = null;\r\n    _activeItems = activeItemsTask != null ? activeItemsTask.getActiveItems() : {};\r\n    _treeItemsPositions = itemsPositionsTask.getItemsPositions();\r\n\r\n    var panelSize = new Size(optimalPanelSize);\r\n\r\n    switch (orientationType) {\r\n      case OrientationType.Left:\r\n      case OrientationType.Right:\r\n        panelSize.invert();\r\n        break;\r\n    }\r\n\r\n    panelSize.scale(1.0 / scale);\r\n\r\n    // By default we translate everything forward\r\n    _data.panelSize = panelSize;\r\n    _data.treeItemsPositions = _treeItemsPositions;\r\n\r\n    switch (pageFitMode) {\r\n      case PageFitMode.AutoSize:\r\n        _data.panelSize = new Size(placeholderSize);\r\n        break;\r\n      default:\r\n        _data.panelSize = new Size(placeholderSize);\r\n        if (placeholderSize.width < panelSize.width) {\r\n          _data.treeItemsPositions = {};\r\n          stretchToWidth(_data.treeItemsPositions, placeholderSize.width, panelSize.width, horizontalAlignment);\r\n          _data.panelSize.width = panelSize.width;\r\n        }\r\n        if (placeholderSize.height < panelSize.height) {\r\n          _data.panelSize.height = panelSize.height;\r\n        }\r\n        break;\r\n    }\r\n\r\n    switch (orientationType) {\r\n      case OrientationType.Left:\r\n      case OrientationType.Right:\r\n        _data.panelSize.invert();\r\n        break;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function stretchToWidth(treeItemsPositions, treeWidth, panelWidth, horizontalAlignment) {\r\n    var offset;\r\n    switch (horizontalAlignment) {\r\n      case HorizontalAlignmentType.Left:\r\n        offset = 0;\r\n        break;\r\n      case HorizontalAlignmentType.Right:\r\n        offset = panelWidth - treeWidth;\r\n        break;\r\n      case HorizontalAlignmentType.Center:\r\n        offset = (panelWidth - treeWidth) / 2.0;\r\n        break;\r\n    }\r\n    translateItemPositions(treeItemsPositions, offset, 0);\r\n  }\r\n\r\n  function translateItemPositions(treeItemsPositions, offsetX, offsetY) {\r\n    var treeItemId, treeItemPosition;\r\n    for (treeItemId in _treeItemsPositions) {\r\n      if (_treeItemsPositions.hasOwnProperty(treeItemId)) {\r\n        treeItemPosition = new TreeItemPosition(_treeItemsPositions[treeItemId]);\r\n        treeItemPosition.actualPosition.translate(offsetX, offsetY);\r\n        treeItemsPositions[treeItemId] = treeItemPosition;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getSizes() {\r\n    var result = [];\r\n    var hash = {};\r\n    for (var itemid in _data.treeItemsPositions) {\r\n      if (_data.treeItemsPositions.hasOwnProperty(itemid)) {\r\n        var treeItemPosition = _data.treeItemsPositions[itemid];\r\n        switch (treeItemPosition.actualVisibility) {\r\n          case Visibility.Normal:\r\n          case Visibility.Dot://ignore jslint\r\n          case Visibility.Line:\r\n            var item = treeItemPosition.actualPosition;\r\n            var size = Math.max(item.width, item.height);\r\n            if (!hash.hasOwnProperty(size)) {\r\n              hash[size] = true;\r\n              result.push(size);\r\n            }\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function getSpatialIndex() {\r\n    if (_spatialIndex == null) {\r\n      _spatialIndex = SpatialIndex(getSizes());\r\n      for (var itemid in _data.treeItemsPositions) {\r\n        if (_data.treeItemsPositions.hasOwnProperty(itemid)) {\r\n          var treeItemPosition = _data.treeItemsPositions[itemid];\r\n          if (_activeItems.hasOwnProperty(itemid)) {\r\n            switch (treeItemPosition.actualVisibility) {\r\n              case Visibility.Normal:\r\n              case Visibility.Dot://ignore jslint\r\n              case Visibility.Line:\r\n                var rect = new Rect(treeItemPosition.actualPosition);\r\n                rect.context = itemid;\r\n                _spatialIndex.addRect(rect);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return _spatialIndex;\r\n  }\r\n\r\n  function getTreeItemForMousePosition(x, y, gravityRadius) {\r\n    var result = null,\r\n      bestDistance = null,\r\n      spatialIndex = getSpatialIndex(),\r\n      selection,\r\n      center;\r\n\r\n    selection = new Rect(x, y, 0, 0);\r\n    center = new Point(x, y);\r\n    selection.offset(gravityRadius, gravityRadius, gravityRadius, gravityRadius);\r\n\r\n    spatialIndex.loopArea(this, selection, function (rect) {\r\n      var itemid = rect.context;\r\n      if (rect.contains(x, y)) {\r\n        result = itemid;\r\n        return true;\r\n      }\r\n      var treeItemPosition = _data.treeItemsPositions[itemid];\r\n      switch (treeItemPosition.actualVisibility) {\r\n        case Visibility.Dot://ignore jslint\r\n        case Visibility.Line:\r\n          var distance = center.distanceTo(rect.horizontalCenter(), rect.verticalCenter());\r\n          if (bestDistance == null || distance < bestDistance) {\r\n            bestDistance = distance;\r\n            result = itemid;\r\n          }\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  function getKeyboardNavigationManager() {\r\n    if (_keyboardNavigationManager == null) {\r\n      _keyboardNavigationManager = KeyboardNavigationManager();\r\n      for (var itemid in _data.treeItemsPositions) {\r\n        if (_data.treeItemsPositions.hasOwnProperty(itemid)) {\r\n          var treeItemPosition = _data.treeItemsPositions[itemid];\r\n          if (_activeItems.hasOwnProperty(itemid)) {\r\n            switch (treeItemPosition.actualVisibility) {\r\n              case Visibility.Normal:\r\n                var rect = new Rect(treeItemPosition.actualPosition);\r\n                _keyboardNavigationManager.addRect(rect, itemid);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return _keyboardNavigationManager;\r\n  }\r\n\r\n  function getNextItem(cursorItem, direction) {\r\n    var manager = getKeyboardNavigationManager(),\r\n      result;\r\n\r\n    switch (direction) {\r\n      case OrientationType.Top:\r\n        result = manager.getItemAbove(cursorItem);\r\n        break;\r\n      case OrientationType.Bottom:\r\n        result = manager.getItemBelow(cursorItem);\r\n        break;\r\n      case OrientationType.Left:\r\n        result = manager.getItemOnLeft(cursorItem);\r\n        break;\r\n      case OrientationType.Right:\r\n        result = manager.getItemOnRight(cursorItem);\r\n        break;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  function getItemPosition(itemid) {\r\n    return _data.treeItemsPositions[itemid];\r\n  }\r\n\r\n  function getItemsPositions() {\r\n    return _data.treeItemsPositions;\r\n  }\r\n\r\n  function getContentSize() {\r\n    return _data.panelSize;\r\n  }\r\n\r\n  return {\r\n    process: process,\r\n    getItemPosition: getItemPosition,\r\n    getItemsPositions: getItemsPositions,\r\n    getContentSize: getContentSize,\r\n\r\n    getTreeItemForMousePosition: getTreeItemForMousePosition,\r\n    getNextItem: getNextItem\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}