{"ast":null,"code":"import Cache from './Cache';\nimport { Layers } from '../enums';\nimport { loop, getHashCode, mergeObjects } from '../common';\nimport { TextOrientationType, VerticalAlignmentType, RenderingMode } from '../enums';\nimport JsonML from '../common/jsonml-html';\nimport Size from './structs/Size';\nimport Rect from './structs/Rect';\nimport Placeholder from './Placeholder';\nimport Layer from './Layer';\nimport { getInnerSize } from './dom';\nimport RenderEventArgs from '../events/RenderEventArgs';\nimport { getTextAlign, getVerticalAlignment } from './EnumValues';\nexport default function Graphics(element) {\n  this.m_element = element;\n  this.m_placeholders = {};\n  this.m_activePlaceholder = null;\n  this.m_cache = new Cache();\n  this.debug = false;\n  this.layerNames = {};\n  loop(this, Layers, function (key, value) {\n    this.layerNames[value] = key;\n  });\n}\n;\nGraphics.prototype.clean = function () {\n  var key, placeholder, layerKey, layer;\n  this.m_cache.clear();\n  this.m_cache = null;\n  this.m_element = null;\n  for (key in this.m_placeholders) {\n    if (this.m_placeholders.hasOwnProperty(key)) {\n      placeholder = this.m_placeholders[key];\n      for (layerKey in placeholder.layers) {\n        if (placeholder.layers.hasOwnProperty(layerKey)) {\n          layer = placeholder.layers[layerKey];\n          layer.canvas.parentNode.removeChild(layer.canvas);\n          layer.canvas = null;\n        }\n      }\n      placeholder.layers.length = 0;\n      placeholder.activeLayer = null;\n      placeholder.size = null;\n      placeholder.rect = null;\n      placeholder.div = null;\n    }\n  }\n  this.m_placeholders.length = 0;\n  this.m_activePlaceholder = null;\n};\nGraphics.prototype.resize = function (name, width, height) {\n  var placeholder = this.m_placeholders[name];\n  if (placeholder === undefined) {\n    placeholder = this._activatePlaceholder(name);\n  }\n  this.resizePlaceholder(placeholder, 0, 0, width, height);\n};\nGraphics.prototype.position = function (name, left, top, width, height) {\n  var placeholder = this.m_placeholders[name];\n  if (placeholder === undefined) {\n    placeholder = this._activatePlaceholder(name);\n  }\n  this.resizePlaceholder(placeholder, left, top, width, height);\n};\nGraphics.prototype.show = function (name) {\n  var placeholder = this.m_placeholders[name];\n  if (placeholder != null) {\n    JsonML.applyStyles(placeholder.div, {\n      display: \"inherit\",\n      visibility: \"inherit\"\n    });\n  }\n};\nGraphics.prototype.hide = function (name) {\n  var placeholder = this.m_placeholders[name];\n  if (placeholder != null) {\n    JsonML.applyStyles(placeholder.div, {\n      \"display\": \"none\",\n      \"visibility\": \"hidden\"\n    });\n  }\n};\nGraphics.prototype.resizePlaceholder = function (placeholder, left, top, width, height) {\n  var layerKey, layer;\n  placeholder.size = new Size(width, height);\n  placeholder.rect = new Rect(left, top, width, height);\n  JsonML.applyStyles(placeholder.div, placeholder.rect.getCSS());\n  for (layerKey in placeholder.layers) {\n    if (placeholder.layers.hasOwnProperty(layerKey)) {\n      layer = placeholder.layers[layerKey];\n      if (layer.name !== -1) {\n        JsonML.applyStyles(layer.canvas, {\n          \"position\": \"absolute\",\n          \"width\": \"0px\",\n          \"height\": \"0px\"\n        });\n      }\n    }\n  }\n};\nGraphics.prototype.begin = function () {\n  this.m_cache.begin();\n};\nGraphics.prototype.end = function () {\n  this.m_cache.end();\n};\nGraphics.prototype.reset = function (arg0, arg1) {\n  var placeholderName = \"none\",\n    layerName = -1;\n  switch (arguments.length) {\n    case 1:\n      if (typeof arg0 === \"string\") {\n        placeholderName = arg0;\n      } else {\n        layerName = arg0;\n      }\n      break;\n    case 2:\n      placeholderName = arg0;\n      layerName = arg1;\n      break;\n  }\n  this.m_cache.reset(placeholderName, layerName);\n};\nGraphics.prototype.activate = function (arg0, arg1) {\n  switch (arguments.length) {\n    case 1:\n      if (typeof arg0 === \"string\") {\n        this._activatePlaceholder(arg0);\n        this._activateLayer(-1);\n      } else {\n        this._activatePlaceholder(\"none\");\n        this._activateLayer(arg0);\n      }\n      break;\n    case 2:\n      this._activatePlaceholder(arg0);\n      this._activateLayer(arg1);\n      break;\n  }\n  return this.m_activePlaceholder;\n};\nGraphics.prototype._activatePlaceholder = function (placeholderName) {\n  var placeholder = this.m_placeholders[placeholderName],\n    div,\n    divs;\n  if (placeholder === undefined) {\n    div = null;\n    if (placeholderName === \"none\") {\n      div = this.m_element;\n    } else {\n      divs = this.m_element.getElementsByClassName(placeholderName);\n      div = divs.length > 0 ? divs[0] : this.m_element;\n    }\n    placeholder = new Placeholder(placeholderName);\n    placeholder.div = div;\n    placeholder.size = getInnerSize(div);\n    placeholder.rect = new Rect(0, 0, placeholder.size.width, placeholder.size.height);\n    this.m_placeholders[placeholderName] = placeholder;\n  }\n  this.m_activePlaceholder = placeholder;\n  return this.m_activePlaceholder;\n};\nGraphics.prototype._activateLayer = function (layerName) {\n  var layer = this.m_activePlaceholder.layers[layerName],\n    placeholder,\n    canvas,\n    position,\n    maximumLayer,\n    layerKey;\n  if (layer === undefined) {\n    placeholder = this.m_activePlaceholder;\n    if (layerName === -1) {\n      layer = new Layer(layerName);\n      layer.canvas = placeholder.div;\n    } else {\n      canvas = JsonML.toHTML([\"div\", {\n        \"style\": {\n          \"position\": \"absolute\",\n          \"width\": \"0px\",\n          \"height\": \"0px\"\n        },\n        \"class\": [\"Layer\" + layerName, \"Layer\" + this.layerNames[layerName]]\n      }]);\n      maximumLayer = null;\n      for (layerKey in placeholder.layers) {\n        if (placeholder.layers.hasOwnProperty(layerKey)) {\n          layer = placeholder.layers[layerKey];\n          if (layer.name < layerName) {\n            maximumLayer = maximumLayer !== null ? Math.max(maximumLayer, layer.name) : layer.name;\n          }\n        }\n      }\n      layer = new Layer(layerName);\n      layer.canvas = canvas;\n      if (maximumLayer === null) {\n        this.prepend(placeholder.div, layer.canvas);\n      } else {\n        this.insertAfter(placeholder.layers[maximumLayer].canvas, layer.canvas);\n      }\n    }\n    placeholder.layers[layerName] = layer;\n  }\n  this.m_activePlaceholder.activeLayer = layer;\n};\nGraphics.prototype.prepend = function (parent, newElement) {\n  if (parent.firstChild == null) {\n    parent.appendChild(newElement);\n  } else {\n    parent.insertBefore(newElement, parent.firstChild);\n  }\n};\nGraphics.prototype.insertAfter = function (insertAfterElement, newElement) {\n  var parent = insertAfterElement.parentNode;\n  if (parent.lastChild == insertAfterElement) {\n    parent.appendChild(newElement);\n  } else {\n    parent.insertBefore(newElement, insertAfterElement.nextSibling);\n  }\n};\nGraphics.prototype.text = function (x, y, width, height, label, orientation, horizontalAlignment, verticalAlignment, attr) {\n  var placeholder = this.m_activePlaceholder,\n    style = {\n      \"position\": \"absolute\",\n      \"padding\": 0,\n      \"margin\": 0,\n      \"textAlign\": getTextAlign(horizontalAlignment),\n      \"fontSize\": attr.fontSize,\n      \"fontFamily\": attr.fontFamily,\n      \"fontWeight\": attr.fontWeight,\n      \"fontStyle\": attr.fontStyle,\n      \"color\": attr.fontColor,\n      \"lineHeight\": 1\n    },\n    rotation = \"\",\n    element,\n    tdstyle;\n  switch (orientation) {\n    case TextOrientationType.Horizontal:\n    case TextOrientationType.Auto:\n      style.left = x + \"px\";\n      style.top = y + \"px\";\n      style.width = width + \"px\";\n      style.height = height + \"px\";\n      break;\n    case TextOrientationType.RotateLeft:\n      style.left = x + Math.round(width / 2.0 - height / 2.0) + \"px\";\n      style.top = y + Math.round(height / 2.0 - width / 2.0) + \"px\";\n      style.width = height + \"px\";\n      style.height = width + \"px\";\n      rotation = \"rotate(-90deg)\";\n      break;\n    case TextOrientationType.RotateRight:\n      style.left = x + Math.round(width / 2.0 - height / 2.0) + \"px\";\n      style.top = y + Math.round(height / 2.0 - width / 2.0) + \"px\";\n      style.width = height + \"px\";\n      style.height = width + \"px\";\n      rotation = \"rotate(90deg)\";\n      break;\n  }\n  style[\"-webkit-transform-origin\"] = \"center center\";\n  style[\"-moz-transform-origin\"] = \"center center\";\n  style[\"-o-transform-origin\"] = \"center center\";\n  style[\"-ms-transform-origin\"] = \"center center\";\n  style[\"-webkit-transform\"] = rotation;\n  style[\"-moz-transform\"] = rotation;\n  style[\"-o-transform\"] = rotation;\n  style[\"-ms-transform\"] = rotation;\n  style.transform = rotation;\n  style.maxWidth = style.width;\n  style.maxHeight = style.height;\n  label = label.replace(new RegExp(\"\\n\", 'g'), \"<br/>\");\n  switch (verticalAlignment) {\n    case VerticalAlignmentType.Top:\n      if (this.debug) {\n        style.border = \"solid 1px black\";\n      }\n      element = this.m_cache.get(placeholder.name, placeholder.activeLayer.name, \"text\");\n      if (element === null) {\n        element = JsonML.toHTML([\"div\", {\n          \"style\": style,\n          $: function (element) {\n            element.innerHTML = label;\n          }\n        }]);\n        placeholder.activeLayer.canvas.appendChild(element);\n        this.m_cache.put(placeholder.name, placeholder.activeLayer.name, \"text\", element);\n      } else {\n        JsonML.applyStyles(element, style);\n        element.innerHTML = label;\n      }\n      break;\n    default:\n      style.borderCollapse = \"collapse\";\n      tdstyle = {\n        \"verticalAlign\": getVerticalAlignment(verticalAlignment),\n        \"padding\": 0\n      };\n      if (this.debug) {\n        tdstyle.border = \"solid 1px black\";\n      }\n      element = this.m_cache.get(placeholder.name, placeholder.activeLayer.name, \"textintable\");\n      if (element === null) {\n        element = JsonML.toHTML([\"table\", {\n          \"style\": style\n        }, [\"tbody\", [\"tr\", [\"td\", {\n          \"style\": tdstyle,\n          $: function (element) {\n            element.innerHTML = label;\n          }\n        }]]]]);\n        placeholder.activeLayer.canvas.appendChild(element);\n        this.m_cache.put(placeholder.name, placeholder.activeLayer.name, \"textintable\", element);\n      } else {\n        JsonML.applyStyles(element, style);\n        var td = element.getElementsByTagName(\"td\")[0];\n        JsonML.applyStyles(td, tdstyle);\n        td.innerHTML = label;\n      }\n      break;\n  }\n};\nGraphics.prototype.polylinesBuffer = function (buffer) {\n  buffer.loop(this, function (polyline) {\n    if (polyline.length() > 0) {\n      this.polyline(polyline);\n    }\n  });\n};\nGraphics.prototype.template = function (x, y, width, height, contentx, contenty, contentWidth, contentHeight, template, hashCode, onRenderTemplate, uiHash, attr) {\n  //ignore jslint\n  var placeholder = this.m_activePlaceholder,\n    element,\n    templateKey = \"template\" + (hashCode !== null ? hashCode : getHashCode(template)),\n    gap = 0,\n    style;\n  element = this.m_cache.get(placeholder.name, placeholder.activeLayer.name, templateKey);\n  if (attr !== null) {\n    if (attr.borderWidth !== undefined) {\n      attr.borderWidth = attr.borderWidth.toString();\n      gap = this.getPxSize(attr.borderWidth);\n    }\n  }\n  style = {\n    \"width\": contentWidth - gap + \"px\",\n    \"height\": contentHeight - gap + \"px\",\n    \"top\": y + contenty + \"px\",\n    \"left\": x + contentx + \"px\"\n  };\n  mergeObjects(style, attr);\n  if (uiHash == null) {\n    uiHash = new RenderEventArgs();\n  }\n  uiHash.x = x + contentx;\n  uiHash.y = y + contenty;\n  uiHash.width = contentWidth - gap;\n  uiHash.height = contentHeight - gap;\n  if (element == null) {\n    element = this.getElementByTemplate(template);\n    style = mergeObjects(style, {\n      \"position\": \"absolute\",\n      \"padding\": \"0px\",\n      \"margin\": \"0px\"\n    }, attr);\n    JsonML.applyStyles(element, style);\n    uiHash.element = element;\n    uiHash.renderingMode = RenderingMode.Create;\n    if (onRenderTemplate !== null) {\n      onRenderTemplate(null, uiHash);\n    }\n    placeholder.activeLayer.canvas.appendChild(element);\n    this.m_cache.put(placeholder.name, placeholder.activeLayer.name, templateKey, element);\n  } else {\n    uiHash.element = element;\n    uiHash.renderingMode = RenderingMode.Update;\n    JsonML.applyStyles(element, style);\n    if (onRenderTemplate !== null) {\n      onRenderTemplate(null, uiHash);\n    }\n  }\n  return element;\n};\nGraphics.prototype.getElementByTemplate = function (template) {\n  var result = null;\n  if (Array.isArray(template)) {\n    result = JsonML.toHTML(template);\n  } else {\n    var parent = document.createElement('div');\n    parent.innerHTML = template;\n    result = parent.firstChild;\n  }\n  return result;\n};\nGraphics.prototype.getPxSize = function (value, base) {\n  var result = value;\n  if (typeof value === \"string\") {\n    if (value.indexOf(\"pt\") > 0) {\n      result = parseInt(value, 10) * 96 / 72;\n    } else if (value.indexOf(\"%\") > 0) {\n      result = parseFloat(value) / 100.0 * base;\n    } else {\n      result = parseInt(value, 10);\n    }\n  }\n  return result;\n};","map":{"version":3,"names":["Cache","Layers","loop","getHashCode","mergeObjects","TextOrientationType","VerticalAlignmentType","RenderingMode","JsonML","Size","Rect","Placeholder","Layer","getInnerSize","RenderEventArgs","getTextAlign","getVerticalAlignment","Graphics","element","m_element","m_placeholders","m_activePlaceholder","m_cache","debug","layerNames","key","value","prototype","clean","placeholder","layerKey","layer","clear","hasOwnProperty","layers","canvas","parentNode","removeChild","length","activeLayer","size","rect","div","resize","name","width","height","undefined","_activatePlaceholder","resizePlaceholder","position","left","top","show","applyStyles","display","visibility","hide","getCSS","begin","end","reset","arg0","arg1","placeholderName","layerName","arguments","activate","_activateLayer","divs","getElementsByClassName","maximumLayer","toHTML","Math","max","prepend","insertAfter","parent","newElement","firstChild","appendChild","insertBefore","insertAfterElement","lastChild","nextSibling","text","x","y","label","orientation","horizontalAlignment","verticalAlignment","attr","style","fontSize","fontFamily","fontWeight","fontStyle","fontColor","rotation","tdstyle","Horizontal","Auto","RotateLeft","round","RotateRight","transform","maxWidth","maxHeight","replace","RegExp","Top","border","get","$","innerHTML","put","borderCollapse","td","getElementsByTagName","polylinesBuffer","buffer","polyline","template","contentx","contenty","contentWidth","contentHeight","hashCode","onRenderTemplate","uiHash","templateKey","gap","borderWidth","toString","getPxSize","getElementByTemplate","renderingMode","Create","Update","result","Array","isArray","document","createElement","base","indexOf","parseInt","parseFloat"],"sources":["C:/Users/LCGI_15/Desktop/projects/nesty-orgchart/orgchart/node_modules/basicprimitives/src/graphics/Graphics.js"],"sourcesContent":["import Cache from './Cache';\r\nimport { Layers } from '../enums';\r\nimport { loop, getHashCode, mergeObjects } from '../common';\r\nimport { TextOrientationType, VerticalAlignmentType, RenderingMode } from '../enums';\r\nimport JsonML from '../common/jsonml-html';\r\nimport Size from './structs/Size';\r\nimport Rect from './structs/Rect';\r\nimport Placeholder from './Placeholder';\r\nimport Layer from './Layer';\r\nimport { getInnerSize } from './dom';\r\nimport RenderEventArgs from '../events/RenderEventArgs';\r\nimport { getTextAlign, getVerticalAlignment } from './EnumValues';\r\n\r\nexport default function Graphics(element) {\r\n  this.m_element = element;\r\n\r\n  this.m_placeholders = {};\r\n  this.m_activePlaceholder = null;\r\n\r\n  this.m_cache = new Cache();\r\n\r\n  this.debug = false;\r\n  this.layerNames = {};\r\n\r\n  loop(this, Layers, function (key, value) {\r\n    this.layerNames[value] = key;\r\n  });\r\n};\r\n\r\nGraphics.prototype.clean = function () {\r\n  var key,\r\n    placeholder,\r\n    layerKey,\r\n    layer;\r\n  this.m_cache.clear();\r\n\r\n  this.m_cache = null;\r\n\r\n  this.m_element = null;\r\n  for (key in this.m_placeholders) {\r\n    if (this.m_placeholders.hasOwnProperty(key)) {\r\n      placeholder = this.m_placeholders[key];\r\n\r\n      for (layerKey in placeholder.layers) {\r\n        if (placeholder.layers.hasOwnProperty(layerKey)) {\r\n          layer = placeholder.layers[layerKey];\r\n          layer.canvas.parentNode.removeChild(layer.canvas);\r\n          layer.canvas = null;\r\n        }\r\n      }\r\n      placeholder.layers.length = 0;\r\n      placeholder.activeLayer = null;\r\n\r\n      placeholder.size = null;\r\n      placeholder.rect = null;\r\n      placeholder.div = null;\r\n    }\r\n  }\r\n  this.m_placeholders.length = 0;\r\n  this.m_activePlaceholder = null;\r\n};\r\n\r\nGraphics.prototype.resize = function (name, width, height) {\r\n  var placeholder = this.m_placeholders[name];\r\n  if (placeholder === undefined) {\r\n    placeholder = this._activatePlaceholder(name);\r\n  }\r\n  this.resizePlaceholder(placeholder, 0, 0, width, height);\r\n};\r\n\r\nGraphics.prototype.position = function (name, left, top, width, height) {\r\n  var placeholder = this.m_placeholders[name];\r\n  if (placeholder === undefined) {\r\n    placeholder = this._activatePlaceholder(name);\r\n  }\r\n  this.resizePlaceholder(placeholder, left, top, width, height);\r\n};\r\n\r\nGraphics.prototype.show = function (name) {\r\n  var placeholder = this.m_placeholders[name];\r\n  if (placeholder != null) {\r\n    JsonML.applyStyles(placeholder.div, {\r\n      display: \"inherit\",\r\n      visibility: \"inherit\"\r\n    });\r\n  }\r\n};\r\n\r\nGraphics.prototype.hide = function (name) {\r\n  var placeholder = this.m_placeholders[name];\r\n  if (placeholder != null) {\r\n    JsonML.applyStyles(placeholder.div, {\r\n      \"display\": \"none\",\r\n      \"visibility\": \"hidden\"\r\n    });\r\n  }\r\n};\r\n\r\nGraphics.prototype.resizePlaceholder = function (placeholder, left, top, width, height) {\r\n  var layerKey,\r\n    layer;\r\n\r\n  placeholder.size = new Size(width, height);\r\n  placeholder.rect = new Rect(left, top, width, height);\r\n\r\n  JsonML.applyStyles(placeholder.div, placeholder.rect.getCSS());\r\n  for (layerKey in placeholder.layers) {\r\n    if (placeholder.layers.hasOwnProperty(layerKey)) {\r\n      layer = placeholder.layers[layerKey];\r\n      if (layer.name !== -1) {\r\n        JsonML.applyStyles(layer.canvas, {\r\n          \"position\": \"absolute\",\r\n          \"width\": \"0px\",\r\n          \"height\": \"0px\"\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nGraphics.prototype.begin = function () {\r\n  this.m_cache.begin();\r\n};\r\n\r\nGraphics.prototype.end = function () {\r\n  this.m_cache.end();\r\n};\r\n\r\n\r\nGraphics.prototype.reset = function (arg0, arg1) {\r\n  var placeholderName = \"none\",\r\n    layerName = -1;\r\n  switch (arguments.length) {\r\n    case 1:\r\n      if (typeof arg0 === \"string\") {\r\n        placeholderName = arg0;\r\n      }\r\n      else {\r\n        layerName = arg0;\r\n      }\r\n      break;\r\n    case 2:\r\n      placeholderName = arg0;\r\n      layerName = arg1;\r\n      break;\r\n  }\r\n  this.m_cache.reset(placeholderName, layerName);\r\n};\r\n\r\nGraphics.prototype.activate = function (arg0, arg1) {\r\n  switch (arguments.length) {\r\n    case 1:\r\n      if (typeof arg0 === \"string\") {\r\n        this._activatePlaceholder(arg0);\r\n        this._activateLayer(-1);\r\n      }\r\n      else {\r\n        this._activatePlaceholder(\"none\");\r\n        this._activateLayer(arg0);\r\n      }\r\n      break;\r\n    case 2:\r\n      this._activatePlaceholder(arg0);\r\n      this._activateLayer(arg1);\r\n      break;\r\n  }\r\n  return this.m_activePlaceholder;\r\n};\r\n\r\nGraphics.prototype._activatePlaceholder = function (placeholderName) {\r\n  var placeholder = this.m_placeholders[placeholderName],\r\n    div, divs;\r\n  if (placeholder === undefined) {\r\n    div = null;\r\n    if (placeholderName === \"none\") {\r\n      div = this.m_element;\r\n    }\r\n    else {\r\n      divs = this.m_element.getElementsByClassName(placeholderName);\r\n      div = divs.length > 0 ? divs[0] : this.m_element;\r\n    }\r\n\r\n    placeholder = new Placeholder(placeholderName);\r\n    placeholder.div = div;\r\n    placeholder.size = getInnerSize(div);\r\n    placeholder.rect = new Rect(0, 0, placeholder.size.width, placeholder.size.height);\r\n\r\n    this.m_placeholders[placeholderName] = placeholder;\r\n  }\r\n  this.m_activePlaceholder = placeholder;\r\n  return this.m_activePlaceholder;\r\n};\r\n\r\nGraphics.prototype._activateLayer = function (layerName) {\r\n  var layer = this.m_activePlaceholder.layers[layerName],\r\n    placeholder,\r\n    canvas,\r\n    position,\r\n    maximumLayer,\r\n    layerKey;\r\n  if (layer === undefined) {\r\n    placeholder = this.m_activePlaceholder;\r\n    if (layerName === -1) {\r\n      layer = new Layer(layerName);\r\n      layer.canvas = placeholder.div;\r\n    }\r\n    else {\r\n      canvas = JsonML.toHTML([\"div\",\r\n        {\r\n          \"style\": {\r\n            \"position\": \"absolute\",\r\n            \"width\": \"0px\",\r\n            \"height\": \"0px\"\r\n          },\r\n          \"class\": [\"Layer\" + layerName, \"Layer\" + this.layerNames[layerName]]\r\n        }\r\n      ]);\r\n\r\n      maximumLayer = null;\r\n      for (layerKey in placeholder.layers) {\r\n        if (placeholder.layers.hasOwnProperty(layerKey)) {\r\n          layer = placeholder.layers[layerKey];\r\n          if (layer.name < layerName) {\r\n            maximumLayer = (maximumLayer !== null) ? Math.max(maximumLayer, layer.name) : layer.name;\r\n          }\r\n        }\r\n      }\r\n\r\n      layer = new Layer(layerName);\r\n      layer.canvas = canvas;\r\n\r\n      if (maximumLayer === null) {\r\n        this.prepend(placeholder.div, layer.canvas);\r\n      } else {\r\n        this.insertAfter(placeholder.layers[maximumLayer].canvas, layer.canvas);\r\n      }\r\n    }\r\n    placeholder.layers[layerName] = layer;\r\n  }\r\n  this.m_activePlaceholder.activeLayer = layer;\r\n};\r\n\r\nGraphics.prototype.prepend = function (parent, newElement) {\r\n  if (parent.firstChild == null) {\r\n    parent.appendChild(newElement);\r\n  } else {\r\n    parent.insertBefore(newElement, parent.firstChild);\r\n  }\r\n};\r\n\r\nGraphics.prototype.insertAfter = function (insertAfterElement, newElement) {\r\n  var parent = insertAfterElement.parentNode;\r\n  if (parent.lastChild == insertAfterElement) {\r\n    parent.appendChild(newElement);\r\n  } else {\r\n    parent.insertBefore(newElement, insertAfterElement.nextSibling);\r\n  }\r\n};\r\n\r\nGraphics.prototype.text = function (x, y, width, height, label, orientation, horizontalAlignment, verticalAlignment, attr) {\r\n  var placeholder = this.m_activePlaceholder,\r\n    style = {\r\n      \"position\": \"absolute\",\r\n      \"padding\": 0,\r\n      \"margin\": 0,\r\n      \"textAlign\": getTextAlign(horizontalAlignment),\r\n      \"fontSize\": attr.fontSize,\r\n      \"fontFamily\": attr.fontFamily,\r\n      \"fontWeight\": attr.fontWeight,\r\n      \"fontStyle\": attr.fontStyle,\r\n      \"color\": attr.fontColor,\r\n      \"lineHeight\": 1\r\n    },\r\n    rotation = \"\",\r\n    element,\r\n    tdstyle;\r\n\r\n  switch (orientation) {\r\n    case TextOrientationType.Horizontal:\r\n    case TextOrientationType.Auto:\r\n      style.left = x + \"px\";\r\n      style.top = y + \"px\";\r\n      style.width = width + \"px\";\r\n      style.height = height + \"px\";\r\n      break;\r\n    case TextOrientationType.RotateLeft:\r\n      style.left = x + Math.round(width / 2.0 - height / 2.0) + \"px\";\r\n      style.top = y + Math.round(height / 2.0 - width / 2.0) + \"px\";\r\n      style.width = height + \"px\";\r\n      style.height = width + \"px\";\r\n      rotation = \"rotate(-90deg)\";\r\n      break;\r\n    case TextOrientationType.RotateRight:\r\n      style.left = x + Math.round(width / 2.0 - height / 2.0) + \"px\";\r\n      style.top = y + Math.round(height / 2.0 - width / 2.0) + \"px\";\r\n      style.width = height + \"px\";\r\n      style.height = width + \"px\";\r\n      rotation = \"rotate(90deg)\";\r\n      break;\r\n  }\r\n\r\n  style[\"-webkit-transform-origin\"] = \"center center\";\r\n  style[\"-moz-transform-origin\"] = \"center center\";\r\n  style[\"-o-transform-origin\"] = \"center center\";\r\n  style[\"-ms-transform-origin\"] = \"center center\";\r\n\r\n\r\n  style[\"-webkit-transform\"] = rotation;\r\n  style[\"-moz-transform\"] = rotation;\r\n  style[\"-o-transform\"] = rotation;\r\n  style[\"-ms-transform\"] = rotation;\r\n  style.transform = rotation;\r\n\r\n\r\n  style.maxWidth = style.width;\r\n  style.maxHeight = style.height;\r\n\r\n  label = label.replace(new RegExp(\"\\n\", 'g'), \"<br/>\");\r\n  switch (verticalAlignment) {\r\n    case VerticalAlignmentType.Top:\r\n      if (this.debug) {\r\n        style.border = \"solid 1px black\";\r\n      }\r\n      element = this.m_cache.get(placeholder.name, placeholder.activeLayer.name, \"text\");\r\n      if (element === null) {\r\n        element = JsonML.toHTML([\"div\",\r\n          {\r\n            \"style\": style,\r\n            $: function (element) { element.innerHTML = label; }\r\n          }\r\n        ]);\r\n        placeholder.activeLayer.canvas.appendChild(element);\r\n        this.m_cache.put(placeholder.name, placeholder.activeLayer.name, \"text\", element);\r\n      }\r\n      else {\r\n        JsonML.applyStyles(element, style);\r\n        element.innerHTML = label;\r\n      }\r\n      break;\r\n    default:\r\n      style.borderCollapse = \"collapse\";\r\n      tdstyle = {\r\n        \"verticalAlign\": getVerticalAlignment(verticalAlignment),\r\n        \"padding\": 0\r\n      };\r\n      if (this.debug) {\r\n        tdstyle.border = \"solid 1px black\";\r\n      }\r\n      element = this.m_cache.get(placeholder.name, placeholder.activeLayer.name, \"textintable\");\r\n      if (element === null) {\r\n        element = JsonML.toHTML([\"table\",\r\n          {\r\n            \"style\": style\r\n          },\r\n          [\"tbody\",\r\n            [\"tr\",\r\n              [\"td\",\r\n                {\r\n                  \"style\": tdstyle,\r\n                  $: function (element) { element.innerHTML = label; }\r\n                }\r\n              ]\r\n            ]\r\n          ]\r\n        ]);\r\n        placeholder.activeLayer.canvas.appendChild(element);\r\n        this.m_cache.put(placeholder.name, placeholder.activeLayer.name, \"textintable\", element);\r\n      }\r\n      else {\r\n        JsonML.applyStyles(element, style);\r\n        var td = element.getElementsByTagName(\"td\")[0];\r\n        JsonML.applyStyles(td, tdstyle);\r\n        td.innerHTML = label;\r\n      }\r\n      break;\r\n  }\r\n};\r\n\r\nGraphics.prototype.polylinesBuffer = function (buffer) {\r\n  buffer.loop(this, function (polyline) {\r\n    if (polyline.length() > 0) {\r\n      this.polyline(polyline);\r\n    }\r\n  });\r\n};\r\n\r\n\r\nGraphics.prototype.template = function (x, y, width, height, contentx, contenty, contentWidth, contentHeight, template, hashCode, onRenderTemplate, uiHash, attr) { //ignore jslint\r\n  var placeholder = this.m_activePlaceholder,\r\n    element,\r\n    templateKey = \"template\" + ((hashCode !== null) ? hashCode : getHashCode(template)),\r\n    gap = 0,\r\n    style;\r\n\r\n  element = this.m_cache.get(placeholder.name, placeholder.activeLayer.name, templateKey);\r\n\r\n  if (attr !== null) {\r\n    if (attr.borderWidth !== undefined) {\r\n      attr.borderWidth = attr.borderWidth.toString();\r\n      gap = this.getPxSize(attr.borderWidth);\r\n    }\r\n  }\r\n\r\n  style = {\r\n    \"width\": (contentWidth - gap) + \"px\",\r\n    \"height\": (contentHeight - gap) + \"px\",\r\n    \"top\": (y + contenty) + \"px\",\r\n    \"left\": (x + contentx) + \"px\"\r\n  };\r\n\r\n  mergeObjects(style, attr);\r\n\r\n  if (uiHash == null) {\r\n    uiHash = new RenderEventArgs();\r\n  }\r\n\r\n  uiHash.x = x + contentx;\r\n  uiHash.y = y + contenty;\r\n  uiHash.width = contentWidth - gap;\r\n  uiHash.height = contentHeight - gap;\r\n\r\n  if (element == null) {\r\n    element = this.getElementByTemplate(template);\r\n    style = mergeObjects(style, {\r\n      \"position\": \"absolute\",\r\n      \"padding\": \"0px\",\r\n      \"margin\": \"0px\"\r\n    }, attr);\r\n    JsonML.applyStyles(element, style);\r\n\r\n    uiHash.element = element;\r\n    uiHash.renderingMode = RenderingMode.Create;\r\n\r\n    if (onRenderTemplate !== null) {\r\n      onRenderTemplate(null, uiHash);\r\n    }\r\n    placeholder.activeLayer.canvas.appendChild(element);\r\n    this.m_cache.put(placeholder.name, placeholder.activeLayer.name, templateKey, element);\r\n  } else {\r\n    uiHash.element = element;\r\n    uiHash.renderingMode = RenderingMode.Update;\r\n    JsonML.applyStyles(element, style);\r\n    if (onRenderTemplate !== null) {\r\n      onRenderTemplate(null, uiHash);\r\n    }\r\n  }\r\n  return element;\r\n};\r\n\r\nGraphics.prototype.getElementByTemplate = function (template) {\r\n  var result = null;\r\n  if (Array.isArray(template)) {\r\n    result = JsonML.toHTML(template);\r\n  } else {\r\n    var parent = document.createElement('div');\r\n    parent.innerHTML = template;\r\n    result = parent.firstChild;\r\n  }\r\n  return result;\r\n};\r\n\r\nGraphics.prototype.getPxSize = function (value, base) {\r\n  var result = value;\r\n  if (typeof value === \"string\") {\r\n    if (value.indexOf(\"pt\") > 0) {\r\n      result = parseInt(value, 10) * 96 / 72;\r\n    }\r\n    else if (value.indexOf(\"%\") > 0) {\r\n      result = parseFloat(value) / 100.0 * base;\r\n    }\r\n    else {\r\n      result = parseInt(value, 10);\r\n    }\r\n  }\r\n  return result;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}